/**
 * skylark-widgets-richeditor - The skylark richeditor widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylark-widgets/skylark-widgets-richeditor/
 * @license MIT
 */
!function(t,e){var i=e.define,r=e.require,o="function"==typeof i&&i.amd,n=!o&&"undefined"!=typeof exports;if(!o&&!i){var a={};i=e.define=function(t,e,i){"function"==typeof i?(a[t]={factory:i,deps:e.map(function(e){return function(t,e){if("."!==t[0])return t;var i=e.split("/"),r=t.split("/");i.pop();for(var o=0;o<r.length;o++)"."!=r[o]&&(".."==r[o]?i.pop():i.push(r[o]));return i.join("/")}(e,t)}),resolved:!1,exports:null},r(t)):a[t]={factory:null,resolved:!0,exports:i}},r=e.require=function(t){if(!a.hasOwnProperty(t))throw new Error("Module "+t+" has not been defined");var i=a[t];if(!i.resolved){var o=[];i.deps.forEach(function(t){o.push(r(t))}),i.exports=i.factory.apply(e,o)||null,i.resolved=!0}return i.exports}}if(!i)throw new Error("The module utility (ex: requirejs or skylark-utils) is not loaded!");if(function(t,e){t([],function(){"use strict";var e={},i={exports:{}};function r(t){return"object"!=typeof t||Array.isArray(t)||!function(t){var e;for(e in t)return!1;return!0}(t)}return t(["skylark-langx/langx","skylark-utils-dom/query","skylark-domx-contents/Editable","skylark-widgets-base/Widget","./Toolbar","./uploader","./i18n"],function(t,e,i,r,o,n,a){var s=r.inherit({options:{srcNodeRef:null,placeholder:"",defaultImage:"images/image.png",params:{},upload:!1,template:'<div class="richeditor">\n  <div class="richeditor-wrapper">\n    <div class="richeditor-placeholder"></div>\n    <div class="richeditor-body" contenteditable="true">\n    </div>\n  </div>\n</div>'},_init:function(){var t,r;if(this.opts=this.options,this.textarea=e(this.opts.srcNodeRef),this.opts.placeholder=this.opts.placeholder||this.textarea.attr("placeholder"),!this.textarea.length)throw new Error("richeditor: param textarea is required.");null!=(t=this.textarea.data("richeditor"))&&t.destroy(),this.id=++s.count,this._render();var a=this;if(this.editable=new i(this._elm,{classPrefix:"richeditor-",textarea:this.textarea,body:this.body}),this.editable.on("all",function(t,e){return a.trigger(t.type,e)}),this.opts.upload&&n&&(r="object"==typeof this.opts.upload?this.opts.upload:{},this.uploader=n(r)),this.toolbar=new o(this,{toolbar:this.opts.toolbar,toolbarFloat:this.opts.toolbarFloat,toolbarHidden:this.opts.toolbarHidden,toolbarFloatOffset:this.opts.toolbarFloatOffset}),this.opts.placeholder&&this.on("valuechanged",function(){return a._placeholder()}),this.setValue(this.textarea.val().trim()||""),this.textarea.attr("autofocus"))return a.focus()}});return s.prototype.triggerHandler=s.prototype.trigger=function(e,i){var r;return r=[e],i&&(r=r.concat(i)),t.Evented.prototype.trigger.apply(this,r),this},s.count=0,s.prototype._render=function(){var t,i,r,o;if(this.el=e(this._elm).insertBefore(this.textarea),this.wrapper=this.el.find(".richeditor-wrapper"),this.body=this.wrapper.find(".richeditor-body"),this.placeholderEl=this.wrapper.find(".richeditor-placeholder").append(this.opts.placeholder),this.el.data("richeditor",this),this.wrapper.append(this.textarea),this.textarea.data("richeditor",this).blur(),this.body.attr("tabindex",this.textarea.attr("tabindex")),this.opts.params){for(t in i=this.opts.params,r=[],i)o=i[t],r.push(e("<input/>",{type:"hidden",name:t,value:o}).insertAfter(this.textarea));return r}},s.prototype._placeholder=function(){var t;return 0===(t=this.body.children()).length||1===t.length&&this.util.isEmptyNode(t)&&parseInt(t.css("margin-left")||0)<this.opts.indentWidth?this.placeholderEl.show():this.placeholderEl.hide()},s.prototype.setValue=function(t){return this.hidePopover(),this.editable.setValue(t),this.trigger("valuechanged")},s.prototype.getValue=function(){return this.editable.getValue()},s.prototype.focus=function(){return this.editable.focus()},s.prototype.blur=function(){return this.editable.blur()},s.prototype.hidePopover=function(){return this.el.find(".richeditor-popover").each(function(t,i){if((i=e(i).data("popover")).active)return i.hide()})},s.prototype.destroy=function(){return this.triggerHandler("destroy"),this.textarea.closest("form").off(".richeditor .richeditor-"+this.id),this.selection.clear(),this.inputManager.focused=!1,this.textarea.insertBefore(this.el).hide().val("").removeData("richeditor"),this.el.remove(),e(document).off(".richeditor-"+this.id),e(window).off(".richeditor-"+this.id),this.off()},s.Toolbar=o,s.i18n=a,s.addons={general:{},actions:{}},s}),r(i.exports)?i.exports:r(e)?e:void 0}),t("skylark-widgets-richeditor/RichEditor",function(){}),t("skylark-widgets-richeditor/i18n",[],function(){var t={"zh-CN":{blockquote:"引用",bold:"加粗文字",code:"插入代码",color:"文字颜色",coloredText:"彩色文字",hr:"分隔线",image:"插入图片",externalImage:"外链图片",uploadImage:"上传图片",uploadFailed:"上传失败了",uploadError:"上传出错了",imageUrl:"图片地址",imageSize:"图片尺寸",imageAlt:"图片描述",restoreImageSize:"还原图片尺寸",uploading:"正在上传",indent:"向右缩进",outdent:"向左缩进",italic:"斜体文字",link:"插入链接",linkText:"链接文字",linkUrl:"链接地址",linkTarget:"打开方式",openLinkInCurrentWindow:"在当前窗口中打开",openLinkInNewWindow:"在新窗口中打开",removeLink:"移除链接",ol:"有序列表",ul:"无序列表",strikethrough:"删除线文字",table:"表格",deleteRow:"删除行",insertRowAbove:"在上面插入行",insertRowBelow:"在下面插入行",deleteColumn:"删除列",insertColumnLeft:"在左边插入列",insertColumnRight:"在右边插入列",deleteTable:"删除表格",title:"标题",normalText:"普通文本",underline:"下划线文字",alignment:"水平对齐",alignCenter:"居中",alignLeft:"居左",alignRight:"居右",selectLanguage:"选择程序语言",fontScale:"字体大小",fontScaleXLarge:"超大字体",fontScaleLarge:"大号字体",fontScaleNormal:"正常大小",fontScaleSmall:"小号字体",fontScaleXSmall:"超小字体"},"en-US":{blockquote:"Block Quote",bold:"Bold",code:"Code",color:"Text Color",coloredText:"Colored Text",hr:"Horizontal Line",image:"Insert Image",externalImage:"External Image",uploadImage:"Upload Image",uploadFailed:"Upload failed",uploadError:"Error occurs during upload",imageUrl:"Url",imageSize:"Size",imageAlt:"Alt",restoreImageSize:"Restore Origin Size",uploading:"Uploading",indent:"Indent",outdent:"Outdent",italic:"Italic",link:"Insert Link",linkText:"Text",linkUrl:"Url",linkTarget:"Target",openLinkInCurrentWindow:"Open link in current window",openLinkInNewWindow:"Open link in new window",removeLink:"Remove Link",ol:"Ordered List",ul:"Unordered List",strikethrough:"Strikethrough",table:"Table",deleteRow:"Delete Row",insertRowAbove:"Insert Row Above",insertRowBelow:"Insert Row Below",deleteColumn:"Delete Column",insertColumnLeft:"Insert Column Left",insertColumnRight:"Insert Column Right",deleteTable:"Delete Table",title:"Title",normalText:"Text",underline:"Underline",alignment:"Alignment",alignCenter:"Align Center",alignLeft:"Align Left",alignRight:"Align Right",selectLanguage:"Select Language",fontScale:"Font Size",fontScaleXLarge:"X Large Size",fontScaleLarge:"Large Size",fontScaleNormal:"Normal Size",fontScaleSmall:"Small Size",fontScaleXSmall:"X Small Size"},translate:function(){var e,i,r,o;return i=arguments[0],e=2<=arguments.length?Array.prototype.slice.call(arguments,1):[],o=(null!=(r=t[this.locale])?r[i]:void 0)||"",e.length>0?(o=o.replace(/([^%]|^)%(?:(\d+)\$)?s/g,function(t,i,r){return r?i+e[parseInt(r)-1]:i+e.shift()})).replace(/%%s/g,"%s"):o}};return t}),t("skylark-widgets-richeditor/Button",["skylark-langx/langx","skylark-utils-dom/query","skylark-widgets-base/Widget","./RichEditor","./i18n"],function(t,e,i,r,o){var n=i.inherit({options:{template:'<li><a tabindex="-1" unselectable="on" class="toolbar-item" href="javascript:;"><span></span></a></li>',menu:{menuWrapper:'<div class="toolbar-menu"></div>',menuItem:'<li><a tabindex="-1" unselectable="on" class="menu-item" href="javascript:;"><span></span></a></li>',separator:'<li><span class="separator"></span></li>'}},_construct:function(t){this.toolbar=t.toolbar,this.editor=t.toolbar.editor,this.title=o.translate(this.name),i.prototype._construct.call(this,t)}});return n.prototype.name="",n.prototype.icon="",n.prototype.title="",n.prototype.text="",n.prototype.htmlTag="",n.prototype.disableTag="",n.prototype.menu=!1,n.prototype.active=!1,n.prototype.disabled=!1,n.prototype.needFocus=!0,n.prototype.shortcut=null,n.prototype._init=function(){var i,r,o,n,a;for(this.render(),this.el.on("mousedown",(a=this,function(t){var e,i;return t.preventDefault(),e=a.needFocus&&!a.editor.editable.inputManager.focused,!a.el.hasClass("disabled")&&(e&&a.editor.focus(),a.menu?(a.wrapper.toggleClass("menu-on").siblings("li").removeClass("menu-on"),a.wrapper.is(".menu-on")&&(a.menuWrapper.offset().left+a.menuWrapper.outerWidth()+5-a.editor.wrapper.offset().left-a.editor.wrapper.outerWidth()>0&&a.menuWrapper.css({left:"auto",right:0}),a.trigger("menuexpand")),!1):(i=a.el.data("param"),a.command(i),!1))})),this.wrapper.on("click","a.menu-item",function(t){return function(i){var r,o,n;return i.preventDefault(),r=e(i.currentTarget),t.wrapper.removeClass("menu-on"),o=t.needFocus&&!t.editor.editable.inputManager.focused,!r.hasClass("disabled")&&!o&&(t.toolbar.wrapper.removeClass("menu-on"),n=r.data("param"),t.command(n),!1)}}(this)),this.wrapper.on("mousedown","a.menu-item",function(t){return!1}),this.editor.on("blur",function(t){return function(){if(t.editor.body.is(":visible")&&t.editor.body.is("[contenteditable]")&&!t.editor.editable.clipboard.pasting)return t.setActive(!1),t.setDisabled(!1)}}(this)),null!=this.shortcut&&this.editor.editable.hotkeys.add(this.shortcut,function(t){return function(e){return t.el.mousedown(),!1}}(this)),o=this.htmlTag.split(","),i=0,r=o.length;i<r;i++)n=o[i],(n=t.trim(n))&&t.inArray(n,this.editor.editable.formatter._allowedTags)<0&&this.editor.editable.formatter._allowedTags.push(n);return this.editor.on("selectionchanged",function(t){return function(e){if(t.editor.editable.inputManager.focused)return t._status()}}(this))},n.prototype.iconClassOf=function(t){return t?"richeditor-icon richeditor-icon-"+t:""},n.prototype.setIcon=function(t){return this.el.find("span").removeClass().addClass(this.iconClassOf(t)).text(this.text)},n.prototype.render=function(){if(this.toolbar.addToolItem(this),this.wrapper=e(this._elm),this.el=this.wrapper.find("a.toolbar-item"),this.el.attr("title",this.title).addClass("toolbar-item-"+this.name).data("button",this),this.setIcon(this.icon),this.menu)return this.menuWrapper=e(this.options.menu.menuWrapper).appendTo(this.wrapper),this.menuWrapper.addClass("toolbar-menu-"+this.name),this.renderMenu()},n.prototype.renderMenu=function(){var i,r,o,n,a,s,l,d;if(t.isArray(this.menu)){for(this.menuEl=e("<ul/>").appendTo(this.menuWrapper),s=this.menu,d=[],o=0,n=s.length;o<n;o++)"|"!==(a=s[o])?(r=e(this.options.menu.menuItem).appendTo(this.menuEl),i=r.find("a.menu-item").attr({title:null!=(l=a.title)?l:a.text,"data-param":a.param}).addClass("menu-item-"+a.name),a.icon?d.push(i.find("span").addClass(this.iconClassOf(a.icon))):d.push(i.find("span").text(a.text))):e(this.options.menu.separator).appendTo(this.menuEl);return d}},n.prototype.setActive=function(t){if(t!==this.active)return this.active=t,this.el.toggleClass("active",this.active)},n.prototype.setDisabled=function(t){if(t!==this.disabled)return this.disabled=t,this.el.toggleClass("disabled",this.disabled)},n.prototype._disableStatus=function(){var t,e,i;return i=this.editor.editable.selection.startNodes(),e=this.editor.editable.selection.endNodes(),t=i.filter(this.disableTag).length>0||e.filter(this.disableTag).length>0,this.setDisabled(t),this.disabled&&this.setActive(!1),this.disabled},n.prototype._activeStatus=function(){var t,e,i,r,o;return o=this.editor.editable.selection.startNodes(),i=this.editor.editable.selection.endNodes(),r=o.filter(this.htmlTag),e=i.filter(this.htmlTag),t=r.length>0&&e.length>0&&r.is(e),this.node=t?r:null,this.setActive(t),this.active},n.prototype._status=function(){if(this._disableStatus(),!this.disabled)return this._activeStatus()},n.prototype.command=function(t){},n.prototype._t=o.translate,r.Button=n,n}),t("skylark-widgets-richeditor/Popover",["skylark-langx/langx","skylark-utils-dom/query","./RichEditor","./i18n"],function(t,e,i,r){var o=t.Evented.inherit({init:function(t){this.button=t.button,this.editor=t.button.editor,this._init()}});return o.prototype.offset={top:4,left:0},o.prototype.target=null,o.prototype.active=!1,o.prototype._init=function(){var t;return this.el=e('<div class="richeditor-popover"></div>').appendTo(this.editor.el).data("popover",this),this.render(),this.el.on("mouseenter",(t=this,function(e){return t.el.addClass("hover")})),this.el.on("mouseleave",function(t){return function(e){return t.el.removeClass("hover")}}(this))},o.prototype.render=function(){},o.prototype._initLabelWidth=function(){var t,i;if((t=this.el.find(".settings-field")).length>0)return this._labelWidth=0,t.each((i=this,function(t,r){var o,n;if(o=e(r),(n=o.find("label")).length>0)return i._labelWidth=Math.max(i._labelWidth,n.width())})),t.find("label").width(this._labelWidth)},o.prototype.show=function(t,i){if(null==i&&(i="bottom"),null!=t)return this.el.siblings(".richeditor-popover").each(function(t,i){if((i=e(i).data("popover")).active)return i.hide()}),this.active&&this.target&&this.target.removeClass("selected"),this.target=t.addClass("selected"),this.active?(this.refresh(i),this.trigger("popovershow")):(this.active=!0,this.el.css({left:-9999}).show(),this._labelWidth||this._initLabelWidth(),this.editor.editable.util.reflow(),this.refresh(i),this.trigger("popovershow"))},o.prototype.hide=function(){if(this.active)return this.target&&this.target.removeClass("selected"),this.target=null,this.active=!1,this.el.hide(),this.trigger("popoverhide")},o.prototype.refresh=function(t){var e,i,r,o,n,a;if(null==t&&(t="bottom"),this.active)return e=this.editor.el.offset(),n=this.target.offset(),o=this.target.outerHeight(),"bottom"===t?a=n.top-e.top+o:"top"===t&&(a=n.top-e.top-this.el.height()),r=this.editor.wrapper.width()-this.el.outerWidth()-10,i=Math.min(n.left-e.left,r),this.el.css({top:a+this.offset.top,left:i+this.offset.left})},o.prototype.destroy=function(){return this.target=null,this.active=!1,this.editor.off(".linkpopover"),this.el.remove()},o.prototype._t=function(t){var e;return e=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],r.translate.apply(r,e)},i.Popover=o,o}),t("skylark-widgets-richeditor/Toolbar",["skylark-langx/langx","skylark-utils-dom/query","skylark-widgets-swt/Toolbar"],function(t,e,i){var r=i.inherit({pluginName:"lark.richeditor.toolbar",_construct:function(t,e){this.editor=t,i.prototype._construct.call(this,e)},_init:function(){i.prototype._init.call(this),this._render()}});return r.prototype._render=function(){var t,i,r,o;for(this.buttons=[],this.wrapper=e(this._elm).prependTo(this.editor.wrapper),o=this.opts.toolbar,t=0,i=o.length;t<i;t++)if("|"!==(r=o[t])){if(!this.constructor.buttons[r])throw new Error("richeditor: invalid toolbar button "+r);this.buttons.push(new this.constructor.buttons[r]({toolbar:this,editor:this.editor}))}else this.addSeparator();if(this.opts.toolbarHidden)return this.wrapper.hide()},r.prototype.findButton=function(t){var e;return null!=(e=this.list.find(".toolbar-item-"+t).data("button"))?e:null},r.addButton=function(t){return this.buttons[t.prototype.name]=t},r.buttons={},r}),t("skylark-widgets-richeditor/buttons/AlignmentButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button","../i18n"],function(t,e,i,r,o){var n=r.inherit({});return n.prototype.name="alignment",n.prototype.icon="align-left",n.prototype.htmlTag="p, h1, h2, h3, h4, td, th",n.prototype._init=function(){return this.menu=[{name:"left",text:o.translate("alignLeft"),icon:"align-left",param:"left"},{name:"center",text:o.translate("alignCenter"),icon:"align-center",param:"center"},{name:"right",text:o.translate("alignRight"),icon:"align-right",param:"right"}],r.prototype._init.call(this)},n.prototype.setActive=function(t,e){return null==e&&(e="left"),"left"!==e&&"center"!==e&&"right"!==e&&(e="left"),"left"===e?r.prototype.setActive.call(this,!1):r.prototype.setActive.call(this,t),this.el.removeClass("align-left align-center align-right"),t&&this.el.addClass("align-"+e),this.setIcon("align-"+e),this.menuEl.find(".menu-item").show().end().find(".menu-item-"+e).hide()},n.prototype._status=function(){var t=this.editor.editable.status("alignment",this.htmlTag);return t?(this.setDisabled(!1),this.setActive(!0,t)):(this.setDisabled(!0),this.setActive(!1))},n.prototype.command=function(t){return this.editor.editable.alignment(t,this.htmlTag)},i.Toolbar.addButton(n),n}),t("skylark-widgets-richeditor/buttons/BlockquoteButton",["skylark-utils-dom/query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r){var o=r.inherit({});return o.prototype.name="blockquote",o.prototype.icon="quote-left",o.prototype.htmlTag="blockquote",o.prototype.disableTag="pre, table",o.prototype.command=function(){return this.editor.editable.blockquote(this.htmlTag,this.disableTag)},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/BoldButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r){var o=r.inherit({});return o.prototype.name="bold",o.prototype.icon="bold",o.prototype.htmlTag="b, strong",o.prototype.disableTag="pre",o.prototype.shortcut="cmd+b",o.prototype._init=function(){return this.editor.editable.util.os.mac?this.title=this.title+" ( Cmd + b )":(this.title=this.title+" ( Ctrl + b )",this.shortcut="ctrl+b"),r.prototype._init.call(this)},o.prototype._activeStatus=function(){var t;return t=this.editor.editable.isActive("bold"),this.setActive(t),this.active},o.prototype.command=function(){return this.editor.editable.bold()},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/CodePopover",["skylark-domx-query","../Toolbar","../RichEditor","../Popover"],function(t,e,i,r){var o=r.inherit({});return o.prototype.render=function(){var e,i,r,o,n;for(this._tpl='<div class="code-settings">\n  <div class="settings-field">\n    <select class="select-lang">\n      <option value="-1">'+this._t("selectLanguage")+"</option>\n    </select>\n  </div>\n</div>",this.langs=this.editor.opts.codeLanguages||[{name:"Bash",value:"bash"},{name:"C++",value:"c++"},{name:"C#",value:"cs"},{name:"CSS",value:"css"},{name:"Erlang",value:"erlang"},{name:"Less",value:"less"},{name:"Sass",value:"sass"},{name:"Diff",value:"diff"},{name:"CoffeeScript",value:"coffeescript"},{name:"HTML,XML",value:"html"},{name:"JSON",value:"json"},{name:"Java",value:"java"},{name:"JavaScript",value:"js"},{name:"Markdown",value:"markdown"},{name:"Objective C",value:"oc"},{name:"PHP",value:"php"},{name:"Perl",value:"parl"},{name:"Python",value:"python"},{name:"Ruby",value:"ruby"},{name:"SQL",value:"sql"}],this.el.addClass("code-popover").append(this._tpl),this.selectEl=this.el.find(".select-lang"),o=this.langs,e=0,r=o.length;e<r;e++)i=o[e],t("<option/>",{text:i.name,value:i.value}).appendTo(this.selectEl);return this.selectEl.on("change",(n=this,function(t){var e;return n.lang=n.selectEl.val(),e=n.target.hasClass("selected"),n.target.removeClass().removeAttr("data-lang"),-1!==n.lang&&n.target.attr("data-lang",n.lang),e&&n.target.addClass("selected"),n.editor.trigger("valuechanged")})),this.editor.on("valuechanged",function(t){return function(e){if(t.active)return t.refresh()}}(this))},o.prototype.show=function(){var t;return t=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],r.prototype.show.apply(this,t),this.lang=this.target.attr("data-lang"),null!=this.lang?this.selectEl.val(this.lang):this.selectEl.val(-1)},o}),t("skylark-widgets-richeditor/buttons/CodeButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button","./CodePopover"],function(t,e,i,r,o){var n=r.inherit({});return n.prototype.name="code",n.prototype.icon="code",n.prototype.htmlTag="pre",n.prototype.disableTag="ul, ol, table",n.prototype._init=function(){var e;return r.prototype._init.call(this),this.editor.on("decorate",(e=this,function(i,r){return r.find("pre").each(function(i,r){return e.decorate(t(r))})})),this.editor.on("undecorate",function(e){return function(i,r){return r.find("pre").each(function(i,r){return e.undecorate(t(r))})}}(this))},n.prototype.render=function(){var t;return t=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],r.prototype.render.apply(this,t),this.popover=new o({button:this})},n.prototype._checkMode=function(){var e;return e=this.editor.editable.selection.range(),t(e.cloneContents()).find(this.editor.editable.util.blockNodes.join(","))>0||e.collapsed&&0===this.editor.editable.selection.startNodes().filter("code").length?(this.inlineMode=!1,this.htmlTag="pre"):(this.inlineMode=!0,this.htmlTag="code")},n.prototype._status=function(){if(this._checkMode(),r.prototype._status.call(this),!this.inlineMode)return this.active?this.popover.show(this.node):this.popover.hide()},n.prototype.decorate=function(t){var e,i,r,o;if((e=t.find("> code")).length>0&&(i=null!=(r=e.attr("class"))&&null!=(o=r.match(/lang-(\S+)/))?o[1]:void 0,e.contents().unwrap(),i))return t.attr("data-lang",i)},n.prototype.undecorate=function(e){var i,r;return r=e.attr("data-lang"),i=t("<code/>"),r&&-1!==r&&i.addClass("lang-"+r),e.wrapInner(i).removeAttr("data-lang")},n.prototype.command=function(){return this.inlineMode?this._inlineCommand():this._blockCommand()},n.prototype._blockCommand=function(){return this.editor.editable.blockCode(this.htmlTag,this.disableTag)},n.prototype._inlineCommand=function(){return this.editor.editable.inlineCode(this.active)},i.Toolbar.addButton(n),n}),t("skylark-widgets-richeditor/buttons/ColorButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button","../i18n"],function(t,e,i,r,o){var n=r.inherit({});return n.prototype.name="color",n.prototype.icon="tint",n.prototype.disableTag="pre",n.prototype.menu=!0,n.prototype.render=function(){var t;return t=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],r.prototype.render.apply(this,t)},n.prototype.renderMenu=function(){return t('<ul class="color-list">\n  <li><a href="javascript:;" class="font-color font-color-1"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-2"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-3"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-4"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-5"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-6"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-7"></a></li>\n  <li><a href="javascript:;" class="font-color font-color-default"></a></li>\n</ul>').appendTo(this.menuWrapper),this.menuWrapper.on("mousedown",".color-list",function(t){return!1}),this.menuWrapper.on("click",".font-color",(e=this,function(i){var r,n,a,s;if(e.wrapper.removeClass("menu-on"),(r=t(i.currentTarget)).hasClass("font-color-default")){if(!((n=e.editor.body.find("p, li")).length>0))return;s=window.getComputedStyle(n[0],null).getPropertyValue("color"),a=e._convertRgbToHex(s)}else s=window.getComputedStyle(r[0],null).getPropertyValue("background-color"),a=e._convertRgbToHex(s);if(a)return e.editor.editable.fontColor(a,r.hasClass("font-color-default"),o.translate("coloredText"))}));var e},n.prototype._convertRgbToHex=function(t){var e;return(e=/rgb\((\d+),\s?(\d+),\s?(\d+)\)/g.exec(t))?function(t,e,i){var r;return"#"+(r=function(t){var e;return 1===(e=t.toString(16)).length?"0"+e:e})(t)+r(e)+r(i)}(1*e[1],1*e[2],1*e[3]):""},i.Toolbar.addButton(n),n}),t("skylark-widgets-richeditor/buttons/EmojiButton",["skylark-langx/langx","skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r,o){var n=o.inherit({});return n.i18n={"zh-CN":{emoji:"表情"},"en-US":{emoji:"emoji"}},n.images=["smile.png","smiley.png","laughing.png","blush.png","heart_eyes.png","smirk.png","flushed.png","grin.png","wink.png","kissing_closed_eyes.png","stuck_out_tongue_winking_eye.png","stuck_out_tongue.png","sleeping.png","worried.png","expressionless.png","sweat_smile.png","cold_sweat.png","joy.png","sob.png","angry.png","mask.png","scream.png","sunglasses.png","heart.png","broken_heart.png","star.png","anger.png","exclamation.png","question.png","zzz.png","thumbsup.png","thumbsdown.png","ok_hand.png","punch.png","v.png","clap.png","muscle.png","pray.png","skull.png","trollface.png"],n.prototype.name="emoji",n.prototype.icon="smile-o",n.prototype.menu=!0,n.prototype._init=function(){o.prototype._init.apply(this),t.merge(this.editor.editable.formatter._allowedAttributes.img,["data-emoji","alt"])},n.prototype.renderMenu=function(){var i,r,o,a,s,l,d,u,h,p,c;for(d='<ul class="emoji-list">\n</ul>',s=t.extend({imagePath:"images/emoji/",images:n.images},this.editor.opts.emoji||{}),o="",r=s.imagePath.replace(/\/$/,"")+"/",p=s.images,u=0,h=p.length;u<h;u++)a=p[u],l=""+r+a,a=a.split(".")[0],o+="<li data-name='"+a+"'><img src='"+l+"' width='20' height='20' alt='"+a+"' /></li>";return(i=e(d)).html(o).appendTo(this.menuWrapper),i.on("mousedown","li",(c=this,function(t){var i;if(c.wrapper.removeClass("menu-on"),c.editor.editable.inputManager.focused)return i=e(t.currentTarget).find("img").clone().attr({"data-emoji":!0,"data-non-image":!0}),c.editor.editable.selection.insertNode(i),c.editor.trigger("valuechanged"),c.editor.trigger("selectionchanged"),!1}))},n.prototype.status=function(){},r.Toolbar.addButton(n),n}),t("skylark-widgets-richeditor/buttons/FontScaleButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button","../i18n"],function(t,e,i,r,o){var n=r.inherit({});return n.prototype.name="fontScale",n.prototype.icon="font",n.prototype.htmlTag="span",n.prototype.disableTag="pre, h1, h2, h3, h4, h5",n.prototype._init=function(){return this.menu=[{name:"150%",text:o.translate("fontScaleXLarge"),param:"5"},{name:"125%",text:o.translate("fontScaleLarge"),param:"4"},{name:"100%",text:o.translate("fontScaleNormal"),param:"3"},{name:"75%",text:o.translate("fontScaleSmall"),param:"2"},{name:"50%",text:o.translate("fontScaleXSmall"),param:"1"}],r.prototype._init.call(this)},n.prototype._activeStatus=function(){var t,e,i,r,o;return this.editor.editable.selection.range(),o=this.editor.editable.selection.startNodes(),i=this.editor.editable.selection.endNodes(),r=o.filter('span[style*="font-size"]'),e=i.filter('span[style*="font-size"]'),t=o.length>0&&i.length>0&&r.is(e),this.setActive(t),this.active},n.prototype.command=function(t){return this.editor.editable.fontScale(t)},i.Toolbar.addButton(n),n}),t("skylark-widgets-richeditor/buttons/FullScreenButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button","../i18n"],function(t,e,i,r,o){var n=r.inherit({name:"fullscreen",needFocus:!1,_init:function(){return r.prototype._init.call(this),this.window=t(window),this.body=t("body"),this.editable=this.editor.body,this.toolbar=this.toolbar.wrapper}});return n.cls="richeditor-fullscreen",n.i18n={"zh-CN":{fullscreen:"全屏"}},n.prototype.iconClassOf=function(){return"icon-fullscreen"},n.prototype.status=function(){return this.setActive(this.body.hasClass(this.constructor.cls))},n.prototype.command=function(){var t,e,i;return this.body.toggleClass(this.constructor.cls),(e=this.body.hasClass(this.constructor.cls))?(t=this.editable.outerHeight()-this.editable.height(),this.window.on("resize.richeditor-fullscreen-"+this.editor.id,(i=this,function(){return i._resize({height:i.window.height()-i.toolbar.outerHeight()-t})})).resize()):(this.window.off("resize.richeditor-fullscreen-"+this.editor.id).resize(),this._resize({height:"auto"})),this.setActive(e)},n.prototype._resize=function(t){return this.editable.height(t.height)},i.Toolbar.addButton(n),n}),t("skylark-widgets-richeditor/buttons/HrButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r){var o=r.inherit({});return o.prototype.name="hr",o.prototype.icon="minus",o.prototype.htmlTag="hr",o.prototype._status=function(){},o.prototype.command=function(){return this.editor.editable.hr()},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/HtmlButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r){var o=r.inherit({});return o.prototype.name="html",o.prototype.icon="html5",o.prototype.needFocus=!1,o.prototype._init=function(){var t;return r.prototype._init.call(this),this.editor.textarea.on("focus",(t=this,function(e){return t.editor.el.addClass("focus").removeClass("error")})),this.editor.textarea.on("blur",function(t){return function(e){return t.editor.el.removeClass("focus"),t.editor.setValue(t.editor.textarea.val())}}(this)),this.editor.textarea.on("input",function(t){return function(e){return t._resizeTextarea()}}(this))},o.prototype.status=function(){},o.prototype.command=function(){var t,e,i,r;for(this.editor.blur(),this.editor.el.toggleClass("richeditor-html"),this.editor.htmlMode=this.editor.el.hasClass("richeditor-html"),this.editor.htmlMode?(this.editor.hidePopover(),this.editor.textarea.val(this.beautifyHTML(this.editor.textarea.val())),this._resizeTextarea()):this.editor.setValue(this.editor.textarea.val()),r=this.editor.toolbar.buttons,e=0,i=r.length;e<i;e++)"html"===(t=r[e]).name?t.setActive(this.editor.htmlMode):t.setDisabled(this.editor.htmlMode);return null},o.prototype.beautifyHTML=function(){return arguments[0]},o.prototype._resizeTextarea=function(){return this._textareaPadding||(this._textareaPadding=this.editor.textarea.innerHeight()-this.editor.textarea.height()),this.editor.textarea.height(this.editor.textarea[0].scrollHeight-this._textareaPadding)},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/ImagePopover",["skylark-langx/langx","skylark-domx-query","../Toolbar","../RichEditor","../Popover"],function(t,e,i,r,o){var n=o.inherit({});return n.prototype.offset={top:6,left:-4},n.prototype.render=function(){var t,i;return t='<div class="link-settings">\n  <div class="settings-field">\n    <label>'+this._t("imageUrl")+'</label>\n    <input class="image-src" type="text" tabindex="1" />\n    <a class="btn-upload" href="javascript:;"\n      title="'+this._t("uploadImage")+'" tabindex="-1">\n      <span class="richeditor-icon richeditor-icon-upload"></span>\n    </a>\n  </div>\n  <div class=\'settings-field\'>\n    <label>'+this._t("imageAlt")+'</label>\n    <input class="image-alt" id="image-alt" type="text" tabindex="1" />\n  </div>\n  <div class="settings-field">\n    <label>'+this._t("imageSize")+'</label>\n    <input class="image-size" id="image-width" type="text" tabindex="2" />\n    <span class="times">×</span>\n    <input class="image-size" id="image-height" type="text" tabindex="3" />\n    <a class="btn-restore" href="javascript:;"\n      title="'+this._t("restoreImageSize")+'" tabindex="-1">\n      <span class="richeditor-icon richeditor-icon-undo"></span>\n    </a>\n  </div>\n</div>',this.el.addClass("image-popover").append(t),this.srcEl=this.el.find(".image-src"),this.widthEl=this.el.find("#image-width"),this.heightEl=this.el.find("#image-height"),this.altEl=this.el.find("#image-alt"),this.srcEl.on("keydown",(i=this,function(t){var e;if(13===t.which&&!i.target.hasClass("uploading"))return t.preventDefault(),e=document.createRange(),i.button.editor.editable.selection.setRangeAfter(i.target,e),i.hide()})),this.srcEl.on("blur",function(t){return function(e){return t._loadImage(t.srcEl.val())}}(this)),this.el.find(".image-size").on("blur",function(t){return function(i){return t._resizeImg(e(i.currentTarget)),t.el.data("popover").refresh()}}(this)),this.el.find(".image-size").on("keyup",function(t){return function(i){var r;if(r=e(i.currentTarget),13!==i.which&&27!==i.which&&9!==i.which)return t._resizeImg(r,!0)}}(this)),this.el.find(".image-size").on("keydown",function(t){return function(i){var r,o,n;return o=e(i.currentTarget),13===i.which||27===i.which?(i.preventDefault(),13===i.which?t._resizeImg(o):t._restoreImg(),r=t.target,t.hide(),n=document.createRange(),t.button.editor.editable.selection.setRangeAfter(r,n)):9===i.which?t.el.data("popover").refresh():void 0}}(this)),this.altEl.on("keydown",function(t){return function(e){var i;if(13===e.which)return e.preventDefault(),i=document.createRange(),t.button.editor.editable.selection.setRangeAfter(t.target,i),t.hide()}}(this)),this.altEl.on("keyup",function(t){return function(e){if(13!==e.which&&27!==e.which&&9!==e.which)return t.alt=t.altEl.val(),t.target.attr("alt",t.alt)}}(this)),this.el.find(".btn-restore").on("click",function(t){return function(e){return t._restoreImg(),t.el.data("popover").refresh()}}(this)),this.editor.on("valuechanged",function(t){return function(e){if(t.active)return t.refresh()}}(this)),this._initUploader()},n.prototype._initUploader=function(){var t,i,r;if(t=this.el.find(".btn-upload"),null!=this.editor.uploader)return r=this,(i=function(){return r.input&&r.input.remove(),r.input=e("<input/>",{type:"file",title:r._t("uploadImage"),multiple:!0,accept:"image/gif,image/jpeg,image/jpg,image/png,image/svg"}).appendTo(t)})(),this.el.on("click mousedown","input[type=file]",function(t){return t.stopPropagation()}),this.el.on("change","input[type=file]",function(t){return function(e){return t.editor.uploader.upload(t.input,{inline:!0,img:t.target}),i()}}(this));t.remove()},n.prototype._resizeImg=function(e,i){var r,o,n;if(null==i&&(i=!1),o=1*e.val(),this.target&&(t.isNumber(o)||o<0))return e.is(this.widthEl)?(n=o,r=this.height*o/this.width,this.heightEl.val(r)):(r=o,n=this.width*o/this.height,this.widthEl.val(n)),i?void 0:(this.target.attr({width:n,height:r}),this.editor.trigger("valuechanged"))},n.prototype._restoreImg=function(){var t,e;return e=(null!=(t=this.target.data("image-size"))?t.split(","):void 0)||[this.width,this.height],this.target.attr({width:1*e[0],height:1*e[1]}),this.widthEl.val(e[0]),this.heightEl.val(e[1]),this.editor.trigger("valuechanged")},n.prototype._loadImage=function(t,e){var i;if(!/^data:image/.test(t)||this.editor.uploader){if(this.target.attr("src")!==t)return this.button.loadImage(this.target,t,(i=this,function(r){var o;if(r)return i.active&&(i.width=r.width,i.height=r.height,i.widthEl.val(i.width),i.heightEl.val(i.height)),/^data:image/.test(t)?((o=i.editor.editable.util.dataURLtoBlob(t)).name="Base64 Image.png",i.editor.uploader.upload(o,{inline:!0,img:i.target})):i.editor.trigger("valuechanged"),e?e(r):void 0}))}else e&&e(!1)},n.prototype.show=function(){var t,e;return e=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],o.prototype.show.apply(this,e),t=this.target,this.width=t.width(),this.height=t.height(),this.alt=t.attr("alt"),t.hasClass("uploading")?this.srcEl.val(this._t("uploading")).prop("disabled",!0):(this.srcEl.val(t.attr("src")).prop("disabled",!1),this.widthEl.val(this.width),this.heightEl.val(this.height),this.altEl.val(this.alt))},n}),t("skylark-widgets-richeditor/buttons/ImageButton",["skylark-langx/langx","skylark-domx-query","../Toolbar","../RichEditor","../Button","./ImagePopover","../i18n"],function(t,e,i,r,o,n,a){var s=o.inherit({});return s.prototype.name="image",s.prototype.icon="picture-o",s.prototype.htmlTag="img",s.prototype.disableTag="pre, table",s.prototype.defaultImage="",s.prototype.needFocus=!1,s.prototype._init=function(){var t,i,r,n,s;if(this.editor.opts.imageButton)if(Array.isArray(this.editor.opts.imageButton))for(this.menu=[],n=this.editor.opts.imageButton,i=0,r=n.length;i<r;i++)t=n[i],this.menu.push({name:t+"-image",text:this._t(t+"Image")});else this.menu=!1;else null!=this.editor.uploader?this.menu=[{name:"upload-image",text:a.translate("uploadImage")},{name:"external-image",text:a.translate("externalImage")}]:this.menu=!1;return this.defaultImage=this.editor.opts.defaultImage,this.editor.body.on("click","img:not([data-non-image])",(s=this,function(t){var i,r;return i=e(t.currentTarget),(r=document.createRange()).selectNode(i[0]),s.editor.editable.selection.range(r),s.editor.editable.util.support.onselectionchange||s.editor.trigger("selectionchanged"),!1})),this.editor.body.on("mouseup","img:not([data-non-image])",function(t){return!1}),this.editor.on("selectionchanged.image",function(t){return function(){var i,r,o;if(null!=(o=t.editor.editable.selection.range()))return 1===(i=e(o.cloneContents()).contents()).length&&i.is("img:not([data-non-image])")?(r=e(o.startContainer).contents().eq(o.startOffset),t.popover.show(r)):t.popover.hide()}}(this)),this.editor.on("valuechanged.image",function(t){return function(){var i;if((i=t.editor.wrapper.find(".richeditor-image-loading")).length>0)return i.each(function(i,r){var o,n,a;if(n=e(r),!((o=n.data("img"))&&o.parent().length>0)&&(n.remove(),o&&(a=o.data("file"))&&(t.editor.uploader.cancel(a),t.editor.body.find("img.uploading").length<1)))return t.editor.uploader.trigger("uploadready",[a])})}}(this)),o.prototype._init.call(this)},s.prototype.render=function(){var t;if(t=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],o.prototype.render.apply(this,t),this.popover=new n({button:this}),"upload"===this.editor.opts.imageButton)return this._initUploader(this.el)},s.prototype.renderMenu=function(){return o.prototype.renderMenu.call(this),this._initUploader()},s.prototype._initUploader=function(i){var r,o,n,a;if(null==i&&(i=this.menuEl.find(".menu-item-upload-image")),null!=this.editor.uploader)return r=null,a=this,(o=function(){return r&&r.remove(),r=e("<input/>",{type:"file",title:a._t("uploadImage"),multiple:!0,accept:"image/gif,image/jpeg,image/jpg,image/png,image/svg"}).appendTo(i)})(),i.on("click mousedown","input[type=file]",function(t){return t.stopPropagation()}),i.on("change","input[type=file]",function(t){return function(e){return t.editor.editable.inputManager.focused?(t.editor.uploader.upload(r,{inline:!0}),o()):(t.editor.one("focus",function(e){return t.editor.uploader.upload(r,{inline:!0}),o()}),t.editor.focus()),t.wrapper.removeClass("menu-on")}}(this)),this.editor.uploader.on("beforeupload",function(t){return function(i,r){var o;if(r.inline)return r.img?o=e(r.img):(o=t.createImage(r.name),r.img=o),o.addClass("uploading"),o.data("file",r),t.editor.uploader.readImageFile(r.obj,function(e){var i;if(o.hasClass("uploading"))return i=e?e.src:t.defaultImage,t.loadImage(o,i,function(){if(t.popover.active)return t.popover.refresh(),t.popover.srcEl.val(t._t("uploading")).prop("disabled",!0)})})}}(this)),n=t.proxy(this.editor.editable.util.throttle(function(t,e,i,r){var o,n,a;if(e.inline&&(n=e.img.data("mask"))){if((o=n.data("img")).hasClass("uploading")&&o.parent().length>0)return(a=(100*(a=i/r)).toFixed(0))>99&&(a=99),n.find(".progress").height(100-a+"%");n.remove()}},500),this),this.editor.uploader.on("uploadprogress",n),this.editor.uploader.on("uploadsuccess",function(t){return function(e,i,r){var o,n,a;if(i.inline&&(o=i.img).hasClass("uploading")&&o.parent().length>0){if("object"!=typeof r)try{r=JSON.parse(r)}catch(t){t,r={success:!1}}return!1===r.success?(a=r.msg||t._t("uploadFailed"),alert(a),n=t.defaultImage):n=r.file_path,t.loadImage(o,n,function(){var e;if(o.removeData("file"),o.removeClass("uploading").removeClass("loading"),(e=o.data("mask"))&&e.remove(),o.removeData("mask"),t.editor.trigger("valuechanged"),t.editor.body.find("img.uploading").length<1)return t.editor.uploader.trigger("uploadready",[i,r])}),t.popover.active?(t.popover.srcEl.prop("disabled",!1),t.popover.srcEl.val(r.file_path)):void 0}}}(this)),this.editor.uploader.on("uploaderror",function(t){return function(e,i,r){var o,n;if(i.inline&&"abort"!==r.statusText){if(r.responseText)try{n=JSON.parse(r.responseText),n.msg}catch(e){e,t._t("uploadError")}if((o=i.img).hasClass("uploading")&&o.parent().length>0)return t.loadImage(o,t.defaultImage,function(){var t;return o.removeData("file"),o.removeClass("uploading").removeClass("loading"),(t=o.data("mask"))&&t.remove(),o.removeData("mask")}),t.popover.active&&(t.popover.srcEl.prop("disabled",!1),t.popover.srcEl.val(t.defaultImage)),t.editor.trigger("valuechanged"),t.editor.body.find("img.uploading").length<1?t.editor.uploader.trigger("uploadready",[i,n]):void 0}}}(this));this.el.find(".btn-upload").remove()},s.prototype._status=function(){return this._disableStatus()},s.prototype.loadImage=function(i,r,o){var n,a,s,l;return l=this,s=function(){var t,e;return t=i.offset(),e=l.editor.wrapper.offset(),n.css({top:t.top-e.top,left:t.left-e.left,width:i.width(),height:i.height()}).show()},i.addClass("loading"),(n=i.data("mask"))||(n=e('<div class="richeditor-image-loading">\n  <div class="progress"></div>\n</div>').hide().appendTo(this.editor.wrapper),s(),i.data("mask",n),n.data("img",i)),(a=new Image).onload=function(e){return function(){var l,d;if(i.hasClass("loading")||i.hasClass("uploading"))return d=a.width,l=a.height,i.attr({src:r,width:d,height:l,"data-image-size":d+","+l}).removeClass("loading"),i.hasClass("uploading")?(e.editor.editable.util.reflow(e.editor.body),s()):(n.remove(),i.removeData("mask")),t.isFunction(o)?o(a):void 0}}(this),a.onerror=function(){return t.isFunction(o)&&o(!1),n.remove(),i.removeData("mask").removeClass("loading")},a.src=r},s.prototype.createImage=function(t){var i,r;return null==t&&(t="Image"),this.editor.editable.inputManager.focused||this.editor.focus(),(r=this.editor.editable.selection.range()).deleteContents(),this.editor.editable.selection.range(r),i=e("<img/>").attr("alt",t),r.insertNode(i[0]),this.editor.editable.selection.setRangeAfter(i,r),this.editor.trigger("valuechanged"),i},s.prototype.command=function(t){var e,i;return e=this.createImage(),this.loadImage(e,t||this.defaultImage,(i=this,function(){return i.editor.trigger("valuechanged"),i.editor.editable.util.reflow(e),e.click(),i.popover.one("popovershow",function(){return i.popover.srcEl.focus(),i.popover.srcEl[0].select()})}))},r.Toolbar.addButton(s),s}),t("skylark-widgets-richeditor/buttons/IndentButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r){var o=r.inherit({});return o.prototype.name="indent",o.prototype.icon="indent",o.prototype._init=function(){var t;return t=!1===this.editor.opts.tabIndent?"":" (Tab)",this.title=this._t(this.name)+t,r.prototype._init.call(this)},o.prototype._status=function(){},o.prototype.command=function(){return this.editor.editable.indent()},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/ItalicButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r){var o=r.inherit({});return o.prototype.name="italic",o.prototype.icon="italic",o.prototype.htmlTag="i",o.prototype.disableTag="pre",o.prototype.shortcut="cmd+i",o.prototype._init=function(){return this.editor.editable.util.os.mac?this.title=this.title+" ( Cmd + i )":(this.title=this.title+" ( Ctrl + i )",this.shortcut="ctrl+i"),r.prototype._init.call(this)},o.prototype._activeStatus=function(){var t;return t=this.editor.editable.isActive("italic"),this.setActive(t),this.active},o.prototype.command=function(){return this.editor.editable.italic()},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/LinkPopover",["skylark-domx-query","../Toolbar","../RichEditor","../Popover"],function(t,e,i,r){var o=r.inherit({});return o.prototype.render=function(){var e,i;return e='<div class="link-settings">\n  <div class="settings-field">\n    <label>'+this._t("linkText")+'</label>\n    <input class="link-text" type="text"/>\n    <a class="btn-unlink" href="javascript:;" title="'+this._t("removeLink")+'"\n      tabindex="-1">\n      <span class="richeditor-icon richeditor-icon-unlink"></span>\n    </a>\n  </div>\n  <div class="settings-field">\n    <label>'+this._t("linkUrl")+'</label>\n    <input class="link-url" type="text"/>\n  </div>\n  <div class="settings-field">\n    <label>'+this._t("linkTarget")+'</label>\n    <select class="link-target">\n      <option value="_blank">'+this._t("openLinkInNewWindow")+' (_blank)</option>\n      <option value="_self">'+this._t("openLinkInCurrentWindow")+" (_self)</option>\n    </select>\n  </div>\n</div>",this.el.addClass("link-popover").append(e),this.textEl=this.el.find(".link-text"),this.urlEl=this.el.find(".link-url"),this.unlinkEl=this.el.find(".btn-unlink"),this.selectTarget=this.el.find(".link-target"),this.textEl.on("keyup",(i=this,function(t){if(13!==t.which)return i.target.text(i.textEl.val()),i.editor.editable.inputManager.throttledValueChanged()})),this.urlEl.on("keyup",function(t){return function(e){var i;if(13!==e.which)return i=t.urlEl.val(),!/^(http|https|ftp|ftps|file)?:\/\/|^(mailto|tel)?:|^\//gi.test(i)&&i&&(i="http://"+i),t.target.attr("href",i),t.editor.editable.inputManager.throttledValueChanged()}}(this)),t([this.urlEl[0],this.textEl[0]]).on("keydown",function(e){return function(i){var r;if(13===i.which||27===i.which||!i.shiftKey&&9===i.which&&t(i.target).hasClass("link-url"))return i.preventDefault(),r=document.createRange(),e.editor.editable.selection.setRangeAfter(e.target,r),e.hide(),e.editor.editable.inputManager.throttledValueChanged()}}(this)),this.unlinkEl.on("click",function(t){return function(e){var i,r;return r=document.createTextNode(t.target.text()),t.target.replaceWith(r),t.hide(),i=document.createRange(),t.editor.editable.selection.setRangeAfter(r,i),t.editor.editable.inputManager.throttledValueChanged()}}(this)),this.selectTarget.on("change",function(t){return function(e){return t.target.attr("target",t.selectTarget.val()),t.editor.editable.inputManager.throttledValueChanged()}}(this))},o.prototype.show=function(){var t;return t=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],r.prototype.show.apply(this,t),this.textEl.val(this.target.text()),this.urlEl.val(this.target.attr("href"))},o}),t("skylark-widgets-richeditor/buttons/LinkButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button","../i18n","./LinkPopover"],function(t,e,i,r,o,n){var a=r.inherit({});return a.prototype.name="link",a.prototype.icon="link",a.prototype.htmlTag="a",a.prototype.disableTag="pre",a.prototype.render=function(){var t;return t=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],r.prototype.render.apply(this,t),this.popover=new n({button:this})},a.prototype._status=function(){return r.prototype._status.call(this),this.active&&!this.editor.editable.selection.rangeAtEndOf(this.node)?this.popover.show(this.node):this.popover.hide()},a.prototype.command=function(){var t;return this.active&&this.popover.one("popovershow",(t=this,function(){return linkText?(t.popover.urlEl.focus(),t.popover.urlEl[0].select()):(t.popover.textEl.focus(),t.popover.textEl[0].select())})),this.editor.editable.link(this.active,o.translate("linkText"))},i.Toolbar.addButton(a),a}),t("skylark-widgets-richeditor/buttons/ListButton",["skylark-utils-dom/noder","skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r,o){var n=o.inherit({});return n.prototype.type="",n.prototype.disableTag="pre, table",n.prototype.command=function(t){return this.editor.editable.list(this.type,t,this.disableTag)},n}),t("skylark-widgets-richeditor/buttons/MarkButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button","../i18n"],function(t,e,i,r,o){var n=r.inherit({name:"mark"});return n.prototype.icon="mark",n.prototype.htmlTag="mark",n.prototype.disableTag="pre, table",n.prototype.command=function(){var e,i,r;return r=this.editor.editable.selection.range(),this.active?(this.editor.editable.selection.save(),this.unmark(r),this.editor.editable.selection.restore(),void this.editor.trigger("valuechanged")):r.collapsed?void 0:(this.editor.editable.selection.save(),i=t(r.startContainer),e=t(r.endContainer),i.closest("mark").length&&r.setStartBefore(i.closest("mark")[0]),e.closest("mark").length&&r.setEndAfter(e.closest("mark")[0]),this.mark(r),this.editor.editable.selection.restore(),this.editor.trigger("valuechanged"),this.editor.editable.util.support.onselectionchange?this.editor.trigger("selectionchanged"):void 0)},n.prototype.mark=function(e){var i,r;return null==e&&(e=this.editor.editable.selection.range()),(i=t(e.extractContents())).find("mark").each(function(e,i){return t(i).replaceWith(t(i).html())}),r=t("<mark>").append(i),e.insertNode(r[0])},n.prototype.unmark=function(e){var i;return null==e&&(e=this.editor.editable.selection.range()),e.collapsed?(i=t(e.commonAncestorContainer)).is("mark")||(i=i.parent()):t(e.startContainer).closest("mark").length?i=t(e.startContainer).closest("mark"):t(e.endContainer).closest("mark").length&&(i=t(e.endContainer).closest("mark")),i.replaceWith(i.html())},i.Toolbar.addButton(n),n}),t("skylark-widgets-richeditor/buttons/OrderListButton",["skylark-domx-query","../Toolbar","../RichEditor","./ListButton"],function(t,e,i,r){var o=r.inherit({});return o.prototype.type="ol",o.prototype.name="ol",o.prototype.icon="list-ol",o.prototype.htmlTag="ol",o.prototype.shortcut="cmd+/",o.prototype._init=function(){return this.editor.editable.util.os.mac?this.title=this.title+" ( Cmd + / )":(this.title=this.title+" ( ctrl + / )",this.shortcut="ctrl+/"),r.prototype._init.call(this)},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/OutdentButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r){var o=r.inherit({});return o.prototype.name="outdent",o.prototype.icon="outdent",o.prototype._init=function(){var t;return t=!1===this.editor.opts.tabIndent?"":" (Shift + Tab)",this.title=this._t(this.name)+t,r.prototype._init.call(this)},o.prototype._status=function(){},o.prototype.command=function(){return this.editor.editable.outdent()},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/StrikethroughButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r){var o=r.inherit({});return o.prototype.name="strikethrough",o.prototype.icon="strikethrough",o.prototype.htmlTag="strike",o.prototype.disableTag="pre",o.prototype._activeStatus=function(){var t;return t=this.editor.editable.isActive("strikethrough"),this.setActive(t),this.active},o.prototype.command=function(){return this.editor.editable.strikethrough()},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/TableButton",["skylark-langx/langx","skylark-domx-tables","skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r,o,n){var a=n.inherit({});return a.prototype.name="table",a.prototype.icon="table",a.prototype.htmlTag="table",a.prototype.disableTag="pre, li, blockquote",a.prototype.menu=!0,a.prototype._init=function(){var e;return n.prototype._init.call(this),t.merge(this.editor.editable.formatter._allowedTags,["thead","th","tbody","tr","td","colgroup","col"]),t.extend(this.editor.editable.formatter._allowedAttributes,{td:["rowspan","colspan"],col:["width"]}),t.extend(this.editor.editable.formatter._allowedStyles,{td:["text-align"],th:["text-align"]}),this._initShortcuts(),this._initResize(),this.editor.on("decorate",(e=this,function(t,r){return r.find("table").each(function(t,r){return e.decorate(i(r))})})),this.editor.on("undecorate",function(t){return function(e,r){return r.find("table").each(function(e,r){return t.undecorate(i(r))})}}(this)),this.editor.on("selectionchanged.table",function(t){return function(e){var i,r;if(t.editor.body.find(".richeditor-table td, .richeditor-table th").removeClass("active"),r=t.editor.editable.selection.range())return i=t.editor.editable.selection.containerNode(),r.collapsed&&i.is(".richeditor-table")&&t.editor.editable.selection.setRangeAtEndOf(i),i.closest("td, th",t.editor.body).addClass("active")}}(this)),this.editor.on("blur.table",function(t){return function(e){return t.editor.body.find(".richeditor-table td, .richeditor-table th").removeClass("active")}}(this)),this.editor.editable.keystroke.add("up","td",function(t){return function(e,i){return t._tdNav(i,"up"),!0}}(this)),this.editor.editable.keystroke.add("up","th",function(t){return function(e,i){return t._tdNav(i,"up"),!0}}(this)),this.editor.editable.keystroke.add("down","td",function(t){return function(e,i){return t._tdNav(i,"down"),!0}}(this)),this.editor.editable.keystroke.add("down","th",function(t){return function(e,i){return t._tdNav(i,"down"),!0}}(this))},a.prototype._tdNav=function(t,e){var i,r,o,n,a;return null==e&&(e="up"),o="up"===e?"prev":"next",(a="up"===e?["tbody","thead"]:["thead","tbody"])[0],a[1],r=t.parent("tr"),!((i=this["_"+o+"Row"](r)).length>0)||(n=r.find("td, th").index(t),this.editor.editable.selection.setRangeAtEndOf(i.find("td, th").eq(n)))},a.prototype._initResize=function(){e.resizable(document,{cssClasses:{resizeHandle:"richeditor-resize-handle",wrapper:"richeditor-table"}})},a.prototype._initShortcuts=function(){var t;return this.editor.editable.hotkeys.add("ctrl+alt+up",(t=this,function(e){return t.editMenu.find(".menu-item[data-param=insertRowAbove]").click(),!1})),this.editor.editable.hotkeys.add("ctrl+alt+down",function(t){return function(e){return t.editMenu.find(".menu-item[data-param=insertRowBelow]").click(),!1}}(this)),this.editor.editable.hotkeys.add("ctrl+alt+left",function(t){return function(e){return t.editMenu.find(".menu-item[data-param=insertColLeft]").click(),!1}}(this)),this.editor.editable.hotkeys.add("ctrl+alt+right",function(t){return function(e){return t.editMenu.find(".menu-item[data-param=insertColRight]").click(),!1}}(this))},a.prototype.renderMenu=function(){var t,e;return i('<div class="menu-create-table">\n</div>\n<div class="menu-edit-table">\n  <ul>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="deleteRow">\n        <span>'+this._t("deleteRow")+'</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="insertRowAbove">\n        <span>'+this._t("insertRowAbove")+' ( Ctrl + Alt + ↑ )</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="insertRowBelow">\n        <span>'+this._t("insertRowBelow")+' ( Ctrl + Alt + ↓ )</span>\n      </a>\n    </li>\n    <li><span class="separator"></span></li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="deleteCol">\n        <span>'+this._t("deleteColumn")+'</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="insertColLeft">\n        <span>'+this._t("insertColumnLeft")+' ( Ctrl + Alt + ← )</span>\n      </a>\n    </li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="insertColRight">\n        <span>'+this._t("insertColumnRight")+' ( Ctrl + Alt + → )</span>\n      </a>\n    </li>\n    <li><span class="separator"></span></li>\n    <li>\n      <a tabindex="-1" unselectable="on" class="menu-item"\n        href="javascript:;" data-param="deleteTable">\n        <span>'+this._t("deleteTable")+"</span>\n      </a>\n    </li>\n  </ul>\n</div>").appendTo(this.menuWrapper),this.createMenu=this.menuWrapper.find(".menu-create-table"),this.editMenu=this.menuWrapper.find(".menu-edit-table"),t=this.createTable(6,6).appendTo(this.createMenu),this.createMenu.on("mouseenter","td, th",(e=this,function(r){var o,n,a,s;return e.createMenu.find("td, th").removeClass("selected"),o=i(r.currentTarget),n=o.parent(),s=n.find("td, th").index(o)+1,a=n.prevAll("tr").addBack(),n.parent().is("tbody")&&(a=a.add(t.find("thead tr"))),a.find("td:lt("+s+"), th:lt("+s+")").addClass("selected")})),this.createMenu.on("mouseleave",function(t){return i(t.currentTarget).find("td, th").removeClass("selected")}),this.createMenu.on("mousedown","td, th",function(e){return function(r){var o,n,a,s,l;if(e.wrapper.removeClass("menu-on"),e.editor.editable.inputManager.focused)return n=i(r.currentTarget),a=n.parent(),s=a.find("td").index(n)+1,l=a.prevAll("tr").length+1,a.parent().is("tbody")&&(l+=1),t=e.createTable(l,s,!0),o=e.editor.editable.selection.blockNodes().last(),e.editor.editable.util.isEmptyNode(o)?o.replaceWith(t):o.after(t),e.decorate(t),e.editor.editable.selection.setRangeAtStartOf(t.find("th:first")),e.editor.trigger("valuechanged"),!1}}(this))},a.prototype.decorate=function(t){return i(e.decorate(t[0],{tableDecorate:"richeditor-table",resizeHandle:"richeditor-resize-handle"}))},a.prototype.undecorate=function(t){return i(e.undecorate(t[0],{tableDecorate:"richeditor-table",resizeHandle:"richeditor-resize-handle"}))},a.prototype.createTable=function(t,r,o){return i(e.createTable(t,r,o?this.editor.editable.util.phBr:null))},a.prototype.refreshTableWidth=function(t){return table.refreshTableWidth(t[0])},a.prototype.setActive=function(t){return n.prototype.setActive.call(this,t),t?(this.createMenu.hide(),this.editMenu.show()):(this.createMenu.show(),this.editMenu.hide())},a.prototype.deleteRow=function(t){var r,o=this;return e.deleteRow(t[0],function(t,e){t&&(r=o.editor.editable.selection.setRangeAtEndOf(i(t).find("td, th").eq(e)))}),r},a.prototype.insertRow=function(t,r){var o,n=this;return e.insertRow(t[0],r,n.editor.editable.util.phBr,function(t,e){o=n.editor.editable.selection.setRangeAtStartOf(i(t).find("td, th").eq(e))}),o},a.prototype.deleteCol=function(t){var r,o=this;return e.deleteCol(t[0],function(t){t&&(r=o.editor.editable.selection.setRangeAtEndOf(i(t)))}),r},a.prototype.insertCol=function(t,r){var o,n=this;return e.insertCol(t[0],r,n.editor.editable.util.phBr,function(t){o=n.editor.editable.selection.setRangeAtStartOf(i(t))}),o},a.prototype.deleteTable=function(t){var i=this;e.deleteTable(t[0],function(t){if(t.length>0)return i.editor.editable.selection.setRangeAtStartOf(t)})},a.prototype.command=function(t){var e;if((e=this.editor.editable.selection.containerNode().closest("td, th")).length>0){if("deleteRow"===t)this.deleteRow(e);else if("insertRowAbove"===t)this.insertRow(e,"before");else if("insertRowBelow"===t)this.insertRow(e);else if("deleteCol"===t)this.deleteCol(e);else if("insertColLeft"===t)this.insertCol(e,"before");else if("insertColRight"===t)this.insertCol(e);else{if("deleteTable"!==t)return;this.deleteTable(e)}return this.editor.trigger("valuechanged")}},o.Toolbar.addButton(a),a}),t("skylark-widgets-richeditor/buttons/TitleButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button","../i18n"],function(t,e,i,r,o){var n=r.inherit({});return n.prototype.name="title",n.prototype.htmlTag="h1, h2, h3, h4, h5",n.prototype.disableTag="pre, table",n.prototype._init=function(){return this.menu=[{name:"normal",text:o.translate("normalText"),param:"p"},"|",{name:"h1",text:o.translate("title")+" 1",param:"h1"},{name:"h2",text:o.translate("title")+" 2",param:"h2"},{name:"h3",text:o.translate("title")+" 3",param:"h3"},{name:"h4",text:o.translate("title")+" 4",param:"h4"},{name:"h5",text:o.translate("title")+" 5",param:"h5"}],r.prototype._init.call(this)},n.prototype.setActive=function(t,e){if(r.prototype.setActive.call(this,t),t&&(e||(e=this.node[0].tagName.toLowerCase())),this.el.removeClass("active-p active-h1 active-h2 active-h3 active-h4 active-h5"),t)return this.el.addClass("active active-"+e)},n.prototype.command=function(t){return this.editor.editable.title(t,this.disableTag)},i.Toolbar.addButton(n),n}),t("skylark-widgets-richeditor/buttons/UnderlineButton",["skylark-domx-query","../Toolbar","../RichEditor","../Button"],function(t,e,i,r){var o=r.inherit({});return o.prototype.name="underline",o.prototype.icon="underline",o.prototype.htmlTag="u",o.prototype.disableTag="pre",o.prototype.shortcut="cmd+u",o.prototype.render=function(){return this.editor.editable.util.os.mac?this.title=this.title+" ( Cmd + u )":(this.title=this.title+" ( Ctrl + u )",this.shortcut="ctrl+u"),r.prototype.render.call(this)},o.prototype._activeStatus=function(){var t;return t=this.editor.editable.isActive("underline"),this.setActive(t),this.active},o.prototype.command=function(){return this.editor.editable.underline()},i.Toolbar.addButton(o),o}),t("skylark-widgets-richeditor/buttons/UnorderListButton",["skylark-domx-query","../Toolbar","../RichEditor","./ListButton"],function(t,e,i,r){var o=r.inherit({});return o.prototype.type="ul",o.prototype.name="ul",o.prototype.icon="list-ul",o.prototype.htmlTag="ul",o.prototype.shortcut="cmd+.",o.prototype._init=function(){return this.editor.editable.util.os.mac?this.title=this.title+" ( Cmd + . )":(this.title=this.title+" ( Ctrl + . )",this.shortcut="ctrl+."),r.prototype._init.call(this)},i.Toolbar.addButton(o),o}),t("skylark-widgets-base/Addon",["./base","skylark-langx/Evented"],function(t,e){var i=e.inherit({_construct:function(t,e){this._widget=t,this._options=e,this._init&&this._init()}});return t.Addon=i}),t("skylark-widgets-richeditor/addons/AutoSave",["skylark-domx-query","skylark-widgets-base/Addon","../Toolbar","../RichEditor","../Button","../i18n"],function(t,e,i,r,o,n){var a=e.inherit({needFocus:!1,_init:function(){var e,i,r,o,n;if((this.editor=this._module,this.opts.autosave)&&(this.name="string"==typeof this.opts.autosave?this.opts.autosave:"simditor",this.opts.autosavePath?this.path=this.opts.autosavePath:(i=t("<a/>",{href:location.href}),r=this.editor.textarea.data("autosave")||this.name,this.path="/"+i[0].pathname.replace(/\/$/g,"").replace(/^\//g,"")+"/autosave/"+r+"/"),this.path&&(this.editor.on("valuechanged",(n=this,function(){return n.storage.set(n.path,n.editor.getValue())})),this.editor.el.closest("form").on("ajax:success.simditor-"+this.editor.id,function(t){return function(e){return t.storage.remove(t.path)}}(this)),(o=this.storage.get(this.path))&&(e=this.editor.textarea.val(),o!==e))))return this.editor.textarea.is("[data-autosave-confirm]")?confirm(this.editor.textarea.data("autosave-confirm")||"Are you sure to restore unsaved changes?")?this.editor.setValue(o):this.storage.remove(this.path):this.editor.setValue(o)}});return a.categoryName="general",a.addonName="autosave",a.prototype.opts={autosave:!0,autosavePath:null},a.prototype.storage={supported:function(){try{return localStorage.setItem("_storageSupported","yes"),localStorage.removeItem("_storageSupported"),!0}catch(t){return t,!1}},set:function(t,e,i){if(null==i&&(i=!1),this.supported())return(i?sessionStorage:localStorage).setItem(t,e)},get:function(t,e){if(null==e&&(e=!1),this.supported())return(e?sessionStorage:localStorage)[t]},remove:function(t,e){if(null==e&&(e=!1),this.supported())return(e?sessionStorage:localStorage).removeItem(t)}},r.addons.general.autoSave=a}),t("skylark-widgets-richeditor/addons/Dropzone",["skylark-domx-query","skylark-widgets-base/Addon","../Toolbar","../RichEditor","../Button","../i18n"],function(t,e,i,r,o,n){var a=e.inherit({});return a.categoryName="genernal",a.addonName="dropzone",a.prototype._entered=0,a.prototype._init=function(){if(this.editor=this._widget,null==this.editor.uploader)throw new Error("Can't work without 'simple-uploader' module");return t(document.body).on("dragover",function(t){return t.originalEvent.dataTransfer.dropEffect="none",t.preventDefault()}),t(document.body).on("drop",function(t){return t.preventDefault()}),this.imageBtn=this.editor.toolbar.findButton("image"),this.editor.body.on("dragover",function(t){return t.originalEvent.dataTransfer.dropEffect="copy",t.stopPropagation(),t.preventDefault()}).on("dragenter",(e=this,function(t){return 1===(e._entered+=1)&&e.show(),t.preventDefault(),t.stopPropagation()})).on("dragleave",function(t){return function(e){return(t._entered-=1)<=0&&t.hide(),e.preventDefault(),e.stopPropagation()}}(this)).on("drop",function(t){return function(e){var i,r,o,n,a,s,l;for(r=[],l=e.originalEvent.dataTransfer.files,o=0,a=l.length;o<a;o++){if(i=l[o],!t.validFile(i))return alert("「"+i.name+"]」文件不是图片。"),t.hide(),!1;r.push(i)}for(n=0,s=r.length;n<s;n++)i=r[n],t.editor.uploader.upload(i,{inline:!0});return t.hide(),e.stopPropagation(),e.preventDefault()}}(this));var e},a.prototype.show=function(){return this.imageBtn.setActive(!0)},a.prototype.hide=function(){return this.imageBtn.setActive(!1),this._entered=0},a.prototype.validFile=function(t){return t.type.indexOf("image/")>-1},r.addons.general.dropzone=a}),t("skylark-widgets-richeditor/main",["./RichEditor","./Button","./Popover","./buttons/AlignmentButton","./buttons/BlockquoteButton","./buttons/BoldButton","./buttons/CodeButton","./buttons/CodePopover","./buttons/ColorButton","./buttons/EmojiButton","./buttons/FontScaleButton","./buttons/FullScreenButton","./buttons/HrButton","./buttons/HtmlButton","./buttons/ImageButton","./buttons/ImagePopover","./buttons/IndentButton","./buttons/ItalicButton","./buttons/LinkButton","./buttons/LinkPopover","./buttons/ListButton","./buttons/MarkButton","./buttons/OrderListButton","./buttons/OutdentButton","./buttons/StrikethroughButton","./buttons/TableButton","./buttons/TitleButton","./buttons/UnderlineButton","./buttons/UnorderListButton","./addons/AutoSave","./addons/Dropzone"],function(t){return t}),t("skylark-widgets-richeditor",["skylark-widgets-richeditor/main"],function(t){return t})}(i),!o){var s=r("skylark-langx/skylark");n?module.exports=s:e.skylarkjs=s}}(0,this);
//# sourceMappingURL=sourcemaps/skylark-widgets-richeditor.js.map
