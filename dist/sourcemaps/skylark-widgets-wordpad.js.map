{"version":3,"sources":["skylark-widgets-wordpad.js"],"names":["define","i18n","zh-CN","blockquote","bold","code","color","coloredText","hr","image","externalImage","uploadImage","uploadFailed","uploadError","imageUrl","imageSize","imageAlt","restoreImageSize","uploading","indent","outdent","italic","link","linkText","linkUrl","linkTarget","openLinkInCurrentWindow","openLinkInNewWindow","removeLink","ol","ul","strikethrough","table","deleteRow","insertRowAbove","insertRowBelow","deleteColumn","insertColumnLeft","insertColumnRight","deleteTable","title","normalText","underline","alignment","alignCenter","alignLeft","alignRight","selectLanguage","fontScale","fontScaleXLarge","fontScaleLarge","fontScaleNormal","fontScaleSmall","fontScaleXSmall","video","videoSize","uploadVideoBtn","videoPlaceholder","en-US","ja","translate","args","key","ref","result","arguments","length","Array","prototype","slice","call","this","locale","replace","p0","p","position","parseInt","shift","langx","$","Widget","ToolButton","inherit","options","template","menu","menuWrapper","menuItem","separator","_construct","opts","action","toolbar","editor","_init","render","_this","el","on","e","noFocus","param","preventDefault","needFocus","editable","inputManager","focused","hasClass","focus","wrapper","toggleClass","siblings","removeClass","is","offset","left","outerWidth","css","right","trigger","data","command","btn","currentTarget","state","updates","undefined","_doActive","value","_doDisabled","active","disabled","iconClassOf","icon","classes","icons","setIcon","find","addClass","text","addToolItem","_elm","attr","name","appendTo","renderMenu","$menuBtnEl","$menuItemEl","k","len","ref1","results","isArray","menuEl","data-param","push","params","execute","get","tooltip","htmlTag","disableTag","_options","shortcut","general","actions","items","_Toolbar","addons","Toolbar","pluginName","_render","buttons","prependTo","findAction","toolItemCtor","addSeparator","toolbarHidden","hide","findButton","button","list","addButton","id","Uploader","Evented","init","files","queue","count","file","splice","inArray","connectionCount","upload","window","originalEvent","returnValue","_t","url","fileKey","generateId","f","i","FileList","makeArray","obj","getFile","extend","_xhrUpload","fileObj","File","Blob","fileName","size","fileSize","ext","split","pop","toLowerCase","formData","v","FormData","append","xhr","processData","contentType","type","headers","X-File-Name","encodeURIComponent","req","ajaxSettings","onprogress","progress","lengthComputable","loaded","total","error","status","err","success","document","complete","responseText","cancel","abort","readImageFile","callback","fileReader","img","isFunction","Image","onload","onerror","FileReader","readAsDataURL","test","src","target","destroy","off","leaveConfirm","skylark","Editable","uploader","Wordpad","html","header","fontColor","mark","listul","listol","fullscreen","emoji","alignJustify","srcNodeRef","placeholder","defaultImage","uploadOpts","_actions","textarea","Error","self","classPrefix","body","toolbarFloat","toolbarFloatOffset","_placeholder","setValue","val","trim","triggerHandler","concat","apply","insertBefore","placeholderEl","blur","insertAfter","children","util","isEmptyNode","indentWidth","show","hidePopover","getValue","constructor","each","popover","closest","selection","clear","removeData","remove","attach","_Action","Action","set","clipboard","pasting","setActive","setDisabled","hotkeys","add","tag","formatter","_allowedTags","_status","_disableStatus","endNodes","startNodes","filter","_activeStatus","endNode","startNode","node","Popover","top","_initLabelWidth","$fields","_labelWidth","field","$field","$label","Math","max","width","$target","refresh","reflow","editorOffset","maxLeft","targetH","targetOffset","outerHeight","height","min","AlignmentAction","_execute","align","BlockquoteAction","BoldAction","os","mac","isActive","CodePopover","lang","_tpl","langs","codeLanguages","selectEl","selected","removeAttr","CodeAction","$el","pre","decorate","undecorate","_checkMode","range","cloneContents","blockNodes","join","collapsed","inlineMode","$pre","$code","match","contents","unwrap","wrapInner","_inlineCommand","_blockCommand","blockCode","inlineCode","ColorAction","EmojiAction","merge","_allowedAttributes","FontScaleAction","FullScrennAction","cls","editablePadding","isFullscreen","_resize","resize","HrAction","HtmlAction","_resizeTextarea","htmlMode","beautifyHTML","_textareaPadding","innerHeight","scrollHeight","ImagePopover","tpl","srcEl","widthEl","heightEl","altEl","which","createRange","setRangeAfter","_loadImage","_resizeImg","inputEl","$img","_restoreImg","alt","_initUploader","$uploadBtn","createInput","input","multiple","accept","stopPropagation","inline","onlySetVal","isNumber","loadImage","blob","dataURLtoBlob","prop","ImageAction","item","imageAction","selectNode","support","onselectionchange","$contents","startContainer","eq","startOffset","$masks","mask","$mask","parent","$uploadItem","$input","uploadProgress","one","createImage","proxy","throttle","percent","toFixed","img_path","msg","JSON","parse","_error","alert","file_path","statusText","positionMask","imgOffset","wrapperOffset","data-image-size","deleteContents","insertNode","click","select","IndentAction","hotkey","tabIndent","ItalicAction","LinkPopover","textEl","urlEl","unlinkEl","selectTarget","throttledValueChanged","shiftKey","txtNode","createTextNode","replaceWith","LinkAction","rangeAtEndOf","noder","ListAction","MarkAction","$end","$start","save","unmark","restore","endContainer","setStartBefore","setEndAfter","$mark","extractContents","index","ele","commonAncestorContainer","OrderListAction","OutdentAction","StrikethroughAction","tables","TableAction","td","col","_allowedStyles","th","_initShortcuts","_initResize","$container","containerNode","setRangeAtEndOf","keystroke","$node","_tdNav","$td","direction","$anotherTr","$tr","resizable","cssClasses","resizeHandle","editMenu","$table","createMenu","createTable","$trs","num","prevAll","addBack","$closestBlock","colNum","rowNum","last","after","setRangeAtStartOf","tableDecorate","row","phBr","refreshTableWidth","ret","newTr","insertRow","deleteCol","newTd","insertCol","$block","TitleAction","tagName","UnderlineAction","UnorderListAction","VideoPopover","_loadVideo","videoData","loadVideo","$video","reUrlYoutube","reUrlVimeo","VideoAction","videoContainerClass","videoPoster","embed","iframe","_insert","$videoWrap","wrap","_create","poster","class","iframeStart","iframeEnd","$video1","style","data-link","data-width","data-height","_remove","AlignmentButton","upperFirst","end","ColorButton","$link","$p","hex","rgb","getComputedStyle","getPropertyValue","_convertRgbToHex","exec","r","g","b","componentToHex","c","toString","rgbToHex","EmojiButton","$list","dir","_i","_len","_ref","imagePath","images","clone","data-emoji","data-non-image","TableButton","TitleButton","base","Addon","widget","_widget","Object","defineProperty","mixin","register","categoryName","addonName","AutoSave","currentVal","_module","autosave","autosavePath","path","href","location","pathname","storage","confirm","supported","localStorage","setItem","removeItem","session","sessionStorage","autoSave","Dropzone","_entered","dataTransfer","dropEffect","imageBtn","imageFiles","_j","_len1","validFile","indexOf","dropzone","main"],"mappings":"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","file":"../skylark-widgets-wordpad.js","sourcesContent":["define('skylark-widgets-wordpad/i18n',[\r\n\r\n],function(){ \r\n\r\n    var i18n =  {\r\n      'zh-CN': {\r\n        'blockquote': '引用',\r\n        'bold': '加粗文字',\r\n        'code': '插入代码',\r\n        'color': '文字颜色',\r\n        'coloredText': '彩色文字',\r\n        'hr': '分隔线',\r\n        'image': '插入图片',\r\n        'externalImage': '外链图片',\r\n        'uploadImage': '上传图片',\r\n        'uploadFailed': '上传失败了',\r\n        'uploadError': '上传出错了',\r\n        'imageUrl': '图片地址',\r\n        'imageSize': '图片尺寸',\r\n        'imageAlt': '图片描述',\r\n        'restoreImageSize': '还原图片尺寸',\r\n        'uploading': '正在上传',\r\n        'indent': '向右缩进',\r\n        'outdent': '向左缩进',\r\n        'italic': '斜体文字',\r\n        'link': '插入链接',\r\n        'linkText': '链接文字',\r\n        'linkUrl': '链接地址',\r\n        'linkTarget': '打开方式',\r\n        'openLinkInCurrentWindow': '在当前窗口中打开',\r\n        'openLinkInNewWindow': '在新窗口中打开',\r\n        'removeLink': '移除链接',\r\n        'ol': '有序列表',\r\n        'ul': '无序列表',\r\n        'strikethrough': '删除线文字',\r\n        'table': '表格',\r\n        'deleteRow': '删除行',\r\n        'insertRowAbove': '在上面插入行',\r\n        'insertRowBelow': '在下面插入行',\r\n        'deleteColumn': '删除列',\r\n        'insertColumnLeft': '在左边插入列',\r\n        'insertColumnRight': '在右边插入列',\r\n        'deleteTable': '删除表格',\r\n        'title': '标题',\r\n        'normalText': '普通文本',\r\n        'underline': '下划线文字',\r\n        'alignment': '水平对齐',\r\n        'alignCenter': '居中',\r\n        'alignLeft': '居左',\r\n        'alignRight': '居右',\r\n        'selectLanguage': '选择程序语言',\r\n        'fontScale': '字体大小',\r\n        'fontScaleXLarge': '超大字体',\r\n        'fontScaleLarge': '大号字体',\r\n        'fontScaleNormal': '正常大小',\r\n        'fontScaleSmall': '小号字体',\r\n        'fontScaleXSmall': '超小字体',\r\n        \"video\": \"视屏\",\r\n        \"videoSize\" : \"尺寸\",\r\n        \"uploadVideoBtn\" : \"插入\",\r\n        \"videoPlaceholder\": \"视频嵌入代码\"\r\n      },\r\n      'en-US': {\r\n        'blockquote': 'Block Quote',\r\n        'bold': 'Bold',\r\n        'code': 'Code',\r\n        'color': 'Text Color',\r\n        'coloredText': 'Colored Text',\r\n        'hr': 'Horizontal Line',\r\n        'image': 'Insert Image',\r\n        'externalImage': 'External Image',\r\n        'uploadImage': 'Upload Image',\r\n        'uploadFailed': 'Upload failed',\r\n        'uploadError': 'Error occurs during upload',\r\n        'imageUrl': 'Url',\r\n        'imageSize': 'Size',\r\n        'imageAlt': 'Alt',\r\n        'restoreImageSize': 'Restore Origin Size',\r\n        'uploading': 'Uploading',\r\n        'indent': 'Indent',\r\n        'outdent': 'Outdent',\r\n        'italic': 'Italic',\r\n        'link': 'Insert Link',\r\n        'linkText': 'Text',\r\n        'linkUrl': 'Url',\r\n        'linkTarget': 'Target',\r\n        'openLinkInCurrentWindow': 'Open link in current window',\r\n        'openLinkInNewWindow': 'Open link in new window',\r\n        'removeLink': 'Remove Link',\r\n        'ol': 'Ordered List',\r\n        'ul': 'Unordered List',\r\n        'strikethrough': 'Strikethrough',\r\n        'table': 'Table',\r\n        'deleteRow': 'Delete Row',\r\n        'insertRowAbove': 'Insert Row Above',\r\n        'insertRowBelow': 'Insert Row Below',\r\n        'deleteColumn': 'Delete Column',\r\n        'insertColumnLeft': 'Insert Column Left',\r\n        'insertColumnRight': 'Insert Column Right',\r\n        'deleteTable': 'Delete Table',\r\n        'title': 'Title',\r\n        'normalText': 'Text',\r\n        'underline': 'Underline',\r\n        'alignment': 'Alignment',\r\n        'alignCenter': 'Align Center',\r\n        'alignLeft': 'Align Left',\r\n        'alignRight': 'Align Right',\r\n        'selectLanguage': 'Select Language',\r\n        'fontScale': 'Font Size',\r\n        'fontScaleXLarge': 'X Large Size',\r\n        'fontScaleLarge': 'Large Size',\r\n        'fontScaleNormal': 'Normal Size',\r\n        'fontScaleSmall': 'Small Size',\r\n        'fontScaleXSmall': 'X Small Size',\r\n        \"video\": \"Video\",\r\n        \"videoSize\" : \"Size\",\r\n        \"uploadVideoBtn\" : \"Insert\",\r\n        \"videoPlaceholder\": \"Video Embed Code\"\r\n      },\r\n\r\n      'ja' : {\r\n        'blockquote': 'ブロック引用文',\r\n        'bold': '太字',\r\n        'code': 'コードを挿入',\r\n        'color': 'フォントの色',\r\n        'coloredText': 'カラー文字',\r\n        'hr': '水平線',\r\n        'image': 'イメージを挿入',\r\n        'externalImage': '外部イメージ',\r\n        'uploadImage': 'イメージファイルをアップロード',\r\n        'uploadFailed': 'アップロードが失敗しまいた',\r\n        'uploadError': 'アップロードエラー',\r\n        'imageUrl': 'イメージのURL',\r\n        'imageSize': 'イメージのサイズ',\r\n        'imageAlt': 'イメージの説明文',\r\n        'restoreImageSize': 'イメージのサイズを元に戻す',\r\n        'uploading': 'アップロード中',\r\n        'indent': 'インデントを増やす',\r\n        'outdent': 'インデントを減らす',\r\n        'italic': '斜体',\r\n        'link': 'リンクを挿入',\r\n        'linkText': 'リンクテキスト',\r\n        'linkUrl': 'リンクURL',\r\n        'linkTarget': 'リンクの表示先を指定',\r\n        'openLinkInCurrentWindow': '同じウィンドウで開く',\r\n        'openLinkInNewWindow': '新規ウインドウで開く',\r\n        'removeLink': 'リンクを削除',\r\n        'ol': '段落番号',\r\n        'ul': '箇条書き',\r\n        'strikethrough': '取消線',\r\n        'table': 'テーブル',\r\n        'deleteRow': '行を削除',\r\n        'insertRowAbove': '上に行を挿入',\r\n        'insertRowBelow': '下に行を挿入',\r\n        'deleteColumn': '列を削除',\r\n        'insertColumnLeft': '左に列を挿入',\r\n        'insertColumnRight': '右に列を挿入',\r\n        'deleteTable': 'テーブルを削除',\r\n        'title': 'タイトル',\r\n        'normalText': '標準',\r\n        'underline': '下線',\r\n        'alignment': '位置',\r\n        'alignCenter': '中央揃え',\r\n        'alignLeft': '左揃え',\r\n        'alignRight': '右揃え',\r\n        'selectLanguage': '言語を選択',\r\n        'fontScale': 'フォントのサイズ',\r\n        'fontScaleXLarge': '超大きいサイズ',\r\n        'fontScaleLarge': '大きいサイズ',\r\n        'fontScaleNormal': '通常サイズ',\r\n        'fontScaleSmall': '小さいサイズ',\r\n        'fontScaleXSmall': '超小さいサイズ',\r\n        \"video\": \"ビデオ\",\r\n        \"videoSize\" : \"サイズ\",\r\n        \"uploadVideoBtn\" : \"挿入\",\r\n        \"videoPlaceholder\": \"ビデオ埋め込みコード\"\r\n      },\r\n\r\n      translate : function() {\r\n        var args, key, ref, result;\r\n        key = arguments[0], args = 2 <= arguments.length ? Array.prototype.slice.call(arguments, 1) : [];\r\n        result = ((ref = i18n[this.locale]) != null ? ref[key] : void 0) || '';\r\n        if (!(args.length > 0)) {\r\n          return result;\r\n        }\r\n        result = result.replace(/([^%]|^)%(?:(\\d+)\\$)?s/g, function(p0, p, position) {\r\n          if (position) {\r\n            return p + args[parseInt(position) - 1];\r\n          } else {\r\n            return p + args.shift();\r\n          }\r\n        });\r\n        return result.replace(/%%s/g, '%s');\r\n      }\r\n\r\n    };\r\n\r\n    return i18n;\r\n});\ndefine('skylark-widgets-wordpad/ToolButton',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-widgets-base/Widget\",\r\n  \"./i18n\"\r\n],function(langx, $, Widget, i18n){ \r\n  var slice = [].slice;\r\n\r\n  var ToolButton = Widget.inherit( {\r\n\r\n    options : {\r\n      template: '<li><a tabindex=\"-1\" unselectable=\"on\" class=\"toolbar-item\" href=\"javascript:;\"><span></span></a></li>',\r\n\r\n      menu : {\r\n        menuWrapper: '<div class=\"toolbar-menu\"></div>',\r\n        menuItem: '<li><a tabindex=\"-1\" unselectable=\"on\" class=\"menu-item\" href=\"javascript:;\"><span></span></a></li>',\r\n        separator: '<li><span class=\"separator\"></span></li>'      \r\n      }\r\n\r\n    },\r\n\r\n    _construct : function(opts) {\r\n      this.action = opts.action;\r\n      this.toolbar = opts.toolbar;\r\n      this.editor = opts.toolbar.editor;\r\n      Widget.prototype._construct.call(this,opts);\r\n    },\r\n\r\n    _init : function() {\r\n      var k, len, ref, tag;\r\n      this.render();\r\n      var _this = this;\r\n      this.el.on('mousedown', function(e) {\r\n          var exceed, noFocus, param;\r\n          e.preventDefault();\r\n          noFocus = _this.needFocus && !_this.editor.editable.inputManager.focused;\r\n          if (_this.el.hasClass('disabled')) {\r\n            return false;\r\n          }\r\n          if (noFocus) {\r\n            _this.editor.focus();\r\n          }\r\n          if (_this.menu) {\r\n            _this.wrapper.toggleClass('menu-on').siblings('li').removeClass('menu-on');\r\n            if (_this.wrapper.is('.menu-on')) {\r\n              exceed = _this.menuWrapper.offset().left + _this.menuWrapper.outerWidth() + 5 - _this.editor.wrapper.offset().left - _this.editor.wrapper.outerWidth();\r\n              if (exceed > 0) {\r\n                _this.menuWrapper.css({\r\n                  'left': 'auto',\r\n                  'right': 0\r\n                });\r\n              }\r\n              _this.trigger('menuexpand');\r\n            }\r\n            return false;\r\n          }\r\n          param = _this.el.data('param');\r\n          _this.command(param);\r\n          return false;\r\n      });\r\n      this.wrapper.on('click', 'a.menu-item', function(e) {\r\n          var btn, noFocus, param;\r\n          e.preventDefault();\r\n          btn = $(e.currentTarget);\r\n          _this.wrapper.removeClass('menu-on');\r\n          noFocus = _this.needFocus && !_this.editor.editable.inputManager.focused;\r\n          if (btn.hasClass('disabled') || noFocus) {\r\n            return false;\r\n          }\r\n          _this.toolbar.wrapper.removeClass('menu-on');\r\n          param = btn.data('param');\r\n          _this.command(param);\r\n          return false;\r\n      });\r\n      this.wrapper.on('mousedown', 'a.menu-item', function(e) {\r\n        return false;\r\n      });\r\n\r\n      this.action.state.on(\"changed\", function(e,args) {\r\n        var updates = args.data;\r\n        if (updates[\"active\"] !== undefined) {\r\n          _this._doActive(updates[\"active\"].value);\r\n        }\r\n\r\n        if (updates[\"disabled\"] !== undefined) {\r\n          _this._doDisabled(updates[\"disabled\"].value);\r\n        }\r\n\r\n      });\r\n    },\r\n\r\n    _doActive : function(value) {\r\n      return this.el.toggleClass('active', this.active);\r\n    },\r\n\r\n    _doDisabled : function(value) {\r\n      return this.el.toggleClass('disabled', this.disabled);\r\n    },\r\n\r\n    iconClassOf : function(icon) {\r\n      if (icon) {\r\n        if (this.editor.options.classes.icons[icon]) {\r\n          return this.editor.options.classes.icons[icon];\r\n        } else {\r\n          return \"wordpad-icon wordpad-icon-\" + icon;\r\n        }\r\n      } else {\r\n        return '';\r\n      }\r\n    },\r\n\r\n    setIcon : function(icon) {\r\n      return this.el.find('span').removeClass().addClass(this.iconClassOf(icon)).text(this.text);\r\n    },\r\n\r\n    render : function() {\r\n\r\n      //this.wrapper = $(this._tpl.item).appendTo(this.toolbar.list);\r\n      this.toolbar.addToolItem(this);\r\n      this.wrapper = $(this._elm);\r\n\r\n      this.el = this.wrapper.find('a.toolbar-item');\r\n      this.el.attr('title', this.title).addClass(\"toolbar-item-\" + this.name).data('button', this);\r\n      this.setIcon(this.icon);\r\n      if (!this.menu) {\r\n        return;\r\n      }\r\n      this.menuWrapper = $(this.options.menu.menuWrapper).appendTo(this.wrapper);\r\n      this.menuWrapper.addClass(\"toolbar-menu-\" + this.name);\r\n      return this.renderMenu();\r\n    },\r\n\r\n    renderMenu : function() {\r\n      var $menuBtnEl, $menuItemEl, k, len, menuItem, ref, ref1, results;\r\n      if (!langx.isArray(this.menu)) {\r\n        return;\r\n      }\r\n      this.menuEl = $('<ul/>').appendTo(this.menuWrapper);\r\n      ref = this.menu;\r\n      results = [];\r\n      for (k = 0, len = ref.length; k < len; k++) {\r\n        menuItem = ref[k];\r\n        if (menuItem === '|') {\r\n          $(this.options.menu.separator).appendTo(this.menuEl);\r\n          continue;\r\n        }\r\n        $menuItemEl = $(this.options.menu.menuItem).appendTo(this.menuEl);\r\n        $menuBtnEl = $menuItemEl.find('a.menu-item').attr({\r\n          'title': (ref1 = menuItem.title) != null ? ref1 : menuItem.text,\r\n          'data-param': menuItem.param\r\n        }).addClass('menu-item-' + menuItem.name);\r\n        if (menuItem.icon) {\r\n          results.push($menuBtnEl.find('span').addClass(this.iconClassOf(menuItem.icon)));\r\n        } else {\r\n          results.push($menuBtnEl.find('span').text(menuItem.text));\r\n        }\r\n      }\r\n      return results;\r\n    },\r\n\r\n    command : function(params) {\r\n      this.action.execute(params);\r\n    },\r\n\r\n    \"name\" : {\r\n      get : function() {\r\n        return this.action.name;\r\n      }\r\n    },\r\n\r\n    \"icon\" : {\r\n      get : function() {\r\n        return this.action.icon;\r\n      }\r\n    },\r\n\r\n    \"title\" : {\r\n      get : function() {\r\n        return this.action.tooltip;\r\n      }\r\n    },\r\n\r\n    \"text\" : {\r\n      get : function() {\r\n        return this.action.text;\r\n      }\r\n    },\r\n\r\n    \"htmlTag\" : {\r\n      get : function() {\r\n        return this.action.htmlTag;\r\n      }\r\n    },\r\n\r\n    \"disableTag\" : {\r\n      get : function() {\r\n        return this.action.disableTag;\r\n      }\r\n    },\r\n\r\n    \"menu\" : {\r\n      get : function() {\r\n        return this.action.menu;\r\n      }\r\n    },\r\n\r\n    \"editable\" : {\r\n      get : function() {\r\n        return this._options.editable;\r\n      }\r\n    },\r\n\r\n    \"active\" : {\r\n      get : function() {\r\n        return this.action.active;\r\n      }\r\n    },\r\n\r\n    \"disabled\" : {\r\n      get : function() {\r\n        return this.action.disabled;\r\n      }\r\n    },\r\n\r\n    \"needFocus\" : {\r\n      get : function() {\r\n        return this.action.needFocus;\r\n      }\r\n    },\r\n\r\n\r\n    \"shortcut\" : {\r\n      get : function() {\r\n        return this.action.shortcut;\r\n      }\r\n    }\r\n\r\n\r\n  }); \r\n\r\n\r\n  return ToolButton;\r\n});\r\n\ndefine('skylark-widgets-wordpad/addons',[],function(){\r\n\treturn {\r\n\t    general : {\r\n\r\n\t    },\r\n\r\n\t    actions : {\r\n\r\n\t    },\r\n\r\n\t    toolbar : {\r\n\t      items : {\r\n\t        \r\n\t      }\r\n\t      \r\n\t    }  \t\t\r\n\t};\r\n});\ndefine('skylark-widgets-wordpad/Toolbar',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"skylark-widgets-swt/Toolbar\",\r\n  \"./ToolButton\",\r\n  \"./addons\"\r\n],function(langx,$,_Toolbar, ToolButton,addons){ \r\n\r\n  var Toolbar = _Toolbar.inherit({\r\n    pluginName : \"lark.Wordpad.toolbar\",\r\n\r\n    _construct : function(editor,opts) {\r\n      this.editor =editor;\r\n      _Toolbar.prototype._construct.call(this,opts);\r\n    },\r\n\r\n    _init : function() {\r\n      _Toolbar.prototype._init.call(this);\r\n      this._render();\r\n    }\r\n\r\n  });\r\n\r\n  Toolbar.prototype._render = function() {\r\n    var k, len, name, ref;\r\n    this.buttons = [];\r\n    //this.wrapper = $(this._tpl.wrapper).prependTo(this.editor.wrapper);\r\n    this.wrapper = $(this._elm).prependTo(this.editor.wrapper);\r\n    ref = this.opts.toolbar;\r\n    for (k = 0, len = ref.length; k < len; k++) {\r\n      name = ref[k];\r\n      if (name === '|') {\r\n        this.addSeparator();\r\n        continue;\r\n      }\r\n\r\n      var action  = this.editor.findAction(name),\r\n          toolItemCtor = addons.toolbar.items[name];\r\n\r\n      if (!toolItemCtor) {\r\n        toolItemCtor = ToolButton;\r\n      }\r\n\r\n      this.buttons.push(new toolItemCtor({\r\n        \"action\" : action,\r\n        \"toolbar\" : this\r\n      }));\r\n    }\r\n    if (this.opts.toolbarHidden) {\r\n      return this.wrapper.hide();\r\n    }\r\n  };\r\n\r\n  Toolbar.prototype.findButton = function(name) {\r\n    var button;\r\n    button = this.list.find('.toolbar-item-' + name).data('button');\r\n    return button != null ? button : null;\r\n  };\r\n\r\n  Toolbar.addButton = function(btn) {\r\n    return this.buttons[btn.prototype.name] = btn;\r\n  };\r\n\r\n  Toolbar.buttons = {};\r\n\r\n  return Toolbar;\r\n\r\n});\ndefine('skylark-widgets-wordpad/uploader',[\n  \"skylark-langx/langx\",\n  \"skylark-domx-query\"\n],function(langx,$){ \n\n  var Uploader = langx.Evented.inherit({\n    init : function() {\n      this.files = [];\n      this.queue = [];\n      this.id = ++Uploader.count;\n      this.on('uploadcomplete', (function(_this) {\n        return function(e, file) {\n          _this.files.splice(langx.inArray(file, _this.files), 1);\n          if (_this.queue.length > 0 && _this.files.length < _this.opts.connectionCount) {\n            return _this.upload(_this.queue.shift());\n          } else {\n            return _this.uploading = false;\n          }\n        };\n      })(this));\n      return $(window).on('beforeunload.uploader-' + this.id, (function(_this) {\n        return function(e) {\n          if (!_this.uploading) {\n            return;\n          }\n          e.originalEvent.returnValue = _this._t('leaveConfirm');\n          return _this._t('leaveConfirm');  \n        };\n      })(this));\n    }\n\n  });\n\n  Uploader.count = 0;\n\n  Uploader.prototype.opts = {\n    url: '',\n    params: null,\n    fileKey: 'upload_file',\n    connectionCount: 3\n  };\n\n\n\n  Uploader.prototype.generateId = (function() {\n    var id;\n    id = 0;\n    return function() {\n      return id += 1;\n    };\n  })();\n\n  Uploader.prototype.upload = function(file, opts) {\n    var f, i, key, len;\n    if (opts == null) {\n      opts = {};\n    }\n    if (file == null) {\n      return;\n    }\n    if (langx.isArray(file) || file instanceof FileList) {\n      for (i = 0, len = file.length; i < len; i++) {\n        f = file[i];\n        this.upload(f, opts);\n      }\n    } else if ($(file).is('input:file')) {\n      key = $(file).attr('name');\n      if (key) {\n        opts.fileKey = key;\n      }\n      this.upload(langx.makeArray($(file)[0].files), opts);\n    } else if (!file.id || !file.obj) {\n      file = this.getFile(file);\n    }\n    if (!(file && file.obj)) {\n      return;\n    }\n    langx.extend(file, opts);\n    if (this.files.length >= this.opts.connectionCount) {\n      this.queue.push(file);\n      return;\n    }\n    if (this.trigger('beforeupload', [file]) === false) {\n      return;\n    }\n    this.files.push(file);\n    this._xhrUpload(file);\n    return this.uploading = true;\n  };\n\n  Uploader.prototype.getFile = function(fileObj) {\n    var name, ref, ref1;\n    if (fileObj instanceof window.File || fileObj instanceof window.Blob) {\n      name = (ref = fileObj.fileName) != null ? ref : fileObj.name;\n    } else {\n      return null;\n    }\n    return {\n      id: this.generateId(),\n      url: this.opts.url,\n      params: this.opts.params,\n      fileKey: this.opts.fileKey,\n      name: name,\n      size: (ref1 = fileObj.fileSize) != null ? ref1 : fileObj.size,\n      ext: name ? name.split('.').pop().toLowerCase() : '',\n      obj: fileObj\n    };\n  };\n\n  Uploader.prototype._xhrUpload = function(file) {\n    var formData, k, ref, v;\n    formData = new FormData();\n    formData.append(file.fileKey, file.obj);\n    formData.append(\"original_filename\", file.name);\n    if (file.params) {\n      ref = file.params;\n      for (k in ref) {\n        v = ref[k];\n        formData.append(k, v);\n      }\n    }\n\n    //TODO\n    return file.xhr = langx.xhr({\n      url: file.url,\n      data: formData,\n      processData: false,\n      contentType: false,\n      type: 'POST',\n      headers: {\n        'X-File-Name': encodeURIComponent(file.name)\n      },\n      xhr: function() {\n        var req;\n        req = $.ajaxSettings.xhr();\n        if (req) {\n          req.upload.onprogress = (function(_this) {\n            return function(e) {\n              return _this.progress(e);\n            };\n          })(this);\n        }\n        return req;\n      },\n      progress: (function(_this) {\n        return function(e) {\n          if (!e.lengthComputable) {\n            return;\n          }\n          return _this.trigger('uploadprogress', [file, e.loaded, e.total]);\n        };\n      })(this),\n      error: (function(_this) {\n        return function(xhr, status, err) {\n          return _this.trigger('uploaderror', [file, xhr, status]);\n        };\n      })(this),\n      success: (function(_this) {\n        return function(result) {\n          _this.trigger('uploadprogress', [file, file.size, file.size]);\n          _this.trigger('uploadsuccess', [file, result]);\n          return $(document).trigger('uploadsuccess', [file, result, _this]);\n        };\n      })(this),\n      complete: (function(_this) {\n        return function(xhr, status) {\n          return _this.trigger('uploadcomplete', [file, xhr.responseText]);\n        };\n      })(this)\n    });\n  };\n\n  Uploader.prototype.cancel = function(file) {\n    var f, i, len, ref;\n    if (!file.id) {\n      ref = this.files;\n      for (i = 0, len = ref.length; i < len; i++) {\n        f = ref[i];\n        if (f.id === file * 1) {\n          file = f;\n          break;\n        }\n      }\n    }\n    this.trigger('uploadcancel', [file]);\n    if (file.xhr) {\n      file.xhr.abort();\n    }\n    return file.xhr = null;\n  };\n\n  Uploader.prototype.readImageFile = function(fileObj, callback) {\n    var fileReader, img;\n    if (!langx.isFunction(callback)) {\n      return;\n    }\n    img = new Image();\n    img.onload = function() {\n      return callback(img);\n    };\n    img.onerror = function() {\n      return callback();\n    };\n    if (window.FileReader && FileReader.prototype.readAsDataURL && /^image/.test(fileObj.type)) {\n      fileReader = new FileReader();\n      fileReader.onload = function(e) {\n        return img.src = e.target.result;\n      };\n      return fileReader.readAsDataURL(fileObj);\n    } else {\n      return callback();\n    }\n  };\n\n  Uploader.prototype.destroy = function() {\n    var file, i, len, ref;\n    this.queue.length = 0;\n    ref = this.files;\n    for (i = 0, len = ref.length; i < len; i++) {\n      file = ref[i];\n      this.cancel(file);\n    }\n    $(window).off('.uploader-' + this.id);\n    return $(document).off('.uploader-' + this.id);\n  };\n\n  Uploader.i18n = {\n    'zh-CN': {\n      leaveConfirm: '正在上传文件，如果离开上传会自动取消'\n    }\n  };\n\n  Uploader.locale = 'zh-CN';\n\n  return  function(opts) {\n    return new Uploader(opts);\n  };\n\n});\n\ndefine('skylark-widgets-wordpad/Wordpad',[\n  \"skylark-langx/skylark\",\n  \"skylark-langx/langx\",\n  \"skylark-domx-query\",\n  \"skylark-domx-contents/Editable\",\n  \"skylark-widgets-base/Widget\",\n  \"./Toolbar\",\n  \"./uploader\",\n  \"./i18n\",\n  \"./addons\"\n\n],function(skylark,langx, $, Editable,Widget,Toolbar,uploader,i18n,addons){ \n\n  var Wordpad = Widget.inherit({\n      options : {\n        classes : {\n          icons : {\n            html : \"fa fa-html5\",\n            \n            header: \"fa fa-header\",\n\n            bold : \"fa fa-bold\",\n            italic : \"fa fa-italic\",\n            underline: \"fa fa-underline\",\n            strikethrough : \"fa fa-strikethrough\",\n            fontScale: \"fa fa-text-height\",\n            fontColor: \"fa fa-font\",\n            mark : \"fa fa-pencil\",\n\n            blockquote: \"fa fa-quote-right\",\n            listul : \"fa fa-list-ul\",\n            listol : \"fa fa-list-ol\",\n            code: \"fa fa-code\",\n            table : \"fa fa-table\",\n\n            fullscreen : \"fa fa-expand\",\n\n            emoji: \"fa fa-smile-o\",\n            link : \"fa fa-link\",\n            image: \"fa fa-picture-o\",\n            video: \"fa fa-video-camera\",\n            hr: \"fa fa-minus\",\n\n            indent: \"fa fa-indent\",\n            outdent: \"fa fa-dedent\",\n            alignLeft: \"fa fa-align-left\",\n            alignCenter: \"fa fa-align-center\",\n            alignRight: \"fa fa-align-right\",\n            alignJustify: \"fa fa-align-justify\",\n\n          }\n        },\n        srcNodeRef: null,\n        placeholder: '',\n        defaultImage: 'images/image.png',\n        params: {},\n        upload: false,\n        template : \"<div class=\\\"wordpad\\\">\\n  <div class=\\\"wordpad-wrapper\\\">\\n    <div class=\\\"wordpad-placeholder\\\"></div>\\n    <div class=\\\"wordpad-body\\\" contenteditable=\\\"true\\\">\\n    </div>\\n  </div>\\n</div>\"\n      },\n\n\n    _init : function() {\n      this._actions = [];\n\n      //this.opts = langx.extend({}, this.opts, opts);\n      this.opts = this.options;\n\n      var e, editor, uploadOpts;\n      this.textarea = $(this.opts.srcNodeRef);\n\n      this.opts.placeholder = this.opts.placeholder || this.textarea.attr('placeholder');\n\n      if (!this.textarea.length) {\n        throw new Error('Wordpad: param textarea is required.');\n        return;\n      }\n\n      editor = this.textarea.data('wordpad');\n      if (editor != null) {\n        editor.destroy();\n      }\n      this.id = ++Wordpad.count;\n      this._render();\n\n\n      var self = this;\n      this.editable = new Editable(this._elm,{\n        classPrefix : \"wordpad-\",\n        textarea : this.textarea,\n        body : this.body\n      });\n\n      // TODO\n      this.editable.on(\"all\",function(e,data){\n        return self.trigger(e.type,data);\n      });\n\n      if (this.opts.upload && uploader) {\n        uploadOpts = typeof this.opts.upload === 'object' ? this.opts.upload : {};\n        this.uploader = uploader(uploadOpts);\n      }\n\n      this.toolbar = new Toolbar(this,{\n        toolbar: this.opts.toolbar,\n        toolbarFloat:  this.opts.toolbarFloat,\n        toolbarHidden:  this.opts.toolbarHidden,\n        toolbarFloatOffset:  this.opts.toolbarFloatOffset\n\n      });\n\n      if (this.opts.placeholder) {\n        this.on('valuechanged', function() {\n          return self._placeholder();\n        });\n      }\n      this.setValue(this.textarea.val().trim() || '');\n      if (this.textarea.attr('autofocus')) {\n        return self.focus();\n      }\n\n\n    }\n  });\n\n  Wordpad.prototype.triggerHandler =  Wordpad.prototype.trigger = function(type,data) {\n    var args, ref;\n    args = [type];\n    if (data) {\n      args = args.concat(data);\n    }\n    langx.Evented.prototype.trigger.apply(this, args);\n    return this;\n  };\n\n\n  //Wordpad.connect(Util);\n\n  //Wordpad.connect(InputManager);\n\n  //Wordpad.connect(Selection);\n\n  //Wordpad.connect(UndoManager);\n\n  //Wordpad.connect(Keystroke);\n\n  //Wordpad.connect(Formatter);\n\n  //Wordpad.connect(Toolbar);\n\n  //Wordpad.connect(Indentation);\n\n  //Wordpad.connect(Clipboard);\n\n  Wordpad.count = 0;\n\n\n  Wordpad.prototype._render = function() {\n    var key, ref, results, val;\n\n    //this.el = $(this._tpl).insertBefore(this.textarea);\n    this.el = $(this._elm).insertBefore (this.textarea);\n\n    this.wrapper = this.el.find('.wordpad-wrapper');\n    this.body = this.wrapper.find('.wordpad-body');\n    this.placeholderEl = this.wrapper.find('.wordpad-placeholder').append(this.opts.placeholder);\n    this.el.data('wordpad', this);\n    this.wrapper.append(this.textarea);\n    this.textarea.data('wordpad', this).blur();\n    this.body.attr('tabindex', this.textarea.attr('tabindex'));\n\n    if (this.opts.params) {\n      ref = this.opts.params;\n      results = [];\n      for (key in ref) {\n        val = ref[key];\n        results.push($('<input/>', {\n          type: 'hidden',\n          name: key,\n          value: val\n        }).insertAfter(this.textarea));\n      }\n      return results;\n    }\n  };\n\n  Wordpad.prototype._placeholder = function() {\n    var children;\n    children = this.body.children();\n    if (children.length === 0 || (children.length === 1 && this.util.isEmptyNode(children) && parseInt(children.css('margin-left') || 0) < this.opts.indentWidth)) {\n      return this.placeholderEl.show();\n    } else {\n      return this.placeholderEl.hide();\n    }\n  };\n\n  Wordpad.prototype.setValue = function(val) {\n    this.hidePopover();\n\n    this.editable.setValue(val);\n\n    return this.trigger('valuechanged');\n  };\n\n  Wordpad.prototype.getValue = function() {\n    return this.editable.getValue();\n  };\n\n  Wordpad.prototype.focus = function() {\n    return this.editable.focus();\n  };\n\n  Wordpad.prototype.blur = function() {\n    return this.editable.blur();\n  };\n\n  Wordpad.prototype.findAction = function(name) {\n    if (!this._actions[name]) {\n      if (!this.constructor.addons.actions[name]) {\n        throw new Error(\"Wordpad: invalid action \" + name);\n      }\n\n      this._actions[name] = new this.constructor.addons.actions[name]({\n        editor: this\n      });\n\n    }\n\n    return this._actions[name];\n  };\n\n  Wordpad.prototype.hidePopover = function() {\n    return this.el.find('.wordpad-popover').each(function(i, popover) {\n      popover = $(popover).data('popover');\n      if (popover.active) {\n        return popover.hide();\n      }\n    });\n  };\n\n  Wordpad.prototype.destroy = function() {\n    this.trigger('destroy');\n    this.textarea.closest('form').off('.Wordpad .wordpad-' + this.id);\n    this.selection.clear();\n    this.inputManager.focused = false;\n    this.textarea.insertBefore(this.el).hide().val('').removeData('wordpad');\n    this.el.remove();\n    $(document).off('.wordpad-' + this.id);\n    $(window).off('.wordpad-' + this.id);\n    return this.off();\n  };\n\n\n  Wordpad.Toolbar = Toolbar;\n\n  Wordpad.i18n = i18n;\n\n  Wordpad.addons = addons;\n\n\n  return skylark.attach(\"widgets.Wordpad\",Wordpad);\n\n});\n\ndefine('skylark-widgets-wordpad/Action',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-widgets-base/Action\",\r\n  \"./Wordpad\",\r\n  \"./i18n\"\r\n],function(langx, _Action, Wordpad,i18n){ \r\n  var slice = [].slice;\r\n\r\n  var Action = _Action.inherit( {\r\n    htmlTag : '',\r\n\r\n    disableTag : '',\r\n\r\n    menu : false,\r\n\r\n    active : {\r\n      get : function() {\r\n        return this.state.get(\"active\");\r\n      },\r\n\r\n      set : function(value) {\r\n        return this.state.set(\"active\",value);\r\n\r\n      }\r\n\r\n    },\r\n\r\n    disabled : {\r\n      get : function() {\r\n        return this.state.get(\"disabled\");\r\n      },\r\n\r\n      set : function(value) {\r\n        return this.state.set(\"disabled\",value);\r\n\r\n      }\r\n    },\r\n\r\n    needFocus : true,\r\n\r\n    _construct  : function(opts) {\r\n      _Action.prototype._construct.apply(this,arguments);\r\n      //this.toolbar = opts.toolbar;\r\n      //this.editor = this.toolbar.editor;\r\n      this.title = i18n.translate(this.name);\r\n\r\n      var _this = this;\r\n\r\n      this.editor.on('blur', function() {\r\n        var editorActive;\r\n        editorActive = _this.editor.body.is(':visible') && _this.editor.body.is('[contenteditable]');\r\n        if (!(editorActive && !_this.editor.editable.clipboard.pasting)) {\r\n          return;\r\n        }\r\n        _this.setActive(false);\r\n        return _this.setDisabled(false);\r\n      });\r\n\r\n      if (this.shortcut != null) {\r\n        this.editor.editable.hotkeys.add(this.shortcut, function(e) {\r\n          //_this.el.mousedown();\r\n          _this.execute();\r\n          return false;\r\n        });\r\n      }\r\n\r\n      var ref = this.htmlTag.split(',');\r\n      for (k = 0, len = ref.length; k < len; k++) {\r\n        tag = ref[k];\r\n        tag = langx.trim(tag);\r\n        if (tag && langx.inArray(tag, this.editor.editable.formatter._allowedTags) < 0) {\r\n          this.editor.editable.formatter._allowedTags.push(tag);\r\n        }\r\n      }\r\n      this.editor.on('selectionchanged', function(e) {\r\n        if (_this.editor.editable.inputManager.focused) {\r\n          return _this._status();\r\n        }\r\n      });\r\n\r\n      this._init();\r\n    },\r\n\r\n    _init : function() {\r\n\r\n\r\n    },\r\n\r\n    _disableStatus : function() {\r\n      var disabled, endNodes, startNodes;\r\n      startNodes = this.editor.editable.selection.startNodes();\r\n      endNodes = this.editor.editable.selection.endNodes();\r\n      disabled = startNodes.filter(this.disableTag).length > 0 || endNodes.filter(this.disableTag).length > 0;\r\n      this.setDisabled(disabled);\r\n      if (this.disabled) {\r\n        this.setActive(false);\r\n      }\r\n      return this.disabled;\r\n    },\r\n\r\n    _activeStatus : function() {\r\n      var active, endNode, endNodes, startNode, startNodes;\r\n      startNodes = this.editor.editable.selection.startNodes();\r\n      endNodes = this.editor.editable.selection.endNodes();\r\n      startNode = startNodes.filter(this.htmlTag);\r\n      endNode = endNodes.filter(this.htmlTag);\r\n      active = startNode.length > 0 && endNode.length > 0 && startNode.is(endNode);\r\n      this.node = active ? startNode : null;\r\n      this.setActive(active);\r\n      return this.active;\r\n    },\r\n\r\n    _status : function() {\r\n      this._disableStatus();\r\n      if (this.disabled) {\r\n        return;\r\n      }\r\n      return this._activeStatus();\r\n    },\r\n\r\n    setActive : function(active) {\r\n      if (active === this.active) {\r\n        return;\r\n      }\r\n      this.active = active;\r\n    },\r\n\r\n    setDisabled : function(disabled) {\r\n      if (disabled === this.disabled) {\r\n        return;\r\n      }\r\n      this.disabled = disabled;\r\n    }\r\n  }); \r\n\r\n\r\n  Action.prototype._t = i18n.translate;\r\n\r\n\r\n  return Action;\r\n\r\n});\ndefine('skylark-widgets-wordpad/Popover',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"./Wordpad\",\r\n  \"./i18n\"\r\n],function(langx,$,Wordpad,i18n){ \r\n\r\n  var Popover = langx.Evented.inherit({\r\n     init : function(opts) {\r\n      this.action = opts.action;\r\n      this.editor = opts.action.editor;\r\n      this._init();\r\n    }\r\n  });\r\n\r\n\r\n  Popover.prototype.offset = {\r\n    top: 4,\r\n    left: 0\r\n  };\r\n\r\n  Popover.prototype.target = null;\r\n\r\n  Popover.prototype.active = false;\r\n\r\n  Popover.prototype._init = function() {\r\n    this.el = $('<div class=\"wordpad-popover\"></div>').appendTo(this.editor.el).data('popover', this);\r\n    this.render();\r\n    this.el.on('mouseenter', (function(_this) {\r\n      return function(e) {\r\n        return _this.el.addClass('hover');\r\n      };\r\n    })(this));\r\n    return this.el.on('mouseleave', (function(_this) {\r\n      return function(e) {\r\n        return _this.el.removeClass('hover');\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  Popover.prototype.render = function() {};\r\n\r\n  Popover.prototype._initLabelWidth = function() {\r\n    var $fields;\r\n    $fields = this.el.find('.settings-field');\r\n    if (!($fields.length > 0)) {\r\n      return;\r\n    }\r\n    this._labelWidth = 0;\r\n    $fields.each((function(_this) {\r\n      return function(i, field) {\r\n        var $field, $label;\r\n        $field = $(field);\r\n        $label = $field.find('label');\r\n        if (!($label.length > 0)) {\r\n          return;\r\n        }\r\n        return _this._labelWidth = Math.max(_this._labelWidth, $label.width());\r\n      };\r\n    })(this));\r\n    return $fields.find('label').width(this._labelWidth);\r\n  };\r\n\r\n  Popover.prototype.show = function($target, position) {\r\n    if (position == null) {\r\n      position = 'bottom';\r\n    }\r\n    if ($target == null) {\r\n      return;\r\n    }\r\n    this.el.siblings('.wordpad-popover').each(function(i, popover) {\r\n      popover = $(popover).data('popover');\r\n      if (popover.active) {\r\n        return popover.hide();\r\n      }\r\n    });\r\n    if (this.active && this.target) {\r\n      this.target.removeClass('selected');\r\n    }\r\n    this.target = $target.addClass('selected');\r\n    if (this.active) {\r\n      this.refresh(position);\r\n      return this.trigger('popovershow');\r\n    } else {\r\n      this.active = true;\r\n      this.el.css({\r\n        left: -9999\r\n      }).show();\r\n      if (!this._labelWidth) {\r\n        this._initLabelWidth();\r\n      }\r\n      this.editor.editable.util.reflow();\r\n      this.refresh(position);\r\n      return this.trigger('popovershow');\r\n    }\r\n  };\r\n\r\n  Popover.prototype.hide = function() {\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    if (this.target) {\r\n      this.target.removeClass('selected');\r\n    }\r\n    this.target = null;\r\n    this.active = false;\r\n    this.el.hide();\r\n    return this.trigger('popoverhide');\r\n  };\r\n\r\n  Popover.prototype.refresh = function(position) {\r\n    var editorOffset, left, maxLeft, targetH, targetOffset, top;\r\n    if (position == null) {\r\n      position = 'bottom';\r\n    }\r\n    if (!this.active) {\r\n      return;\r\n    }\r\n    editorOffset = this.editor.el.offset();\r\n    targetOffset = this.target.offset();\r\n    targetH = this.target.outerHeight();\r\n    if (position === 'bottom') {\r\n      top = targetOffset.top - editorOffset.top + targetH;\r\n    } else if (position === 'top') {\r\n      top = targetOffset.top - editorOffset.top - this.el.height();\r\n    }\r\n    maxLeft = this.editor.wrapper.width() - this.el.outerWidth() - 10;\r\n    left = Math.min(targetOffset.left - editorOffset.left, maxLeft);\r\n    return this.el.css({\r\n      top: top + this.offset.top,\r\n      left: left + this.offset.left\r\n    });\r\n  };\r\n\r\n  Popover.prototype.destroy = function() {\r\n    this.target = null;\r\n    this.active = false;\r\n    this.editor.off('.linkpopover');\r\n    return this.el.remove();\r\n  };\r\n\r\n  Popover.prototype._t = function(name) {\r\n    var args, ref, result;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    result = i18n.translate.apply(i18n, args);\r\n    return result;\r\n  };\r\n\r\n  Wordpad.Popover = Popover;\r\n\r\n  return Popover;\r\n\r\n\t\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/AlignmentAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"../../i18n\"\r\n],function($,addons,Action,i18n){ \r\n  var AlignmentAction = Action.inherit({\r\n    name : \"alignment\",\r\n\r\n    icon : 'alignLeft',\r\n    \r\n    htmlTag : 'p, h1, h2, h3, h4, td, th',\r\n\r\n    _init : function() {\r\n     Action.prototype._init.call(this);\r\n     this.menu = [\r\n          {\r\n            name: 'left',\r\n            text: i18n.translate('alignLeft'),\r\n            icon: 'alignLeft',\r\n            param: 'left'\r\n          }, {\r\n            name: 'center',\r\n            text: i18n.translate('alignCenter'),\r\n            icon: 'alignCenter',\r\n            param: 'center'\r\n          }, {\r\n            name: 'right',\r\n            text: i18n.translate('alignRight'),\r\n            icon: 'alignRight',\r\n            param: 'right'\r\n          }\r\n      ] ;    \r\n    },\r\n\r\n\r\n    _execute : function(align) {\r\n      return this.editor.editable.alignment(align,this.htmlTag);\r\n    },\r\n\r\n    setActive : function(align) {\r\n      if (align == null) {\r\n        align = 'left';\r\n      }\r\n      if (align !== 'left' && align !== 'center' && align !== 'right') {\r\n        align = 'left';\r\n      }\r\n      Action.prototype.setActive.call(this, align);\r\n   },\r\n\r\n    _status : function() {\r\n      var value = this.editor.editable.status(\"alignment\",this.htmlTag);\r\n      if (value) {\r\n        this.setDisabled(false);\r\n        return this.setActive(value);\r\n      } else {\r\n        this.setDisabled(true);\r\n        return this.setActive(\"left\");\r\n      }    \r\n    }\r\n  });\r\n \r\n  return addons.actions.alignment = AlignmentAction;\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/BlockquoteAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function($,addons,Action){ \r\n   var BlockquoteAction = Action.inherit({\r\n      name : 'blockquote',\r\n\r\n      icon : 'blockquote',\r\n\r\n      htmlTag : 'blockquote',\r\n\r\n      disableTag : 'pre, table',\r\n\r\n      _execute : function() {\r\n        return this.editor.editable.blockquote(this.htmlTag,this.disableTag);\r\n      }\r\n   });\r\n\r\n\r\n   addons.actions.blockquote = BlockquoteAction; \r\n\r\n   return BlockquoteAction;\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/BoldAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function($,addons,Action){ \r\n  \r\n    var BoldAction = Action.inherit({\r\n      name : 'bold',\r\n\r\n      icon : 'bold',\r\n\r\n      htmlTag : 'b, strong',\r\n\r\n      disableTag : 'pre',\r\n\r\n      shortcut : 'cmd+b',\r\n\r\n      _init : function() {\r\n        if (this.editor.editable.util.os.mac) {\r\n          this.title = this.title + ' ( Cmd + b )';\r\n        } else {\r\n          this.title = this.title + ' ( Ctrl + b )';\r\n          this.shortcut = 'ctrl+b';\r\n        }\r\n        return Action.prototype._init.call(this);\r\n      },\r\n\r\n      _activeStatus : function() {\r\n        var active;\r\n        active = this.editor.editable.isActive('bold');\r\n        this.setActive(active);\r\n        return this.active;\r\n      },\r\n\r\n      _execute : function() {\r\n        return this.editor.editable.bold();\r\n      }\r\n\r\n    });\r\n\r\n\r\n    addons.actions.bold = BoldAction; \r\n\r\n    return BoldAction;\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/CodePopover',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Popover\"\r\n],function($,addons,Popover){ \r\n  \r\n   var CodePopover = Popover.inherit({\r\n     render : function() {\r\n      var $option, k, lang, len, ref;\r\n      this._tpl = \"<div class=\\\"code-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <select class=\\\"select-lang\\\">\\n      <option value=\\\"-1\\\">\" + (this._t('selectLanguage')) + \"</option>\\n    </select>\\n  </div>\\n</div>\";\r\n      this.langs = this.editor.opts.codeLanguages || [\r\n        {\r\n          name: 'Bash',\r\n          value: 'bash'\r\n        }, {\r\n          name: 'C++',\r\n          value: 'c++'\r\n        }, {\r\n          name: 'C#',\r\n          value: 'cs'\r\n        }, {\r\n          name: 'CSS',\r\n          value: 'css'\r\n        }, {\r\n          name: 'Erlang',\r\n          value: 'erlang'\r\n        }, {\r\n          name: 'Less',\r\n          value: 'less'\r\n        }, {\r\n          name: 'Sass',\r\n          value: 'sass'\r\n        }, {\r\n          name: 'Diff',\r\n          value: 'diff'\r\n        }, {\r\n          name: 'CoffeeScript',\r\n          value: 'coffeescript'\r\n        }, {\r\n          name: 'HTML,XML',\r\n          value: 'html'\r\n        }, {\r\n          name: 'JSON',\r\n          value: 'json'\r\n        }, {\r\n          name: 'Java',\r\n          value: 'java'\r\n        }, {\r\n          name: 'JavaScript',\r\n          value: 'js'\r\n        }, {\r\n          name: 'Markdown',\r\n          value: 'markdown'\r\n        }, {\r\n          name: 'Objective C',\r\n          value: 'oc'\r\n        }, {\r\n          name: 'PHP',\r\n          value: 'php'\r\n        }, {\r\n          name: 'Perl',\r\n          value: 'parl'\r\n        }, {\r\n          name: 'Python',\r\n          value: 'python'\r\n        }, {\r\n          name: 'Ruby',\r\n          value: 'ruby'\r\n        }, {\r\n          name: 'SQL',\r\n          value: 'sql'\r\n        }\r\n      ];\r\n      this.el.addClass('code-popover').append(this._tpl);\r\n      this.selectEl = this.el.find('.select-lang');\r\n      ref = this.langs;\r\n      for (k = 0, len = ref.length; k < len; k++) {\r\n        lang = ref[k];\r\n        $option = $('<option/>', {\r\n          text: lang.name,\r\n          value: lang.value\r\n        }).appendTo(this.selectEl);\r\n      }\r\n      this.selectEl.on('change', (function(_this) {\r\n        return function(e) {\r\n          var selected;\r\n          _this.lang = _this.selectEl.val();\r\n          selected = _this.target.hasClass('selected');\r\n          _this.target.removeClass().removeAttr('data-lang');\r\n          if (_this.lang !== -1) {\r\n            _this.target.attr('data-lang', _this.lang);\r\n          }\r\n          if (selected) {\r\n            _this.target.addClass('selected');\r\n          }\r\n          return _this.editor.trigger('valuechanged');\r\n        };\r\n      })(this));\r\n      return this.editor.on('valuechanged', (function(_this) {\r\n        return function(e) {\r\n          if (_this.active) {\r\n            return _this.refresh();\r\n          }\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    show : function() {\r\n      var args;\r\n      args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n      Popover.prototype.show.apply(this, args);\r\n      this.lang = this.target.attr('data-lang');\r\n      if (this.lang != null) {\r\n        return this.selectEl.val(this.lang);\r\n      } else {\r\n        return this.selectEl.val(-1);\r\n      }\r\n    }\r\n   });\r\n\r\n  return CodePopover;\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/CodeAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"./CodePopover\"\r\n],function($,addons,Action,CodePopover){ \r\n  \r\n\r\n   var CodeAction = Action.inherit({\r\n      name : 'code',\r\n\r\n      icon : 'code',\r\n\r\n      htmlTag : 'pre',\r\n\r\n      disableTag : 'ul, ol, table',\r\n\r\n      _init : function() {\r\n        Action.prototype._init.call(this);\r\n        this.editor.on('decorate', (function(_this) {\r\n          return function(e, $el) {\r\n            return $el.find('pre').each(function(i, pre) {\r\n              return _this.decorate($(pre));\r\n            });\r\n          };\r\n        })(this));\r\n        return this.editor.on('undecorate', (function(_this) {\r\n          return function(e, $el) {\r\n            return $el.find('pre').each(function(i, pre) {\r\n              return _this.undecorate($(pre));\r\n            });\r\n          };\r\n        })(this));\r\n      },\r\n\r\n      _checkMode : function() {\r\n        var $blockNodes, range;\r\n        range = this.editor.editable.selection.range();\r\n        if (($blockNodes = $(range.cloneContents()).find(this.editor.editable.util.blockNodes.join(','))) > 0 || (range.collapsed && this.editor.editable.selection.startNodes().filter('code').length === 0)) {\r\n          this.inlineMode = false;\r\n          return this.htmlTag = 'pre';\r\n        } else {\r\n          this.inlineMode = true;\r\n          return this.htmlTag = 'code';\r\n        }\r\n      },\r\n\r\n      _status : function() {\r\n        this._checkMode();\r\n        Action.prototype._status.call(this);\r\n        if (this.inlineMode) {\r\n          return;\r\n        }\r\n        if (this.active) {\r\n          if (!this.popover) {\r\n            this.popover = new CodePopover({\r\n              action: this\r\n            });\r\n          }\r\n          return this.popover.show(this.node);\r\n        } else {\r\n          if (this.popover) {\r\n            return this.popover.hide();\r\n          }\r\n        }\r\n      },\r\n\r\n      decorate : function($pre) {\r\n        var $code, lang, ref, ref1;\r\n        $code = $pre.find('> code');\r\n        if ($code.length > 0) {\r\n          lang = (ref = $code.attr('class')) != null ? (ref1 = ref.match(/lang-(\\S+)/)) != null ? ref1[1] : void 0 : void 0;\r\n          $code.contents().unwrap();\r\n          if (lang) {\r\n            return $pre.attr('data-lang', lang);\r\n          }\r\n        }\r\n      },\r\n\r\n      undecorate : function($pre) {\r\n        var $code, lang;\r\n        lang = $pre.attr('data-lang');\r\n        $code = $('<code/>');\r\n        if (lang && lang !== -1) {\r\n          $code.addClass('lang-' + lang);\r\n        }\r\n        return $pre.wrapInner($code).removeAttr('data-lang');\r\n      },\r\n\r\n      _execute : function() {\r\n        if (this.inlineMode) {\r\n          return this._inlineCommand();\r\n        } else {\r\n          return this._blockCommand();\r\n        }\r\n      },\r\n\r\n      _blockCommand : function() {\r\n        return this.editor.editable.blockCode(this.htmlTag,this.disableTag);\r\n      },\r\n\r\n      _inlineCommand : function() {\r\n        return this.editor.editable.inlineCode(this.active);\r\n      }\r\n   });\r\n\r\n\r\n   addons.actions.code = CodeAction; \r\n\r\n   return CodeAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/ColorAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"../../i18n\"\r\n],function($,addons,Action,i18n){ \r\n  \r\n\r\n   var ColorAction = Action.inherit({\r\n    name : 'color',\r\n\r\n    icon : 'fontColor',\r\n\r\n    disableTag : 'pre',\r\n\r\n    menu : true\r\n\r\n   });\r\n\r\n   addons.actions.color = ColorAction; \r\n\r\n\r\n   return ColorAction;\r\n\t\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/EmojiAction',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function(langx,$,addons,Action){ \r\n  var EmojiAction = Action.inherit({\r\n    name : 'emoji',\r\n\r\n    icon : 'emoji',\r\n\r\n    menu : true,\r\n\r\n    _init : function() {\r\n      Action.prototype._init.apply(this);\r\n      langx.merge(this.editor.editable.formatter._allowedAttributes['img'], ['data-emoji', 'alt']);\r\n    }\r\n\r\n  });\r\n\r\n\r\n  addons.actions.emoji = EmojiAction; \r\n\r\n  return EmojiAction;\r\n\t\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/FontScaleAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"../../i18n\"\r\n],function($,addons,Action,i18n){ \r\n  \r\n  var FontScaleAction = Action.inherit({\r\n    name : 'fontScale',\r\n\r\n    icon : 'fontScale',\r\n\r\n    htmlTag : 'span',\r\n\r\n    disableTag : 'pre, h1, h2, h3, h4, h5',\r\n\r\n\r\n    _init : function() {\r\n      this.menu = [\r\n        {\r\n          name: '150%',\r\n          text: i18n.translate('fontScaleXLarge'),\r\n          param: '5'\r\n        }, {\r\n          name: '125%',\r\n          text: i18n.translate('fontScaleLarge'),\r\n          param: '4'\r\n        }, {\r\n          name: '100%',\r\n          text: i18n.translate('fontScaleNormal'),\r\n          param: '3'\r\n        }, {\r\n          name: '75%',\r\n          text: i18n.translate('fontScaleSmall'),\r\n          param: '2'\r\n        }, {\r\n          name: '50%',\r\n          text: i18n.translate('fontScaleXSmall'),\r\n          param: '1'\r\n        }\r\n      ];\r\n      return Action.prototype._init.call(this);\r\n    },\r\n\r\n    _activeStatus : function() {\r\n      var active, endNode, endNodes, range, startNode, startNodes;\r\n      range = this.editor.editable.selection.range();\r\n      startNodes = this.editor.editable.selection.startNodes();\r\n      endNodes = this.editor.editable.selection.endNodes();\r\n      startNode = startNodes.filter('span[style*=\"font-size\"]');\r\n      endNode = endNodes.filter('span[style*=\"font-size\"]');\r\n      active = startNodes.length > 0 && endNodes.length > 0 && startNode.is(endNode);\r\n      this.setActive(active);\r\n      return this.active;\r\n    },\r\n\r\n    _execute : function(param) {\r\n      return this.editor.editable.fontScale(param);\r\n    }\r\n  });\r\n\r\n\r\n  addons.actions.fontScale = FontScaleAction; \r\n\r\n  return FontScaleAction;\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/FullScreenAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"../../i18n\"\r\n],function($,addons,Action,i18n){ \r\n\r\n  \r\n  var FullScrennAction = Action.inherit({\r\n    name : 'fullscreen',\r\n\r\n    icon : \"fullscreen\",\r\n\r\n    needFocus : false,\r\n\r\n    _init : function() {\r\n      Action.prototype._init.call(this);\r\n\r\n      this.window = $(window);\r\n      this.body = $('body');\r\n      this.editable = this.editor.body;\r\n    },\r\n\r\n\r\n    status : function() {\r\n      return this.setActive(this.body.hasClass(this.constructor.cls));\r\n    },\r\n\r\n    _execute : function() {\r\n      var editablePadding, isFullscreen;\r\n      this.body.toggleClass(this.constructor.cls);\r\n      isFullscreen = this.body.hasClass(this.constructor.cls);\r\n      if (isFullscreen) {\r\n        editablePadding = this.editable.outerHeight() - this.editable.height();\r\n        this.window.on(\"resize.wordpad-fullscreen-\" + this.editor.id, (function(_this) {\r\n          return function() {\r\n            return _this._resize({\r\n              height: _this.window.height() - $(_this.editor.toolbar._elm).outerHeight() - editablePadding\r\n            });\r\n          };\r\n        })(this)).resize();\r\n      } else {\r\n        this.window.off(\"resize.wordpad-fullscreen-\" + this.editor.id).resize();\r\n        this._resize({\r\n          height: 'auto'\r\n        });\r\n      }\r\n      return this.setActive(isFullscreen);\r\n    },\r\n\r\n    _resize : function(size) {\r\n      return this.editable.height(size.height);\r\n    }\r\n  });\r\n\r\n  FullScrennAction.cls = 'wordpad-fullscreen';\r\n\r\n  FullScrennAction.i18n = {\r\n    'zh-CN': {\r\n      fullscreen: '全屏'\r\n    }\r\n  };\r\n\r\n\r\n  addons.actions.fullscreen = FullScrennAction; \r\n\r\n  return FullScrennAction;\r\n\r\n }); \ndefine('skylark-widgets-wordpad/addons/actions/HrAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function($,addons,Action){ \r\n  \r\n   var HrAction = Action.inherit({\r\n\r\n\t  name : 'hr',\r\n\r\n\t  icon : 'hr',\r\n\r\n\t  htmlTag : 'hr',\r\n\r\n\t  _status : function() {},\r\n\r\n\t  _execute : function() {\r\n\t    return this.editor.editable.hr();\r\n\t  }\r\n\r\n   });\r\n\r\n\r\n  addons.actions.hr = HrAction; \r\n\r\n  return HrAction;\t\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/HtmlAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function($,addons,Action){ \r\n   var  hasProp = {}.hasOwnProperty,\r\n        slice = [].slice;\r\n  \r\n\r\n   var HtmlAction = Action.inherit({\r\n    name : 'html',\r\n\r\n    icon : 'html',\r\n\r\n    needFocus : false,\r\n\r\n    _init : function() {\r\n      Action.prototype._init.call(this);\r\n      this.editor.textarea.on('focus', (function(_this) {\r\n        return function(e) {\r\n          return _this.editor.el.addClass('focus').removeClass('error');\r\n        };\r\n      })(this));\r\n      this.editor.textarea.on('blur', (function(_this) {\r\n        return function(e) {\r\n          _this.editor.el.removeClass('focus');\r\n          return _this.editor.setValue(_this.editor.textarea.val());\r\n        };\r\n      })(this));\r\n      return this.editor.textarea.on('input', (function(_this) {\r\n        return function(e) {\r\n          return _this._resizeTextarea();\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    status : function() {},\r\n\r\n    _execute : function() {\r\n      var action, i, len, ref;\r\n      this.editor.blur();\r\n      this.editor.el.toggleClass('wordpad-html');\r\n      this.editor.htmlMode = this.editor.el.hasClass('wordpad-html');\r\n      if (this.editor.htmlMode) {\r\n        this.editor.hidePopover();\r\n        this.editor.textarea.val(this.beautifyHTML(this.editor.textarea.val()));\r\n        this._resizeTextarea();\r\n      } else {\r\n        this.editor.setValue(this.editor.textarea.val());\r\n      }\r\n      ref = this.editor._actions;\r\n      for (i = 0, len = ref.length; i < len; i++) {\r\n        action = ref[i];\r\n        if (action.name === 'html') {\r\n          action.setActive(this.editor.htmlMode);\r\n        } else {\r\n          action.setDisabled(this.editor.htmlMode);\r\n        }\r\n      }\r\n      return null;\r\n    },\r\n\r\n    beautifyHTML : function() {\r\n      return arguments[0];\r\n      var args;\r\n      args = 1 <= arguments.length ? slice.call(arguments, 0) : [];\r\n      if (beautify.html) {\r\n        return beautify.html.apply(beautify, args);\r\n      } else {\r\n        return beautify.apply(null, args);\r\n      }\r\n    },\r\n\r\n    _resizeTextarea : function() {\r\n      this._textareaPadding || (this._textareaPadding = this.editor.textarea.innerHeight() - this.editor.textarea.height());\r\n      return this.editor.textarea.height(this.editor.textarea[0].scrollHeight - this._textareaPadding);\r\n    }\r\n\r\n   });\r\n\r\n\r\n   addons.actions.html = HtmlAction; \r\n\r\n   return HtmlAction;\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/ImagePopover',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Popover\"\r\n],function(langx, $,addons,Popover){ \r\n   var ImagePopover = Popover.inherit({\r\n\r\n   });\r\n\r\n  ImagePopover.prototype.offset = {\r\n    top: 6,\r\n    left: -4\r\n  };\r\n\r\n  ImagePopover.prototype.render = function() {\r\n    var tpl;\r\n    tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('imageUrl')) + \"</label>\\n    <input class=\\\"image-src\\\" type=\\\"text\\\" tabindex=\\\"1\\\" />\\n    <a class=\\\"btn-upload\\\" href=\\\"javascript:;\\\"\\n      title=\\\"\" + (this._t('uploadImage')) + \"\\\" tabindex=\\\"-1\\\">\\n      <span class=\\\"fa fa-upload\\\"></span>\\n    </a>\\n  </div>\\n  <div class='settings-field'>\\n    <label>\" + (this._t('imageAlt')) + \"</label>\\n    <input class=\\\"image-alt\\\" id=\\\"image-alt\\\" type=\\\"text\\\" tabindex=\\\"1\\\" />\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('imageSize')) + \"</label>\\n    <input class=\\\"image-size\\\" id=\\\"image-width\\\" type=\\\"text\\\" tabindex=\\\"2\\\" />\\n    <span class=\\\"times\\\">×</span>\\n    <input class=\\\"image-size\\\" id=\\\"image-height\\\" type=\\\"text\\\" tabindex=\\\"3\\\" />\\n    <a class=\\\"btn-restore\\\" href=\\\"javascript:;\\\"\\n      title=\\\"\" + (this._t('restoreImageSize')) + \"\\\" tabindex=\\\"-1\\\">\\n      <span class=\\\"fa fa-undo\\\"></span>\\n    </a>\\n  </div>\\n</div>\";\r\n    this.el.addClass('image-popover').append(tpl);\r\n    this.srcEl = this.el.find('.image-src');\r\n    this.widthEl = this.el.find('#image-width');\r\n    this.heightEl = this.el.find('#image-height');\r\n    this.altEl = this.el.find('#image-alt');\r\n    this.srcEl.on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var range;\r\n        if (!(e.which === 13 && !_this.target.hasClass('uploading'))) {\r\n          return;\r\n        }\r\n        e.preventDefault();\r\n        range = document.createRange();\r\n        _this.Action.editor.editable.selection.setRangeAfter(_this.target, range);\r\n        return _this.hide();\r\n      };\r\n    })(this));\r\n    this.srcEl.on('blur', (function(_this) {\r\n      return function(e) {\r\n        return _this._loadImage(_this.srcEl.val());\r\n      };\r\n    })(this));\r\n    this.el.find('.image-size').on('blur', (function(_this) {\r\n      return function(e) {\r\n        _this._resizeImg($(e.currentTarget));\r\n        return _this.el.data('popover').refresh();\r\n      };\r\n    })(this));\r\n    this.el.find('.image-size').on('keyup', (function(_this) {\r\n      return function(e) {\r\n        var inputEl;\r\n        inputEl = $(e.currentTarget);\r\n        if (!(e.which === 13 || e.which === 27 || e.which === 9)) {\r\n          return _this._resizeImg(inputEl, true);\r\n        }\r\n      };\r\n    })(this));\r\n    this.el.find('.image-size').on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var $img, inputEl, range;\r\n        inputEl = $(e.currentTarget);\r\n        if (e.which === 13 || e.which === 27) {\r\n          e.preventDefault();\r\n          if (e.which === 13) {\r\n            _this._resizeImg(inputEl);\r\n          } else {\r\n            _this._restoreImg();\r\n          }\r\n          $img = _this.target;\r\n          _this.hide();\r\n          range = document.createRange();\r\n          return _this.Action.editor.editable.selection.setRangeAfter($img, range);\r\n        } else if (e.which === 9) {\r\n          return _this.el.data('popover').refresh();\r\n        }\r\n      };\r\n    })(this));\r\n    this.altEl.on('keydown', (function(_this) {\r\n      return function(e) {\r\n        var range;\r\n        if (e.which === 13) {\r\n          e.preventDefault();\r\n          range = document.createRange();\r\n          _this.Action.editor.editable.selection.setRangeAfter(_this.target, range);\r\n          return _this.hide();\r\n        }\r\n      };\r\n    })(this));\r\n    this.altEl.on('keyup', (function(_this) {\r\n      return function(e) {\r\n        if (e.which === 13 || e.which === 27 || e.which === 9) {\r\n          return;\r\n        }\r\n        _this.alt = _this.altEl.val();\r\n        return _this.target.attr('alt', _this.alt);\r\n      };\r\n    })(this));\r\n    this.el.find('.btn-restore').on('click', (function(_this) {\r\n      return function(e) {\r\n        _this._restoreImg();\r\n        return _this.el.data('popover').refresh();\r\n      };\r\n    })(this));\r\n    this.editor.on('valuechanged', (function(_this) {\r\n      return function(e) {\r\n        if (_this.active) {\r\n          return _this.refresh();\r\n        }\r\n      };\r\n    })(this));\r\n    return this._initUploader();\r\n  };\r\n\r\n  ImagePopover.prototype._initUploader = function() {\r\n    var $uploadBtn, createInput;\r\n    $uploadBtn = this.el.find('.btn-upload');\r\n    if (this.editor.uploader == null) {\r\n      $uploadBtn.remove();\r\n      return;\r\n    }\r\n    createInput = (function(_this) {\r\n      return function() {\r\n        if (_this.input) {\r\n          _this.input.remove();\r\n        }\r\n        return _this.input = $('<input/>', {\r\n          type: 'file',\r\n          title: _this._t('uploadImage'),\r\n          multiple: true,\r\n          accept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg'\r\n        }).appendTo($uploadBtn);\r\n      };\r\n    })(this);\r\n    createInput();\r\n    this.el.on('click mousedown', 'input[type=file]', function(e) {\r\n      return e.stopPropagation();\r\n    });\r\n    return this.el.on('change', 'input[type=file]', (function(_this) {\r\n      return function(e) {\r\n        _this.editor.uploader.upload(_this.input, {\r\n          inline: true,\r\n          img: _this.target\r\n        });\r\n        return createInput();\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ImagePopover.prototype._resizeImg = function(inputEl, onlySetVal) {\r\n    var height, value, width;\r\n    if (onlySetVal == null) {\r\n      onlySetVal = false;\r\n    }\r\n    value = inputEl.val() * 1;\r\n    if (!(this.target && (langx.isNumber(value) || value < 0))) {\r\n      return;\r\n    }\r\n    if (inputEl.is(this.widthEl)) {\r\n      width = value;\r\n      height = this.height * value / this.width;\r\n      this.heightEl.val(height);\r\n    } else {\r\n      height = value;\r\n      width = this.width * value / this.height;\r\n      this.widthEl.val(width);\r\n    }\r\n    if (!onlySetVal) {\r\n      this.target.attr({\r\n        width: width,\r\n        height: height\r\n      });\r\n      return this.editor.trigger('valuechanged');\r\n    }\r\n  };\r\n\r\n  ImagePopover.prototype._restoreImg = function() {\r\n    var ref, size;\r\n    size = ((ref = this.target.data('image-size')) != null ? ref.split(\",\") : void 0) || [this.width, this.height];\r\n    this.target.attr({\r\n      width: size[0] * 1,\r\n      height: size[1] * 1\r\n    });\r\n    this.widthEl.val(size[0]);\r\n    this.heightEl.val(size[1]);\r\n    return this.editor.trigger('valuechanged');\r\n  };\r\n\r\n  ImagePopover.prototype._loadImage = function(src, callback) {\r\n    if (/^data:image/.test(src) && !this.editor.uploader) {\r\n      if (callback) {\r\n        callback(false);\r\n      }\r\n      return;\r\n    }\r\n    if (this.target.attr('src') === src) {\r\n      return;\r\n    }\r\n    return this.Action.loadImage(this.target, src, (function(_this) {\r\n      return function(img) {\r\n        var blob;\r\n        if (!img) {\r\n          return;\r\n        }\r\n        if (_this.active) {\r\n          _this.width = img.width;\r\n          _this.height = img.height;\r\n          _this.widthEl.val(_this.width);\r\n          _this.heightEl.val(_this.height);\r\n        }\r\n        if (/^data:image/.test(src)) {\r\n          blob = _this.editor.editable.util.dataURLtoBlob(src);\r\n          blob.name = \"Base64 Image.png\";\r\n          _this.editor.uploader.upload(blob, {\r\n            inline: true,\r\n            img: _this.target\r\n          });\r\n        } else {\r\n          _this.editor.trigger('valuechanged');\r\n        }\r\n        if (callback) {\r\n          return callback(img);\r\n        }\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  ImagePopover.prototype.show = function() {\r\n    var $img, args;\r\n    args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n    Popover.prototype.show.apply(this, args);\r\n    $img = this.target;\r\n    this.width = $img.width();\r\n    this.height = $img.height();\r\n    this.alt = $img.attr('alt');\r\n    if ($img.hasClass('uploading')) {\r\n      return this.srcEl.val(this._t('uploading')).prop('disabled', true);\r\n    } else {\r\n      this.srcEl.val($img.attr('src')).prop('disabled', false);\r\n      this.widthEl.val(this.width);\r\n      this.heightEl.val(this.height);\r\n      return this.altEl.val(this.alt);\r\n    }\r\n  };\r\n\r\n  return ImagePopover;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/ImageAction',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"./ImagePopover\",\r\n  \"../../i18n\"\r\n],function(langx, $,addons,Action,ImagePopover,i18n){ \r\n   var ImageAction = Action.inherit({\r\n      name : 'image',\r\n\r\n      icon : 'image',\r\n\r\n      htmlTag : 'img',\r\n\r\n      disableTag : 'pre, table',\r\n\r\n      defaultImage : '',\r\n\r\n      needFocus : false,\r\n\r\n      _init : function() {\r\n        var item, k, len, ref;\r\n        if (this.editor.opts.imageAction) {\r\n          if (Array.isArray(this.editor.opts.imageAction)) {\r\n            this.menu = [];\r\n            ref = this.editor.opts.imageAction;\r\n            for (k = 0, len = ref.length; k < len; k++) {\r\n              item = ref[k];\r\n              this.menu.push({\r\n                name: item + '-image',\r\n                text: this._t(item + 'Image')\r\n              });\r\n            }\r\n          } else {\r\n            this.menu = false;\r\n          }\r\n        } else {\r\n          if (this.editor.uploader != null) {\r\n            this.menu = [\r\n              {\r\n                name: 'upload-image',\r\n                text: i18n.translate('uploadImage')\r\n              }, {\r\n                name: 'external-image',\r\n                text: i18n.translate('externalImage')\r\n              }\r\n            ];\r\n          } else {\r\n            this.menu = false;\r\n          }\r\n        }\r\n        this.defaultImage = this.editor.opts.defaultImage;\r\n        this.editor.body.on('click', 'img:not([data-non-image])', (function(_this) {\r\n          return function(e) {\r\n            var $img, range;\r\n            $img = $(e.currentTarget);\r\n            range = document.createRange();\r\n            range.selectNode($img[0]);\r\n            _this.editor.editable.selection.range(range);\r\n            if (!_this.editor.editable.util.support.onselectionchange) {\r\n              _this.editor.trigger('selectionchanged');\r\n            }\r\n            return false;\r\n          };\r\n        })(this));\r\n        this.editor.body.on('mouseup', 'img:not([data-non-image])', function(e) {\r\n          return false;\r\n        });\r\n        this.editor.on('selectionchanged.image', (function(_this) {\r\n          return function() {\r\n            var $contents, $img, range;\r\n            range = _this.editor.editable.selection.range();\r\n            if (range == null) {\r\n              return;\r\n            }\r\n            $contents = $(range.cloneContents()).contents();\r\n            if ($contents.length === 1 && $contents.is('img:not([data-non-image])')) {\r\n              $img = $(range.startContainer).contents().eq(range.startOffset);\r\n              if (!_this.popover) {\r\n                _this.popover = new ImagePopover({\r\n                  action: _this\r\n                });                \r\n              }\r\n\r\n              return _this.popover.show($img);\r\n            } else {\r\n              if (_this.popover) {\r\n                  return _this.popover.hide();\r\n              }\r\n            }\r\n          };\r\n        })(this));\r\n        this.editor.on('valuechanged.image', (function(_this) {\r\n          return function() {\r\n            var $masks;\r\n            $masks = _this.editor.wrapper.find('.wordpad-image-loading');\r\n            if (!($masks.length > 0)) {\r\n              return;\r\n            }\r\n            return $masks.each(function(i, mask) {\r\n              var $img, $mask, file;\r\n              $mask = $(mask);\r\n              $img = $mask.data('img');\r\n              if (!($img && $img.parent().length > 0)) {\r\n                $mask.remove();\r\n                if ($img) {\r\n                  file = $img.data('file');\r\n                  if (file) {\r\n                    _this.editor.uploader.cancel(file);\r\n                    if (_this.editor.body.find('img.uploading').length < 1) {\r\n                      return _this.editor.uploader.trigger('uploadready', [file]);\r\n                    }\r\n                  }\r\n                }\r\n              }\r\n            });\r\n          };\r\n        })(this));\r\n\r\n        this.popover = new ImagePopover({\r\n          action: this\r\n        });\r\n        if (this.editor.opts.imageAction === 'upload') {\r\n          return this._initUploader(this.el);\r\n        }\r\n\r\n        return Action.prototype._init.call(this);\r\n\r\n\r\n      },\r\n\r\n      render : function() {\r\n        var args;\r\n        args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n        Action.prototype.render.apply(this, args);\r\n        this.popover = new ImagePopover({\r\n          action: this\r\n        });\r\n        if (this.editor.opts.imageAction === 'upload') {\r\n          return this._initUploader(this.el);\r\n        }\r\n      },\r\n\r\n      renderMenu : function() {\r\n        Action.prototype.renderMenu.call(this);\r\n        return this._initUploader();\r\n      },\r\n\r\n      _initUploader : function($uploadItem) {\r\n        var $input, createInput, uploadProgress;\r\n        if ($uploadItem == null) {\r\n          $uploadItem = this.menuEl.find('.menu-item-upload-image');\r\n        }\r\n        if (this.editor.uploader == null) {\r\n          this.el.find('.btn-upload').remove();\r\n          return;\r\n        }\r\n        $input = null;\r\n        createInput = (function(_this) {\r\n          return function() {\r\n            if ($input) {\r\n              $input.remove();\r\n            }\r\n            return $input = $('<input/>', {\r\n              type: 'file',\r\n              title: _this._t('uploadImage'),\r\n              multiple: true,\r\n              accept: 'image/gif,image/jpeg,image/jpg,image/png,image/svg'\r\n            }).appendTo($uploadItem);\r\n          };\r\n        })(this);\r\n        createInput();\r\n        $uploadItem.on('click mousedown', 'input[type=file]', function(e) {\r\n          return e.stopPropagation();\r\n        });\r\n        $uploadItem.on('change', 'input[type=file]', (function(_this) {\r\n          return function(e) {\r\n            if (_this.editor.editable.inputManager.focused) {\r\n              _this.editor.uploader.upload($input, {\r\n                inline: true\r\n              });\r\n              createInput();\r\n            } else {\r\n              _this.editor.one('focus', function(e) {\r\n                _this.editor.uploader.upload($input, {\r\n                  inline: true\r\n                });\r\n                return createInput();\r\n              });\r\n              _this.editor.focus();\r\n            }\r\n            return _this.wrapper.removeClass('menu-on');\r\n          };\r\n        })(this));\r\n        this.editor.uploader.on('beforeupload', (function(_this) {\r\n          return function(e, file) {\r\n            var $img;\r\n            if (!file.inline) {\r\n              return;\r\n            }\r\n            if (file.img) {\r\n              $img = $(file.img);\r\n            } else {\r\n              $img = _this.createImage(file.name);\r\n              file.img = $img;\r\n            }\r\n            $img.addClass('uploading');\r\n            $img.data('file', file);\r\n            return _this.editor.uploader.readImageFile(file.obj, function(img) {\r\n              var src;\r\n              if (!$img.hasClass('uploading')) {\r\n                return;\r\n              }\r\n              src = img ? img.src : _this.defaultImage;\r\n              return _this.loadImage($img, src, function() {\r\n                if (_this.popover.active) {\r\n                  _this.popover.refresh();\r\n                  return _this.popover.srcEl.val(_this._t('uploading')).prop('disabled', true);\r\n                }\r\n              });\r\n            });\r\n          };\r\n        })(this));\r\n        uploadProgress = langx.proxy(this.editor.editable.util.throttle(function(e, file, loaded, total) {\r\n          var $img, $mask, percent;\r\n          if (!file.inline) {\r\n            return;\r\n          }\r\n          $mask = file.img.data('mask');\r\n          if (!$mask) {\r\n            return;\r\n          }\r\n          $img = $mask.data('img');\r\n          if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\r\n            $mask.remove();\r\n            return;\r\n          }\r\n          percent = loaded / total;\r\n          percent = (percent * 100).toFixed(0);\r\n          if (percent > 99) {\r\n            percent = 99;\r\n          }\r\n          return $mask.find('.progress').height((100 - percent) + \"%\");\r\n        }, 500), this);\r\n        this.editor.uploader.on('uploadprogress', uploadProgress);\r\n        this.editor.uploader.on('uploadsuccess', (function(_this) {\r\n          return function(e, file, result) {\r\n            var $img, img_path, msg;\r\n            if (!file.inline) {\r\n              return;\r\n            }\r\n            $img = file.img;\r\n            if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\r\n              return;\r\n            }\r\n            if (typeof result !== 'object') {\r\n              try {\r\n                result = JSON.parse(result);\r\n              } catch (_error) {\r\n                e = _error;\r\n                result = {\r\n                  success: false\r\n                };\r\n              }\r\n            }\r\n            if (result.success === false) {\r\n              msg = result.msg || _this._t('uploadFailed');\r\n              alert(msg);\r\n              img_path = _this.defaultImage;\r\n            } else {\r\n              img_path = result.file_path;\r\n            }\r\n            _this.loadImage($img, img_path, function() {\r\n              var $mask;\r\n              $img.removeData('file');\r\n              $img.removeClass('uploading').removeClass('loading');\r\n              $mask = $img.data('mask');\r\n              if ($mask) {\r\n                $mask.remove();\r\n              }\r\n              $img.removeData('mask');\r\n              _this.editor.trigger('valuechanged');\r\n              if (_this.editor.body.find('img.uploading').length < 1) {\r\n                return _this.editor.uploader.trigger('uploadready', [file, result]);\r\n              }\r\n            });\r\n            if (_this.popover.active) {\r\n              _this.popover.srcEl.prop('disabled', false);\r\n              return _this.popover.srcEl.val(result.file_path);\r\n            }\r\n          };\r\n        })(this));\r\n        return this.editor.uploader.on('uploaderror', (function(_this) {\r\n          return function(e, file, xhr) {\r\n            var $img, msg, result;\r\n            if (!file.inline) {\r\n              return;\r\n            }\r\n            if (xhr.statusText === 'abort') {\r\n              return;\r\n            }\r\n            if (xhr.responseText) {\r\n              try {\r\n                result = JSON.parse(xhr.responseText);\r\n                msg = result.msg;\r\n              } catch (_error) {\r\n                e = _error;\r\n                msg = _this._t('uploadError');\r\n              }\r\n            }\r\n            $img = file.img;\r\n            if (!($img.hasClass('uploading') && $img.parent().length > 0)) {\r\n              return;\r\n            }\r\n            _this.loadImage($img, _this.defaultImage, function() {\r\n              var $mask;\r\n              $img.removeData('file');\r\n              $img.removeClass('uploading').removeClass('loading');\r\n              $mask = $img.data('mask');\r\n              if ($mask) {\r\n                $mask.remove();\r\n              }\r\n              return $img.removeData('mask');\r\n            });\r\n            if (_this.popover.active) {\r\n              _this.popover.srcEl.prop('disabled', false);\r\n              _this.popover.srcEl.val(_this.defaultImage);\r\n            }\r\n            _this.editor.trigger('valuechanged');\r\n            if (_this.editor.body.find('img.uploading').length < 1) {\r\n              return _this.editor.uploader.trigger('uploadready', [file, result]);\r\n            }\r\n          };\r\n        })(this));\r\n      },\r\n\r\n      _status : function() {\r\n        return this._disableStatus();\r\n      },\r\n\r\n      loadImage : function($img, src, callback) {\r\n        var $mask, img, positionMask;\r\n        positionMask = (function(_this) {\r\n          return function() {\r\n            var imgOffset, wrapperOffset;\r\n            imgOffset = $img.offset();\r\n            wrapperOffset = _this.editor.wrapper.offset();\r\n            return $mask.css({\r\n              top: imgOffset.top - wrapperOffset.top,\r\n              left: imgOffset.left - wrapperOffset.left,\r\n              width: $img.width(),\r\n              height: $img.height()\r\n            }).show();\r\n          };\r\n        })(this);\r\n        $img.addClass('loading');\r\n        $mask = $img.data('mask');\r\n        if (!$mask) {\r\n          $mask = $('<div class=\"wordpad-image-loading\">\\n  <div class=\"progress\"></div>\\n</div>').hide().appendTo(this.editor.wrapper);\r\n          positionMask();\r\n          $img.data('mask', $mask);\r\n          $mask.data('img', $img);\r\n        }\r\n        img = new Image();\r\n        img.onload = (function(_this) {\r\n          return function() {\r\n            var height, width;\r\n            if (!$img.hasClass('loading') && !$img.hasClass('uploading')) {\r\n              return;\r\n            }\r\n            width = img.width;\r\n            height = img.height;\r\n            $img.attr({\r\n              src: src,\r\n              width: width,\r\n              height: height,\r\n              'data-image-size': width + ',' + height\r\n            }).removeClass('loading');\r\n            if ($img.hasClass('uploading')) {\r\n              _this.editor.editable.util.reflow(_this.editor.body);\r\n              positionMask();\r\n            } else {\r\n              $mask.remove();\r\n              $img.removeData('mask');\r\n            }\r\n            if (langx.isFunction(callback)) {\r\n              return callback(img);\r\n            }\r\n          };\r\n        })(this);\r\n        img.onerror = function() {\r\n          if (langx.isFunction(callback)) {\r\n            callback(false);\r\n          }\r\n          $mask.remove();\r\n          return $img.removeData('mask').removeClass('loading');\r\n        };\r\n        return img.src = src;\r\n      },\r\n\r\n      createImage : function(name) {\r\n        var $img, range;\r\n        if (name == null) {\r\n          name = 'Image';\r\n        }\r\n        if (!this.editor.editable.inputManager.focused) {\r\n          this.editor.focus();\r\n        }\r\n        range = this.editor.editable.selection.range();\r\n        range.deleteContents();\r\n        this.editor.editable.selection.range(range);\r\n        $img = $('<img/>').attr('alt', name);\r\n        range.insertNode($img[0]);\r\n        this.editor.editable.selection.setRangeAfter($img, range);\r\n        this.editor.trigger('valuechanged');\r\n        return $img;\r\n      },\r\n\r\n      _execute : function(src) {\r\n        var $img;\r\n        $img = this.createImage();\r\n        return this.loadImage($img, src || this.defaultImage, (function(_this) {\r\n          return function() {\r\n            _this.editor.trigger('valuechanged');\r\n            _this.editor.editable.util.reflow($img);\r\n            $img.click();\r\n            return _this.popover.one('popovershow', function() {\r\n              _this.popover.srcEl.focus();\r\n              return _this.popover.srcEl[0].select();\r\n            });\r\n          };\r\n        })(this));\r\n      }\r\n\r\n   });\r\n\r\n   addons.actions.image = ImageAction; \r\n\r\n   return ImageAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/IndentAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function($,addons,Action){ \r\n  \r\n   var IndentAction = Action.inherit({\r\n      name :'indent',\r\n\r\n      icon : 'indent',\r\n\r\n      _init : function() {\r\n        var hotkey;\r\n        hotkey = this.editor.opts.tabIndent === false ? '' : ' (Tab)';\r\n        this.title = this._t(this.name) + hotkey;\r\n        return Action.prototype._init.call(this);\r\n      },\r\n\r\n      _execute : function() {\r\n        return this.editor.editable.indent()\r\n      }\r\n\r\n   });\r\n\r\n\r\n   addons.actions.indent = IndentAction; \r\n\r\n   return IndentAction;\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/ItalicAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function($,addons,Action){ \r\n  \r\n\r\n  var ItalicAction = Action.inherit({\r\n      name : 'italic',\r\n\r\n      icon : 'italic',\r\n\r\n      htmlTag : 'i',\r\n\r\n      disableTag : 'pre',\r\n\r\n      shortcut : 'cmd+i',\r\n\r\n      _init : function() {\r\n        if (this.editor.editable.util.os.mac) {\r\n          this.title = this.title + \" ( Cmd + i )\";\r\n        } else {\r\n          this.title = this.title + \" ( Ctrl + i )\";\r\n          this.shortcut = 'ctrl+i';\r\n        }\r\n        return Action.prototype._init.call(this);\r\n      },\r\n\r\n      _activeStatus : function() {\r\n        var active;\r\n        active = this.editor.editable.isActive('italic');\r\n        this.setActive(active);\r\n        return this.active;\r\n      },\r\n\r\n      _execute : function() {\r\n        return this.editor.editable.italic();\r\n      }\r\n   });\r\n\r\n\r\n   addons.actions.italic = ItalicAction; \r\n\r\n   return ItalicAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/LinkPopover',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Popover\"\r\n],function($,addons,Popover){ \r\n  var LinkPopover = Popover.inherit({\r\n    render : function() {\r\n      var tpl;\r\n      tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkText')) + \"</label>\\n    <input class=\\\"link-text\\\" type=\\\"text\\\"/>\\n    <a class=\\\"btn-unlink\\\" href=\\\"javascript:;\\\" title=\\\"\" + (this._t('removeLink')) + \"\\\"\\n      tabindex=\\\"-1\\\">\\n      <span class=\\\"fa fa-unlink\\\"></span>\\n    </a>\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkUrl')) + \"</label>\\n    <input class=\\\"link-url\\\" type=\\\"text\\\"/>\\n  </div>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('linkTarget')) + \"</label>\\n    <select class=\\\"link-target\\\">\\n      <option value=\\\"_blank\\\">\" + (this._t('openLinkInNewWindow')) + \" (_blank)</option>\\n      <option value=\\\"_self\\\">\" + (this._t('openLinkInCurrentWindow')) + \" (_self)</option>\\n    </select>\\n  </div>\\n</div>\";\r\n      this.el.addClass('link-popover').append(tpl);\r\n      this.textEl = this.el.find('.link-text');\r\n      this.urlEl = this.el.find('.link-url');\r\n      this.unlinkEl = this.el.find('.btn-unlink');\r\n      this.selectTarget = this.el.find('.link-target');\r\n      this.textEl.on('keyup', (function(_this) {\r\n        return function(e) {\r\n          if (e.which === 13) {\r\n            return;\r\n          }\r\n          _this.target.text(_this.textEl.val());\r\n          return _this.editor.editable.inputManager.throttledValueChanged();\r\n        };\r\n      })(this));\r\n      this.urlEl.on('keyup', (function(_this) {\r\n        return function(e) {\r\n          var val;\r\n          if (e.which === 13) {\r\n            return;\r\n          }\r\n          val = _this.urlEl.val();\r\n          if (!(/^(http|https|ftp|ftps|file)?:\\/\\/|^(mailto|tel)?:|^\\//ig.test(val) || !val)) {\r\n            val = 'http://' + val;\r\n          }\r\n          _this.target.attr('href', val);\r\n          return _this.editor.editable.inputManager.throttledValueChanged();\r\n        };\r\n      })(this));\r\n      $([this.urlEl[0], this.textEl[0]]).on('keydown', (function(_this) {\r\n        return function(e) {\r\n          var range;\r\n          if (e.which === 13 || e.which === 27 || (!e.shiftKey && e.which === 9 && $(e.target).hasClass('link-url'))) {\r\n            e.preventDefault();\r\n            range = document.createRange();\r\n            _this.editor.editable.selection.setRangeAfter(_this.target, range);\r\n            _this.hide();\r\n            return _this.editor.editable.inputManager.throttledValueChanged();\r\n          }\r\n        };\r\n      })(this));\r\n      this.unlinkEl.on('click', (function(_this) {\r\n        return function(e) {\r\n          var range, txtNode;\r\n          txtNode = document.createTextNode(_this.target.text());\r\n          _this.target.replaceWith(txtNode);\r\n          _this.hide();\r\n          range = document.createRange();\r\n          _this.editor.editable.selection.setRangeAfter(txtNode, range);\r\n          return _this.editor.editable.inputManager.throttledValueChanged();\r\n        };\r\n      })(this));\r\n      return this.selectTarget.on('change', (function(_this) {\r\n        return function(e) {\r\n          _this.target.attr('target', _this.selectTarget.val());\r\n          return _this.editor.editable.inputManager.throttledValueChanged();\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    show : function() {\r\n      var args;\r\n      args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n      Popover.prototype.show.apply(this, args);\r\n      this.textEl.val(this.target.text());\r\n      return this.urlEl.val(this.target.attr('href'));\r\n    }\r\n  });\r\n\r\n  return LinkPopover;\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/LinkAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"../../i18n\",\r\n  \"./LinkPopover\"\r\n],function($,addons,Action,i18n,LinkPopover){ \r\n  \r\n\r\n  var LinkAction = Action.inherit({\r\n    name : 'link',\r\n\r\n    icon : 'link',\r\n\r\n    htmlTag : 'a',\r\n\r\n    disableTag : 'pre',\r\n\r\n    _status : function() {\r\n     Action.prototype._status.call(this);\r\n      if (this.active && !this.editor.editable.selection.rangeAtEndOf(this.node)) {\r\n        if (!this.popover) {\r\n          this.popover = new LinkPopover({\r\n            action: this\r\n          });\r\n        }\r\n        return this.popover.show(this.node);\r\n      } else {\r\n        if (this.popover) {\r\n          return this.popover.hide();\r\n        }\r\n      }\r\n    },\r\n\r\n    _execute : function() {\r\n      if (this.active) {\r\n        this.popover.one('popovershow', (function(_this) {\r\n          return function() {\r\n            if (linkText) {\r\n              _this.popover.urlEl.focus();\r\n              return _this.popover.urlEl[0].select();\r\n            } else {\r\n              _this.popover.textEl.focus();\r\n              return _this.popover.textEl[0].select();\r\n            }\r\n          };\r\n        })(this));\r\n\r\n      }\r\n\r\n      return this.editor.editable.link(this.active,i18n.translate('linkText'));\r\n\r\n    }\r\n\r\n   });\r\n\r\n\r\n\r\n  addons.actions.link = LinkAction; \r\n\r\n  return LinkAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/ListAction',[\r\n  \"skylark-domx-noder\",\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function(noder,$,addons,Action){ \r\n  var ListAction = Action.inherit({\r\n    type : '',\r\n\r\n    disableTag : 'pre, table',\r\n\r\n    _execute : function(param) {\r\n      return this.editor.editable.list(this.type,param,this.disableTag);\r\n    }\r\n\r\n   });\r\n\r\n\r\n\r\n    return ListAction;\r\n\t\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/MarkAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"../../i18n\"\r\n],function($,addons,Action,i18n){ \r\n\r\n\r\n  var MarkAction = Action.inherit({\r\n    name : 'mark',\r\n\r\n    icon : 'mark',\r\n\r\n    htmlTag : 'mark',\r\n\r\n    disableTag : 'pre, table',\r\n\r\n    _execute : function() {\r\n      var $end, $start, range;\r\n      range = this.editor.editable.selection.range();\r\n      if (this.active) {\r\n        this.editor.editable.selection.save();\r\n        this.unmark(range);\r\n        this.editor.editable.selection.restore();\r\n        this.editor.trigger('valuechanged');\r\n        return;\r\n      }\r\n      if (range.collapsed) {\r\n        return;\r\n      }\r\n      this.editor.editable.selection.save();\r\n      $start = $(range.startContainer);\r\n      $end = $(range.endContainer);\r\n      if ($start.closest('mark').length) {\r\n        range.setStartBefore($start.closest('mark')[0]);\r\n      }\r\n      if ($end.closest('mark').length) {\r\n        range.setEndAfter($end.closest('mark')[0]);\r\n      }\r\n      this.mark(range);\r\n      this.editor.editable.selection.restore();\r\n      this.editor.trigger('valuechanged');\r\n      if (this.editor.editable.util.support.onselectionchange) {\r\n        return this.editor.trigger('selectionchanged');\r\n      }\r\n    },\r\n\r\n    mark : function(range) {\r\n      var $contents, $mark;\r\n      if (range == null) {\r\n        range = this.editor.editable.selection.range();\r\n      }\r\n      $contents = $(range.extractContents());\r\n      $contents.find('mark').each(function(index, ele) {\r\n        return $(ele).replaceWith($(ele).html());\r\n      });\r\n      $mark = $('<mark>').append($contents);\r\n      return range.insertNode($mark[0]);\r\n    },\r\n\r\n    unmark : function(range) {\r\n      var $mark;\r\n      if (range == null) {\r\n        range = this.editor.editable.selection.range();\r\n      }\r\n      if (range.collapsed) {\r\n        $mark = $(range.commonAncestorContainer);\r\n        if (!$mark.is('mark')) {\r\n          $mark = $mark.parent();\r\n        }\r\n      } else if ($(range.startContainer).closest('mark').length) {\r\n        $mark = $(range.startContainer).closest('mark');\r\n      } else if ($(range.endContainer).closest('mark').length) {\r\n        $mark = $(range.endContainer).closest('mark');\r\n      }\r\n      return $mark.replaceWith($mark.html());\r\n    }\r\n\r\n  });\r\n\r\n  \r\n  addons.actions.mark = MarkAction;\r\n\r\n  return MarkAction;\r\n\r\n }); \ndefine('skylark-widgets-wordpad/addons/actions/OrderListAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"./ListAction\"\r\n],function($,addons,ListAction){ \r\n  var OrderListAction = ListAction.inherit({\r\n    type : 'ol',\r\n\r\n    name : 'ol',\r\n\r\n    icon : 'listol',\r\n\r\n    htmlTag : 'ol',\r\n\r\n    shortcut : 'cmd+/',\r\n\r\n    _init : function() {\r\n      if (this.editor.editable.util.os.mac) {\r\n        this.title = this.title + ' ( Cmd + / )';\r\n      } else {\r\n        this.title = this.title + ' ( ctrl + / )';\r\n        this.shortcut = 'ctrl+/';\r\n      }\r\n      return ListAction.prototype._init.call(this);\r\n    }\r\n\r\n   });\r\n\r\n    return addons.actions.ol = OrderListAction;\t\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/OutdentAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function($,addons,Action){ \r\n  var OutdentAction = Action.inherit({\r\n    name : 'outdent',\r\n\r\n    icon : 'outdent',\r\n\r\n    _init : function() {\r\n      var hotkey;\r\n      hotkey = this.editor.opts.tabIndent === false ? '' : ' (Shift + Tab)';\r\n      this.title = this._t(this.name) + hotkey;\r\n      return Action.prototype._init.call(this);\r\n    },\r\n\r\n    _status : function() {},\r\n\r\n    _execute : function() {\r\n      return this.editor.editable.outdent();\r\n    }\r\n\r\n   });\r\n\r\n\r\n   addons.actions.outdent = OutdentAction; \r\n \r\n   return OutdentAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/StrikethroughAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function($,addons,Action){ \r\n  \r\n  var StrikethroughAction = Action.inherit({\r\n    name : 'strikethrough',\r\n\r\n    icon : 'strikethrough',\r\n\r\n    htmlTag : 'strike',\r\n\r\n    disableTag : 'pre',\r\n\r\n    _activeStatus : function() {\r\n      var active;\r\n      active = this.editor.editable.isActive('strikethrough');\r\n      this.setActive(active);\r\n      return this.active;\r\n    },\r\n\r\n    _execute : function() {\r\n      return this.editor.editable.strikethrough();\r\n    }\r\n\r\n  });\r\n\r\n\r\n  return addons.actions.strikethrough = StrikethroughAction;\t\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/TableAction',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-tables\",\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function(langx,tables,$,addons,Action){ \r\n  var TableAction = Action.inherit({\r\n    name : 'table',\r\n\r\n    icon : 'table',\r\n\r\n    htmlTag : 'table',\r\n\r\n    disableTag : 'pre, li, blockquote',\r\n\r\n    menu : true,\r\n\r\n    _init : function() {\r\n      Action.prototype._init.call(this);\r\n      langx.merge(this.editor.editable.formatter._allowedTags, ['thead', 'th', 'tbody', 'tr', 'td', 'colgroup', 'col']);\r\n      langx.extend(this.editor.editable.formatter._allowedAttributes, {\r\n        td: ['rowspan', 'colspan'],\r\n        col: ['width']\r\n      });\r\n      langx.extend(this.editor.editable.formatter._allowedStyles, {\r\n        td: ['text-align'],\r\n        th: ['text-align']\r\n      });\r\n      this._initShortcuts();\r\n      this._initResize();\r\n      this.editor.on('decorate', (function(_this) {\r\n        return function(e, $el) {\r\n          return $el.find('table').each(function(i, table) {\r\n            return _this.decorate($(table));\r\n          });\r\n        };\r\n      })(this));\r\n      this.editor.on('undecorate', (function(_this) {\r\n        return function(e, $el) {\r\n          return $el.find('table').each(function(i, table) {\r\n            return _this.undecorate($(table));\r\n          });\r\n        };\r\n      })(this));\r\n      this.editor.on('selectionchanged.table', (function(_this) {\r\n        return function(e) {\r\n          var $container, range;\r\n          _this.editor.body.find('.wordpad-table td, .wordpad-table th').removeClass('active');\r\n          range = _this.editor.editable.selection.range();\r\n          if (!range) {\r\n            return;\r\n          }\r\n          $container = _this.editor.editable.selection.containerNode();\r\n          if (range.collapsed && $container.is('.wordpad-table')) {\r\n            _this.editor.editable.selection.setRangeAtEndOf($container);\r\n          }\r\n          return $container.closest('td, th', _this.editor.body).addClass('active');\r\n        };\r\n      })(this));\r\n      this.editor.on('blur.table', (function(_this) {\r\n        return function(e) {\r\n          return _this.editor.body.find('.wordpad-table td, .wordpad-table th').removeClass('active');\r\n        };\r\n      })(this));\r\n      this.editor.editable.keystroke.add('up', 'td', (function(_this) {\r\n        return function(e, $node) {\r\n          _this._tdNav($node, 'up');\r\n          return true;\r\n        };\r\n      })(this));\r\n      this.editor.editable.keystroke.add('up', 'th', (function(_this) {\r\n        return function(e, $node) {\r\n          _this._tdNav($node, 'up');\r\n          return true;\r\n        };\r\n      })(this));\r\n      this.editor.editable.keystroke.add('down', 'td', (function(_this) {\r\n        return function(e, $node) {\r\n          _this._tdNav($node, 'down');\r\n          return true;\r\n        };\r\n      })(this));\r\n      return this.editor.editable.keystroke.add('down', 'th', (function(_this) {\r\n        return function(e, $node) {\r\n          _this._tdNav($node, 'down');\r\n          return true;\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    _tdNav : function($td, direction) {\r\n      var $anotherTr, $tr, action, anotherTag, index, parentTag, ref;\r\n      if (direction == null) {\r\n        direction = 'up';\r\n      }\r\n      action = direction === 'up' ? 'prev' : 'next';\r\n      ref = direction === 'up' ? ['tbody', 'thead'] : ['thead', 'tbody'], parentTag = ref[0], anotherTag = ref[1];\r\n      $tr = $td.parent('tr');\r\n      $anotherTr = this[\"_\" + action + \"Row\"]($tr);\r\n      if (!($anotherTr.length > 0)) {\r\n        return true;\r\n      }\r\n      index = $tr.find('td, th').index($td);\r\n      return this.editor.editable.selection.setRangeAtEndOf($anotherTr.find('td, th').eq(index));\r\n    },\r\n\r\n    _initResize : function() {\r\n\r\n      tables.resizable(document,{\r\n        cssClasses : {\r\n          resizeHandle : \"wordpad-resize-handle\",\r\n          wrapper : \"wordpad-table\"\r\n        }\r\n      });\r\n\r\n    },\r\n\r\n    _initShortcuts : function() {\r\n      this.editor.editable.hotkeys.add('ctrl+alt+up', (function(_this) {\r\n        return function(e) {\r\n          _this.editMenu.find('.menu-item[data-param=insertRowAbove]').click();\r\n          return false;\r\n        };\r\n      })(this));\r\n      this.editor.editable.hotkeys.add('ctrl+alt+down', (function(_this) {\r\n        return function(e) {\r\n          _this.editMenu.find('.menu-item[data-param=insertRowBelow]').click();\r\n          return false;\r\n        };\r\n      })(this));\r\n      this.editor.editable.hotkeys.add('ctrl+alt+left', (function(_this) {\r\n        return function(e) {\r\n          _this.editMenu.find('.menu-item[data-param=insertColLeft]').click();\r\n          return false;\r\n        };\r\n      })(this));\r\n      return this.editor.editable.hotkeys.add('ctrl+alt+right', (function(_this) {\r\n        return function(e) {\r\n          _this.editMenu.find('.menu-item[data-param=insertColRight]').click();\r\n          return false;\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    renderMenu : function() {\r\n      var $table;\r\n      $(\"<div class=\\\"menu-create-table\\\">\\n</div>\\n<div class=\\\"menu-edit-table\\\">\\n  <ul>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteRow\\\">\\n        <span>\" + (this._t('deleteRow')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowAbove\\\">\\n        <span>\" + (this._t('insertRowAbove')) + \" ( Ctrl + Alt + ↑ )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowBelow\\\">\\n        <span>\" + (this._t('insertRowBelow')) + \" ( Ctrl + Alt + ↓ )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteCol\\\">\\n        <span>\" + (this._t('deleteColumn')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColLeft\\\">\\n        <span>\" + (this._t('insertColumnLeft')) + \" ( Ctrl + Alt + ← )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColRight\\\">\\n        <span>\" + (this._t('insertColumnRight')) + \" ( Ctrl + Alt + → )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteTable\\\">\\n        <span>\" + (this._t('deleteTable')) + \"</span>\\n      </a>\\n    </li>\\n  </ul>\\n</div>\").appendTo(this.menuWrapper);\r\n      this.createMenu = this.menuWrapper.find('.menu-create-table');\r\n      this.editMenu = this.menuWrapper.find('.menu-edit-table');\r\n      $table = this.createTable(6, 6).appendTo(this.createMenu);\r\n      this.createMenu.on('mouseenter', 'td, th', (function(_this) {\r\n        return function(e) {\r\n          var $td, $tr, $trs, num;\r\n          _this.createMenu.find('td, th').removeClass('selected');\r\n          $td = $(e.currentTarget);\r\n          $tr = $td.parent();\r\n          num = $tr.find('td, th').index($td) + 1;\r\n          $trs = $tr.prevAll('tr').addBack();\r\n          if ($tr.parent().is('tbody')) {\r\n            $trs = $trs.add($table.find('thead tr'));\r\n          }\r\n          return $trs.find(\"td:lt(\" + num + \"), th:lt(\" + num + \")\").addClass('selected');\r\n        };\r\n      })(this));\r\n      this.createMenu.on('mouseleave', function(e) {\r\n        return $(e.currentTarget).find('td, th').removeClass('selected');\r\n      });\r\n      return this.createMenu.on('mousedown', 'td, th', (function(_this) {\r\n        return function(e) {\r\n          var $closestBlock, $td, $tr, colNum, rowNum;\r\n          _this.wrapper.removeClass('menu-on');\r\n          if (!_this.editor.editable.inputManager.focused) {\r\n            return;\r\n          }\r\n          $td = $(e.currentTarget);\r\n          $tr = $td.parent();\r\n          colNum = $tr.find('td').index($td) + 1;\r\n          rowNum = $tr.prevAll('tr').length + 1;\r\n          if ($tr.parent().is('tbody')) {\r\n            rowNum += 1;\r\n          }\r\n          $table = _this.createTable(rowNum, colNum, true);\r\n          $closestBlock = _this.editor.editable.selection.blockNodes().last();\r\n          if (_this.editor.editable.util.isEmptyNode($closestBlock)) {\r\n            $closestBlock.replaceWith($table);\r\n          } else {\r\n            $closestBlock.after($table);\r\n          }\r\n          _this.decorate($table);\r\n          _this.editor.editable.selection.setRangeAtStartOf($table.find('th:first'));\r\n          _this.editor.trigger('valuechanged');\r\n          return false;\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    decorate : function($table) {\r\n      return $(tables.decorate($table[0],{\r\n        tableDecorate : 'wordpad-table',\r\n        resizeHandle : 'wordpad-resize-handle'\r\n      }));\r\n\r\n    },\r\n\r\n    undecorate : function($table) {\r\n      return $(tables.undecorate($table[0],{\r\n        tableDecorate : 'wordpad-table',\r\n        resizeHandle : 'wordpad-resize-handle'\r\n      }));\r\n\r\n    },\r\n\r\n    createTable : function(row, col, phBr) {\r\n      return $(tables.createTable(row,col,phBr ? this.editor.editable.util.phBr : null));\r\n    },\r\n\r\n    refreshTableWidth : function($table) {\r\n      return table.refreshTableWidth($table[0]);\r\n    },\r\n\r\n    deleteRow : function($td) {\r\n      var self = this,\r\n          ret; \r\n\r\n      tables.deleteRow($td[0],function(newTr,index){\r\n        if (newTr) {\r\n          ret = self.editor.editable.selection.setRangeAtEndOf($(newTr).find('td, th').eq(index));\r\n        }\r\n      })\r\n\r\n      return ret;\r\n    },\r\n\r\n    insertRow : function($td, direction) {\r\n      var self = this,\r\n          ret; \r\n\r\n      tables.insertRow($td[0],direction,self.editor.editable.util.phBr,function(newTr,index){\r\n        ret =  self.editor.editable.selection.setRangeAtStartOf($(newTr).find('td, th').eq(index));\r\n      })\r\n\r\n      return ret;\r\n\r\n    },\r\n\r\n    deleteCol : function($td) {\r\n      var self = this,\r\n          ret; \r\n\r\n      tables.deleteCol($td[0],function(newTd){\r\n        if (newTd) {\r\n          ret = self.editor.editable.selection.setRangeAtEndOf($(newTd));\r\n        }\r\n      })\r\n\r\n      return ret;\r\n    },\r\n\r\n    insertCol : function($td, direction) {\r\n      var self = this,\r\n          ret; \r\n\r\n      tables.insertCol($td[0],direction,self.editor.editable.util.phBr,function(newTd){\r\n        ret = self.editor.editable.selection.setRangeAtStartOf($(newTd));\r\n      })\r\n\r\n      return ret;\r\n    },\r\n\r\n    deleteTable : function($td) {\r\n      var self = this;\r\n      tables.deleteTable($td[0],function($block){\r\n        if ($block.length > 0) {\r\n          return self.editor.editable.selection.setRangeAtStartOf($block);\r\n        }\r\n      });\r\n    },\r\n\r\n    _execute : function(param) {\r\n      var $td;\r\n      $td = this.editor.editable.selection.containerNode().closest('td, th');\r\n      if (!($td.length > 0)) {\r\n        return;\r\n      }\r\n      if (param === 'deleteRow') {\r\n        this.deleteRow($td);\r\n      } else if (param === 'insertRowAbove') {\r\n        this.insertRow($td, 'before');\r\n      } else if (param === 'insertRowBelow') {\r\n        this.insertRow($td);\r\n      } else if (param === 'deleteCol') {\r\n        this.deleteCol($td);\r\n      } else if (param === 'insertColLeft') {\r\n        this.insertCol($td, 'before');\r\n      } else if (param === 'insertColRight') {\r\n        this.insertCol($td);\r\n      } else if (param === 'deleteTable') {\r\n        this.deleteTable($td);\r\n      } else {\r\n        return;\r\n      }\r\n      return this.editor.trigger('valuechanged');\r\n    }\r\n\r\n   });\r\n\r\n\r\n  addons.actions.table = TableAction;\r\n\r\n  return TableAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/TitleAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"../../i18n\"\r\n],function($,addons,Action,i18n){ \r\n  var TitleAction = Action.inherit({\r\n    name : 'title',\r\n\r\n    htmlTag : 'h1, h2, h3, h4, h5',\r\n\r\n    icon : \"header\",\r\n\r\n    disableTag : 'pre, table',\r\n\r\n    _init : function() {\r\n      this.menu = [\r\n        {\r\n          name: 'normal',\r\n          text: i18n.translate('normalText'),\r\n          param: 'p'\r\n        }, '|', {\r\n          name: 'h1',\r\n          text: i18n.translate('title') + ' 1',\r\n          param: 'h1'\r\n        }, {\r\n          name: 'h2',\r\n          text: i18n.translate('title') + ' 2',\r\n          param: 'h2'\r\n        }, {\r\n          name: 'h3',\r\n          text: i18n.translate('title') + ' 3',\r\n          param: 'h3'\r\n        }, {\r\n          name: 'h4',\r\n          text: i18n.translate('title') + ' 4',\r\n          param: 'h4'\r\n        }, {\r\n          name: 'h5',\r\n          text: i18n.translate('title') + ' 5',\r\n          param: 'h5'\r\n        }\r\n      ];\r\n      return Action.prototype._init.call(this);\r\n    },\r\n\r\n    setActive : function(active, param) {\r\n      if (active) {\r\n        active = this.node[0].tagName.toLowerCase();\r\n      }\r\n      Action.prototype.setActive.call(this, active);\r\n    },\r\n\r\n    _execute : function(param) {\r\n      return this.editor.editable.title(param,this.disableTag);\r\n    }\r\n\r\n  });\r\n\r\n  addons.actions.title = TitleAction;\r\n\r\n  return TitleAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/UnderlineAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\"\r\n],function($,addons,Action){\r\n  var UnderlineAction = Action.inherit({\r\n    name : 'underline',\r\n\r\n    icon : 'underline',\r\n\r\n    htmlTag : 'u',\r\n\r\n    disableTag : 'pre',\r\n\r\n    shortcut : 'cmd+u',\r\n\r\n    render : function() {\r\n      if (this.editor.editable.util.os.mac) {\r\n        this.title = this.title + ' ( Cmd + u )';\r\n      } else {\r\n        this.title = this.title + ' ( Ctrl + u )';\r\n        this.shortcut = 'ctrl+u';\r\n      }\r\n      return Action.prototype.render.call(this);\r\n    },\r\n\r\n    _activeStatus : function() {\r\n      var active;\r\n      active = this.editor.editable.isActive('underline');\r\n      this.setActive(active);\r\n      return this.active;\r\n    },\r\n\r\n    _execute : function() {\r\n      return this.editor.editable.underline();\r\n    }\r\n\r\n   });\r\n\r\n\r\n  addons.actions.underline = UnderlineAction;\r\n\r\n  return UnderlineAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/UnorderListAction',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"./ListAction\"\r\n],function($,addons,ListAction){ \r\n   var UnorderListAction = ListAction.inherit({\r\n      type : 'ul',\r\n\r\n      name : 'ul',\r\n\r\n      icon : 'listul',\r\n\r\n      htmlTag : 'ul',\r\n\r\n      shortcut : 'cmd+.',\r\n\r\n      _init : function() {\r\n        if (this.editor.editable.util.os.mac) {\r\n          this.title = this.title + ' ( Cmd + . )';\r\n        } else {\r\n          this.title = this.title + ' ( Ctrl + . )';\r\n          this.shortcut = 'ctrl+.';\r\n        }\r\n        return ListAction.prototype._init.call(this);\r\n      }\r\n\r\n   });\r\n\r\n\r\n    addons.actions.ul = UnorderListAction;\r\n\r\n    return UnorderListAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/VideoPopover',[\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Popover\"\r\n],function($,addons,Popover){ \r\n  var VideoPopover = Popover.inherit({\r\n    offset : {\r\n      top: 6,\r\n      left: -4\r\n    },\r\n\r\n    _loadVideo : function(videoData, callback) {\r\n      if (videoData && this.target.attr('src') === videoData.src) {\r\n        return;\r\n      }\r\n      return $('.J_UploadVideoBtn').data('videowrap') && this.action.loadVideo($('.J_UploadVideoBtn').data('videowrap'), videoData, (function(_this) {\r\n        return function(img) {\r\n          if (!img) {\r\n\r\n          }\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    render : function() {\r\n      var tpl;\r\n      tpl = \"<div class=\\\"link-settings\\\">\\n  <div class=\\\"settings-field video-embed-code\\\">\\n    <label>\" + (this._t('video')) + \"</label>\\n    <textarea placeholder=\\\"\" + (this._t('videoPlaceholder')) + \"\\\" type=\\\"text\\\" class=\\\"video-link\\\" ></textarea>\\n  </div><br>\\n  <div class=\\\"settings-field\\\">\\n    <label>\" + (this._t('videoSize')) + \"</label>\\n    <input class=\\\"image-size video-size\\\" id=\\\"video-width\\\" type=\\\"text\\\" tabindex=\\\"2\\\" />\\n    <span class=\\\"times\\\">×</span>\\n    <input class=\\\"image-size video-size\\\" id=\\\"video-height\\\" type=\\\"text\\\" tabindex=\\\"3\\\" />\\n  </div>\\n  <div class=\\\"video-upload\\\">\\n    <button class=\\\"btn J_UploadVideoBtn\\\">\" + (this._t('uploadVideoBtn')) + \"</div>\\n  </div>\\n</div>\";\r\n      this.el.addClass('video-popover').append(tpl);\r\n      this.srcEl = this.el.find('.video-link');\r\n      this.widthEl = this.el.find('#video-width');\r\n      this.heightEl = this.el.find('#video-height');\r\n      this.el.find('.video-size').on('keydown', (function(_this) {\r\n        return function(e) {\r\n          if (e.which === 13 || e.which === 27) {\r\n            e.preventDefault();\r\n            return $('.J_UploadVideoBtn').click();\r\n          }\r\n        };\r\n      })(this));\r\n\r\n      this.srcEl.on('keydown', (function(_this) {\r\n        return function(e) {\r\n          if (e.which === 13 || e.which === 27) {\r\n            e.preventDefault();\r\n            return $('.J_UploadVideoBtn').click();\r\n          }\r\n        };\r\n      })(this));\r\n\r\n      return this.editor.on('valuechanged', (function(_this) {\r\n        return function(e) {\r\n          if (_this.active) {\r\n            return _this.refresh();\r\n          }\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    show : function() {\r\n      var $video, $videoWrap, args, videoData;\r\n      args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n      Popover.prototype.show.apply(this, args);\r\n      $video = arguments[0] || this.target;\r\n      this.width = $video.attr('data-width') || $video.width();\r\n      this.height = $video.attr('data-height') || $video.height();\r\n      if ($video.attr('data-link')) {\r\n        videoData = {\r\n          link: $video.attr('data-link'),\r\n          tag: $video.attr('data-tag'),\r\n          width: this.width,\r\n          height: this.height\r\n        };\r\n        this.src = videoData.link;\r\n      }\r\n      this.widthEl.val(this.width);\r\n      this.heightEl.val(this.height);\r\n      this.srcEl.val(this.src);\r\n      $('.J_UploadVideoBtn').data('videowrap', $video);\r\n      return $videoWrap = this.target;\r\n    }\r\n  });\r\n\r\n  return VideoPopover;\r\n});\ndefine('skylark-widgets-wordpad/addons/actions/VideoAction',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"../../addons\",\r\n  \"../../Action\",\r\n  \"./VideoPopover\"\r\n],function(langx,$,addons,Action,VideoPopover){ \r\n   var reUrlYoutube = /https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.-]*(?:['\"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/ig,\r\n      reUrlVimeo = /https?:\\/\\/(www\\.)?vimeo.com\\/(\\d+)($|\\/)/;\r\n\r\n   var VideoAction = Action.inherit({\r\n      name : 'video',\r\n\r\n      icon : 'video',\r\n\r\n      htmlTag : 'embed, iframe',\r\n\r\n      disableTag : 'pre, table, div',\r\n\r\n      videoPlaceholder : 'video',\r\n\r\n      videoContainerClass : 'video-container',\r\n\r\n      videoPoster : './video_poster.jpg ',\r\n\r\n      needFocus : true,\r\n\r\n      _init : function() {\r\n        this.title = this._t(this.name);\r\n        langx.merge(this.editor.editable.formatter._allowedTags, ['embed', 'iframe', 'video']);\r\n        langx.extend(this.editor.editable.formatter._allowedAttributes, {\r\n          embed: ['class', 'width', 'height', 'type', 'pluginspage', 'src', 'wmode', 'play', 'loop', 'menu', 'allowscriptaccess', 'allowfullscreen'],\r\n          iframe: ['class', 'width', 'height', 'src', 'frameborder'],\r\n          video: ['class', 'width', 'height', 'poster', 'controls', 'allowfullscreen', 'src', 'data-link', 'data-tag']\r\n        });\r\n\r\n        $(document).on('click', '.J_UploadVideoBtn', (function(_this) {\r\n          return function(e) {\r\n            var videoData;\r\n            videoData = {\r\n              link: $('.video-link').val(),\r\n              width: $('#video-width').val() || 100,\r\n              height: $('#video-height').val() || 100\r\n            };\r\n            $('.video-link').val('');\r\n            $('#video-width').val('');\r\n            $('#video-height').val('');\r\n            return _this._insert($('.J_UploadVideoBtn').data('videowrap'), videoData, function() {\r\n              return _this.editor.trigger('valuechanged');\r\n            });\r\n          };\r\n        })(this));\r\n\r\n        this.editor.body.on('click', '.wordpad-video-wrapper', (function(_this) {\r\n          return function(e) {\r\n            var $video = $(e.currentTarget).find('video,embed,iframe');//siblings('video').show();\r\n            return _this.popover.show($video);\r\n          };\r\n        })(this));\r\n        this.editor.body.on('mousedown', (function(_this) {\r\n          return function() {\r\n            var $videoWrap;\r\n            $videoWrap = $('.J_UploadVideoBtn').data('videowrap');\r\n            if ($videoWrap && $videoWrap.html() === _this.videoPlaceholder) {\r\n              $videoWrap.remove();\r\n              $('.J_UploadVideoBtn').data('videowrap', null);\r\n            }\r\n            return _this.popover.hide();\r\n          };\r\n        })(this));\r\n        this.editor.on('decorate', (function(_this) {\r\n          return function(e, $el) {\r\n            return $el.find('video,iframe,embed').each(function(i, video) {\r\n              return _this.decorate($(video));\r\n            });\r\n          };\r\n        })(this));\r\n        this.editor.on('undecorate', (function(_this) {\r\n          return function(e, $el) {\r\n            return $el.find('video,iframe,embed').each(function(i, video) {\r\n              return _this.undecorate($(video));\r\n            });\r\n          };\r\n        })(this));\r\n\r\n        this.popover = new VideoPopover({\r\n          action: this\r\n        });\r\n        return Action.prototype._init.call(this);\r\n      },\r\n\r\n\r\n      decorate : function($video) {\r\n        if ($video.parent('.wordpad-video-wrapper').length > 0) {\r\n          return;\r\n        }\r\n        $video.wrap('<figure class=\"wordpad-video-wrapper\"></figure>');\r\n        return $video.parent();\r\n      },\r\n\r\n      undecorate : function($video) {\r\n        if (!($video.parent('.wordpad-video-wrapper').length > 0)) {\r\n          return;\r\n        }\r\n        return $video.parent().replaceWith($video);\r\n      },\r\n\r\n      _execute : function() {\r\n        var $video = this._create();\r\n        return this.popover.show($video);\r\n      },\r\n\r\n      _status : function() {\r\n        return this._disableStatus();\r\n      },\r\n\r\n      _create : function() {\r\n        var $video, range;\r\n        if (!this.editor.editable.inputManager.focused) {\r\n          this.editor.focus();\r\n        }\r\n        range = this.editor.editable.selection.range();\r\n        if (range) {\r\n          range.deleteContents();\r\n          this.editor.editable.selection.range(range);\r\n        }\r\n        $video = $('<video/>').attr({\r\n          'poster': this.videoPoster,\r\n          'width': 500,\r\n          'height': 281,\r\n          'class' : 'wordpad-video'\r\n        });\r\n        range.insertNode($video[0]);\r\n        this.editor.editable.selection.setRangeAfter($video, range);\r\n        this.editor.trigger('valuechanged');\r\n        this.decorate($video);\r\n        return $video;\r\n      },\r\n\r\n      _insert : function($video, videoData, callback) {\r\n        var e, originNode, realVideo, videoLink, videoTag;\r\n        if (!videoData.link) {\r\n          this._remove($video);\r\n        } else {\r\n          var data = videoData.link;\r\n          if (!data.match(/<iframe|<video|<embed/gi)) {\r\n            // parse if it is link on youtube & vimeo\r\n            var iframeStart = '<iframe style=\"width: 500px; height: 281px;\" src=\"',\r\n              iframeEnd = '\" frameborder=\"0\" allowfullscreen></iframe>';\r\n\r\n            if (data.match(reUrlYoutube))    {\r\n              data = data.replace(reUrlYoutube, iframeStart + 'https://www.youtube.com/embed/$1' + iframeEnd);\r\n            } else if (data.match(reUrlVimeo)) {\r\n              data = data.replace(reUrlVimeo, iframeStart + 'https://player.vimeo.com/video/$2' + iframeEnd);\r\n            }\r\n          }\r\n          var $video1 = $(data).style({\r\n            width : videoData.width + \"px\",\r\n            height : videoData.height + \"px\"\r\n          }).attr({\r\n            \"data-link\" : videoData.link,\r\n            \"data-width\" : videoData.width,\r\n            \"data-height\" : videoData.height\r\n          });\r\n          \r\n          $video.replaceWith($video1);\r\n          $video = $video1;\r\n        }\r\n        this.popover.hide();\r\n        return callback($video);\r\n      },\r\n\r\n      _remove : function($video) {\r\n        $video.parent().remove();\r\n      }\r\n\r\n   });\r\n\r\n\r\n   addons.actions.video = VideoAction; \r\n\r\n   return VideoAction;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/toolbar/items/AlignmentButton',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"../../../ToolButton\",\r\n  \"../../../i18n\",\r\n  \"../../../addons\"\r\n],function(langx,$,ToolButton,i18n,addons){ \r\n\r\n var AlignmentButton = ToolButton.inherit({\r\n    _doActive : function(align) {\r\n\r\n      ToolButton.prototype._doActive.call(this, !!align);\r\n\r\n      this.el.removeClass('alignLeft alignCenter alignRight');\r\n      if (align) {\r\n        this.el.addClass('align' + langx.upperFirst(align));\r\n      }\r\n      this.setIcon('align' + langx.upperFirst(align));\r\n      return this.menuEl.find('.menu-item').show().end().find('.menu-item-' + align).hide();\r\n\r\n    }\r\n\r\n  });\r\n\r\n\r\n  addons.toolbar.items.alignment = AlignmentButton;\r\n\r\n  return AlignmentButton;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/toolbar/items/ColorButton',[\r\n  \"skylark-domx-query\",\r\n  \"../../../ToolButton\",\r\n  \"../../../i18n\",\r\n  \"../../../addons\"\r\n],function($,ToolButton,i18n,addons){ \r\n  \r\n\r\n   var ColorButton = ToolButton.inherit({\r\n    render : function() {\r\n      var args;\r\n      args = 1 <= arguments.length ? Array.prototype.slice.call(arguments, 0) : [];\r\n      return ToolButton.prototype.render.apply(this, args);\r\n    },\r\n\r\n    renderMenu : function() {\r\n      $('<ul class=\"color-list\">\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-1\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-2\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-3\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-4\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-5\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-6\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-7\"></a></li>\\n  <li><a href=\"javascript:;\" class=\"font-color font-color-default\"></a></li>\\n</ul>').appendTo(this.menuWrapper);\r\n      this.menuWrapper.on('mousedown', '.color-list', function(e) {\r\n        return false;\r\n      });\r\n      return this.menuWrapper.on('click', '.font-color', (function(_this) {\r\n        return function(e) {\r\n          var $link, $p, hex, range, rgb, textNode;\r\n          _this.wrapper.removeClass('menu-on');\r\n          $link = $(e.currentTarget);\r\n          if ($link.hasClass('font-color-default')) {\r\n            $p = _this.editor.body.find('p, li');\r\n            if (!($p.length > 0)) {\r\n              return;\r\n            }\r\n            rgb = window.getComputedStyle($p[0], null).getPropertyValue('color');\r\n            hex = _this._convertRgbToHex(rgb);\r\n          } else {\r\n            rgb = window.getComputedStyle($link[0], null).getPropertyValue('background-color');\r\n            hex = _this._convertRgbToHex(rgb);\r\n          }\r\n          if (!hex) {\r\n            return;\r\n          }\r\n\r\n          return _this.editor.editable.fontColor(hex,$link.hasClass('font-color-default'),i18n.translate('coloredText'));\r\n        };\r\n      })(this));\r\n    },\r\n\r\n    _convertRgbToHex : function(rgb) {\r\n      var match, re, rgbToHex;\r\n      re = /rgb\\((\\d+),\\s?(\\d+),\\s?(\\d+)\\)/g;\r\n      match = re.exec(rgb);\r\n      if (!match) {\r\n        return '';\r\n      }\r\n      rgbToHex = function(r, g, b) {\r\n        var componentToHex;\r\n        componentToHex = function(c) {\r\n          var hex;\r\n          hex = c.toString(16);\r\n          if (hex.length === 1) {\r\n            return '0' + hex;\r\n          } else {\r\n            return hex;\r\n          }\r\n        };\r\n        return \"#\" + componentToHex(r) + componentToHex(g) + componentToHex(b);\r\n      };\r\n      return rgbToHex(match[1] * 1, match[2] * 1, match[3] * 1);\r\n    }\r\n\r\n   });\r\n\r\n   \r\n   addons.toolbar.items.color = ColorButton; \r\n\r\n\r\n   return ColorButton;\r\n\t\r\n});\ndefine('skylark-widgets-wordpad/addons/toolbar/items/EmojiButton',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"../../../ToolButton\",\r\n  \"../../../i18n\",\r\n  \"../../../addons\"\r\n],function(langx, $,ToolButton,i18n,addons){ \r\n\r\n  var EmojiButton = ToolButton.inherit({\r\n\r\n    renderMenu : function() {\r\n      var $list, dir, html, name, opts, src, tpl, _i, _len, _ref;\r\n      tpl = '<ul class=\"emoji-list\">\\n</ul>';\r\n      opts = langx.extend({\r\n        imagePath: 'images/emoji/',\r\n        images: EmojiButton.images\r\n      }, this.editor.opts.emoji || {});\r\n      html = \"\";\r\n      dir = opts.imagePath.replace(/\\/$/, '') + '/';\r\n      _ref = opts.images;\r\n      for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n        name = _ref[_i];\r\n        src = \"\" + dir + name;\r\n        name = name.split('.')[0];\r\n        html += \"<li data-name='\" + name + \"'><img src='\" + src + \"' width='20' height='20' alt='\" + name + \"' /></li>\";\r\n      }\r\n      $list = $(tpl);\r\n      $list.html(html).appendTo(this.menuWrapper);\r\n      return $list.on('mousedown', 'li', (function(_this) {\r\n        return function(e) {\r\n          var $img;\r\n          _this.wrapper.removeClass('menu-on');\r\n          if (!_this.editor.editable.inputManager.focused) {\r\n            return;\r\n          }\r\n          $img = $(e.currentTarget).find('img').clone().attr({\r\n            'data-emoji': true,\r\n            'data-non-image': true\r\n          });\r\n          _this.editor.editable.selection.insertNode($img);\r\n          _this.editor.trigger('valuechanged');\r\n          _this.editor.trigger('selectionchanged');\r\n          return false;\r\n        };\r\n      })(this));\r\n    }\r\n\r\n  });\r\n\r\n\r\n  EmojiButton.i18n = {\r\n    'zh-CN': {\r\n      emoji: '表情'\r\n    },\r\n    'en-US': {\r\n      emoji: 'emoji'\r\n    }\r\n  };\r\n\r\n  EmojiButton.images = ['smile.png', 'smiley.png', 'laughing.png', 'blush.png', 'heart_eyes.png', 'smirk.png', 'flushed.png', 'grin.png', 'wink.png', 'kissing_closed_eyes.png', 'stuck_out_tongue_winking_eye.png', 'stuck_out_tongue.png', 'sleeping.png', 'worried.png', 'expressionless.png', 'sweat_smile.png', 'cold_sweat.png', 'joy.png', 'sob.png', 'angry.png', 'mask.png', 'scream.png', 'sunglasses.png', 'heart.png', 'broken_heart.png', 'star.png', 'anger.png', 'exclamation.png', 'question.png', 'zzz.png', 'thumbsup.png', 'thumbsdown.png', 'ok_hand.png', 'punch.png', 'v.png', 'clap.png', 'muscle.png', 'pray.png', 'skull.png', 'trollface.png'];\r\n\r\n\r\n  addons.toolbar.items.emoji = EmojiButton; \r\n\r\n  return EmojiButton;\r\n\t\r\n});\ndefine('skylark-widgets-wordpad/addons/toolbar/items/TableButton',[\r\n  \"skylark-langx/langx\",\r\n  \"skylark-domx-query\",\r\n  \"../../../ToolButton\",\r\n  \"../../../i18n\",\r\n  \"../../../addons\"\r\n],function(langx, $,ToolButton,i18n,addons){ \r\n\r\n  var TableButton = ToolButton.inherit({\r\n    _doActive : function(active) {\r\n\r\n      ToolButton.prototype._doActive.call(this, active);\r\n\r\n      if (active) {\r\n        this.createMenu.hide();\r\n        return this.editMenu.show();\r\n      } else {\r\n        this.createMenu.show();\r\n        return this.editMenu.hide();\r\n      }\r\n\r\n    }\r\n   });\r\n\r\n\r\n  TableButton.prototype.renderMenu = function() {\r\n    var $table;\r\n    $(\"<div class=\\\"menu-create-table\\\">\\n</div>\\n<div class=\\\"menu-edit-table\\\">\\n  <ul>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteRow\\\">\\n        <span>\" + (i18n.translate('deleteRow')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowAbove\\\">\\n        <span>\" + (i18n.translate('insertRowAbove')) + \" ( Ctrl + Alt + ↑ )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertRowBelow\\\">\\n        <span>\" + (i18n.translate('insertRowBelow')) + \" ( Ctrl + Alt + ↓ )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteCol\\\">\\n        <span>\" + (i18n.translate('deleteColumn')) + \"</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColLeft\\\">\\n        <span>\" + (i18n.translate('insertColumnLeft')) + \" ( Ctrl + Alt + ← )</span>\\n      </a>\\n    </li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"insertColRight\\\">\\n        <span>\" + (i18n.translate('insertColumnRight')) + \" ( Ctrl + Alt + → )</span>\\n      </a>\\n    </li>\\n    <li><span class=\\\"separator\\\"></span></li>\\n    <li>\\n      <a tabindex=\\\"-1\\\" unselectable=\\\"on\\\" class=\\\"menu-item\\\"\\n        href=\\\"javascript:;\\\" data-param=\\\"deleteTable\\\">\\n        <span>\" + (i18n.translate('deleteTable')) + \"</span>\\n      </a>\\n    </li>\\n  </ul>\\n</div>\").appendTo(this.menuWrapper);\r\n    this.createMenu = this.menuWrapper.find('.menu-create-table');\r\n    this.editMenu = this.menuWrapper.find('.menu-edit-table');\r\n    $table = this.action.createTable(6, 6).appendTo(this.createMenu);\r\n    this.createMenu.on('mouseenter', 'td, th', (function(_this) {\r\n      return function(e) {\r\n        var $td, $tr, $trs, num;\r\n        _this.createMenu.find('td, th').removeClass('selected');\r\n        $td = $(e.currentTarget);\r\n        $tr = $td.parent();\r\n        num = $tr.find('td, th').index($td) + 1;\r\n        $trs = $tr.prevAll('tr').addBack();\r\n        if ($tr.parent().is('tbody')) {\r\n          $trs = $trs.add($table.find('thead tr'));\r\n        }\r\n        return $trs.find(\"td:lt(\" + num + \"), th:lt(\" + num + \")\").addClass('selected');\r\n      };\r\n    })(this));\r\n    this.createMenu.on('mouseleave', function(e) {\r\n      return $(e.currentTarget).find('td, th').removeClass('selected');\r\n    });\r\n    return this.createMenu.on('mousedown', 'td, th', (function(_this) {\r\n      return function(e) {\r\n        var $closestBlock, $td, $tr, colNum, rowNum;\r\n        _this.wrapper.removeClass('menu-on');\r\n        if (!_this.editor.editable.inputManager.focused) {\r\n          return;\r\n        }\r\n        $td = $(e.currentTarget);\r\n        $tr = $td.parent();\r\n        colNum = $tr.find('td').index($td) + 1;\r\n        rowNum = $tr.prevAll('tr').length + 1;\r\n        if ($tr.parent().is('tbody')) {\r\n          rowNum += 1;\r\n        }\r\n        $table = _this.action.createTable(rowNum, colNum, true);\r\n        $closestBlock = _this.editor.editable.selection.blockNodes().last();\r\n        if (_this.editor.editable.util.isEmptyNode($closestBlock)) {\r\n          $closestBlock.replaceWith($table);\r\n        } else {\r\n          $closestBlock.after($table);\r\n        }\r\n        _this.action.decorate($table);\r\n        _this.editor.editable.selection.setRangeAtStartOf($table.find('th:first'));\r\n        _this.editor.trigger('valuechanged');\r\n        return false;\r\n      };\r\n    })(this));\r\n  };\r\n\r\n\r\n  addons.toolbar.items.table = TableButton;\r\n\r\n  return TableButton;\r\n\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/toolbar/items/TitleButton',[\r\n  \"skylark-domx-query\",\r\n  \"../../../ToolButton\",\r\n  \"../../../addons\"\r\n],function($,ToolButton,addons){ \r\n  var TitleButton = ToolButton.inherit({\r\n      _doActive : function(value) {\r\n        var active = !!value,\r\n            param = value;\r\n        ToolButton.prototype._doActive.call(this, active);\r\n\r\n        if (active) {\r\n          param || (param = this.node[0].tagName.toLowerCase());\r\n        }\r\n        this.el.removeClass('active-p active-h1 active-h2 active-h3 active-h4 active-h5');\r\n        if (active) {\r\n          return this.el.addClass('active active-' + param);\r\n        }\r\n      }\r\n   });\r\n\r\n\r\n  addons.toolbar.items.title = TitleButton;\r\n\r\n  return TitleButton;\r\n\r\n});\ndefine('skylark-widgets-base/Addon',[\r\n  \"skylark-langx/langx\",\t\r\n  \"skylark-langx/Evented\",\r\n\t\"./base\"\r\n],function(langx,Evented,base){\r\n\r\n\tvar Addon = Evented.inherit({\r\n\r\n\t\t_construct : function(widget,options) {\r\n\t\t\tthis._widget = widget;\r\n            Object.defineProperty(this,\"options\",{\r\n              value :langx.mixin({},this.options,options,true)\r\n            });\r\n\t\t\tif (this._init) {\r\n\t\t\t\tthis._init();\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t});\r\n\r\n\tAddon.register = function(Widget) {\r\n\t\tvar categoryName = this.categoryName,\r\n\t\t\taddonName = this.addonName;\r\n\r\n\t\tif (categoryName && addonName) {\r\n\t\t\tWidget.addons = Widget.addons || {};\r\n\t\t\tWidget.addons[categoryName] = Widget.addons[categoryName] || {};\r\n\t\t\tWidget.addons[categoryName][addonName] = this;\r\n\t\t}\r\n\t};\r\n\r\n\treturn base.Addon = Addon;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/AutoSave',[\r\n  \"skylark-domx-query\",\r\n  \"skylark-widgets-base/Addon\",\r\n  \"../Toolbar\",\r\n  \"../Wordpad\",\r\n  \"../i18n\"\r\n],function($,Addon, Toolbar,Wordpad,i18n){ \r\n\r\n\r\n  var AutoSave = Addon.inherit({\r\n    needFocus : false,\r\n\r\n    _init : function() {\r\n\r\n\t    var currentVal, link, name, val;\r\n\t    this.editor = this._module;\r\n\t    if (!this.opts.autosave) {\r\n\t      return;\r\n\t    }\r\n\t    this.name = typeof this.opts.autosave === 'string' ? this.opts.autosave : 'simditor';\r\n\t    if (this.opts.autosavePath) {\r\n\t      this.path = this.opts.autosavePath;\r\n\t    } else {\r\n\t      link = $(\"<a/>\", {\r\n\t        href: location.href\r\n\t      });\r\n\t      name = this.editor.textarea.data('autosave') || this.name;\r\n\t      this.path = \"/\" + (link[0].pathname.replace(/\\/$/g, \"\").replace(/^\\//g, \"\")) + \"/autosave/\" + name + \"/\";\r\n\t    }\r\n\t    if (!this.path) {\r\n\t      return;\r\n\t    }\r\n\t    this.editor.on(\"valuechanged\", (function(_this) {\r\n\t      return function() {\r\n\t        return _this.storage.set(_this.path, _this.editor.getValue());\r\n\t      };\r\n\t    })(this));\r\n\t    this.editor.el.closest('form').on('ajax:success.simditor-' + this.editor.id, (function(_this) {\r\n\t      return function(e) {\r\n\t        return _this.storage.remove(_this.path);\r\n\t      };\r\n\t    })(this));\r\n\t    val = this.storage.get(this.path);\r\n\t    if (!val) {\r\n\t      return;\r\n\t    }\r\n\t    currentVal = this.editor.textarea.val();\r\n\t    if (val === currentVal) {\r\n\t      return;\r\n\t    }\r\n\t    if (this.editor.textarea.is('[data-autosave-confirm]')) {\r\n\t      if (confirm(this.editor.textarea.data('autosave-confirm') || 'Are you sure to restore unsaved changes?')) {\r\n\t        return this.editor.setValue(val);\r\n\t      } else {\r\n\t        return this.storage.remove(this.path);\r\n\t      }\r\n\t    } else {\r\n\t      return this.editor.setValue(val);\r\n\t    }\r\n\r\n    }\r\n\r\n  });\r\n\r\n\r\n  AutoSave.categoryName = \"general\";\r\n  AutoSave.addonName = 'autosave';\r\n\r\n  AutoSave.prototype.opts = {\r\n    autosave: true,\r\n    autosavePath: null\r\n  };\r\n\r\n\r\n  AutoSave.prototype.storage = {\r\n    supported: function() {\r\n      var error;\r\n      try {\r\n        localStorage.setItem('_storageSupported', 'yes');\r\n        localStorage.removeItem('_storageSupported');\r\n        return true;\r\n      } catch (_error) {\r\n        error = _error;\r\n        return false;\r\n      }\r\n    },\r\n    set: function(key, val, session) {\r\n      var storage;\r\n      if (session == null) {\r\n        session = false;\r\n      }\r\n      if (!this.supported()) {\r\n        return;\r\n      }\r\n      storage = session ? sessionStorage : localStorage;\r\n      return storage.setItem(key, val);\r\n    },\r\n    get: function(key, session) {\r\n      var storage;\r\n      if (session == null) {\r\n        session = false;\r\n      }\r\n      if (!this.supported()) {\r\n        return;\r\n      }\r\n      storage = session ? sessionStorage : localStorage;\r\n      return storage[key];\r\n    },\r\n    remove: function(key, session) {\r\n      var storage;\r\n      if (session == null) {\r\n        session = false;\r\n      }\r\n      if (!this.supported()) {\r\n        return;\r\n      }\r\n      storage = session ? sessionStorage : localStorage;\r\n      return storage.removeItem(key);\r\n    }\r\n  };\r\n\r\n  return Wordpad.addons.general.autoSave = AutoSave;\r\n\r\n});\ndefine('skylark-widgets-wordpad/addons/Dropzone',[\r\n  \"skylark-domx-query\",\r\n  \"skylark-widgets-base/Addon\",\r\n  \"../Toolbar\",\r\n  \"../Wordpad\",\r\n  \"../i18n\"\r\n],function($,Addon, Toolbar,Wordpad,i18n){ \r\n\r\n\r\n  var Dropzone = Addon.inherit({\r\n  });\r\n\r\n  Dropzone.categoryName = \"genernal\";\r\n\r\n  Dropzone.addonName = \"dropzone\";\r\n\r\n\r\n  Dropzone.prototype._entered = 0;\r\n\r\n  Dropzone.prototype._init = function() {\r\n    this.editor = this._widget;\r\n    if (this.editor.uploader == null) {\r\n      //throw new Error(\"Can't work without 'simple-uploader' module\");\r\n      return;\r\n    }\r\n    $(document.body).on(\"dragover\", function(e) {\r\n      e.originalEvent.dataTransfer.dropEffect = \"none\";\r\n      return e.preventDefault();\r\n    });\r\n    $(document.body).on('drop', function(e) {\r\n      return e.preventDefault();\r\n    });\r\n    this.imageBtn = this.editor.toolbar.findButton(\"image\");\r\n    return this.editor.body.on(\"dragover\", function(e) {\r\n      e.originalEvent.dataTransfer.dropEffect = \"copy\";\r\n      e.stopPropagation();\r\n      return e.preventDefault();\r\n    }).on(\"dragenter\", (function(_this) {\r\n      return function(e) {\r\n        if ((_this._entered += 1) === 1) {\r\n          _this.show();\r\n        }\r\n        e.preventDefault();\r\n        return e.stopPropagation();\r\n      };\r\n    })(this)).on(\"dragleave\", (function(_this) {\r\n      return function(e) {\r\n        if ((_this._entered -= 1) <= 0) {\r\n          _this.hide();\r\n        }\r\n        e.preventDefault();\r\n        return e.stopPropagation();\r\n      };\r\n    })(this)).on(\"drop\", (function(_this) {\r\n      return function(e) {\r\n        var file, imageFiles, _i, _j, _len, _len1, _ref;\r\n        imageFiles = [];\r\n        _ref = e.originalEvent.dataTransfer.files;\r\n        for (_i = 0, _len = _ref.length; _i < _len; _i++) {\r\n          file = _ref[_i];\r\n          if (!_this.validFile(file)) {\r\n            alert(\"「\" + file.name + \"]」文件不是图片。\");\r\n            _this.hide();\r\n            return false;\r\n          }\r\n          imageFiles.push(file);\r\n        }\r\n        for (_j = 0, _len1 = imageFiles.length; _j < _len1; _j++) {\r\n          file = imageFiles[_j];\r\n          _this.editor.uploader.upload(file, {\r\n            inline: true\r\n          });\r\n        }\r\n        _this.hide();\r\n        e.stopPropagation();\r\n        return e.preventDefault();\r\n      };\r\n    })(this));\r\n  };\r\n\r\n  Dropzone.prototype.show = function() {\r\n    return this.imageBtn.setActive(true);\r\n  };\r\n\r\n  Dropzone.prototype.hide = function() {\r\n    this.imageBtn.setActive(false);\r\n    return this._entered = 0;\r\n  };\r\n\r\n  Dropzone.prototype.validFile = function(file) {\r\n    return file.type.indexOf(\"image/\") > -1;\r\n  };\r\n\r\n  return Wordpad.addons.general.dropzone = Dropzone;\r\n\r\n\r\n});\ndefine('skylark-widgets-wordpad/main',[\r\n  \"./Wordpad\", \r\n  \"./Action\",\r\n  \"./Popover\",\r\n  \"./Toolbar\",\r\n  \"./ToolButton\", \r\n\r\n  \"./addons/actions/AlignmentAction\", \r\n  \"./addons/actions/BlockquoteAction\", \r\n  \"./addons/actions/BoldAction\", \r\n  \"./addons/actions/CodeAction\", \r\n  \"./addons/actions/CodePopover\", \r\n  \"./addons/actions/ColorAction\", \r\n  \"./addons/actions/EmojiAction\", \r\n  \"./addons/actions/FontScaleAction\", \r\n  \"./addons/actions/FullScreenAction\", \r\n  \"./addons/actions/HrAction\", \r\n  \"./addons/actions/HtmlAction\", \r\n  \"./addons/actions/ImageAction\", \r\n  \"./addons/actions/ImagePopover\", \r\n  \"./addons/actions/IndentAction\", \r\n  \"./addons/actions/ItalicAction\", \r\n  \"./addons/actions/LinkAction\", \r\n  \"./addons/actions/LinkPopover\", \r\n  \"./addons/actions/ListAction\", \r\n  \"./addons/actions/MarkAction\", \r\n  \"./addons/actions/OrderListAction\", \r\n  \"./addons/actions/OutdentAction\",\r\n  \"./addons/actions/StrikethroughAction\", \r\n  \"./addons/actions/TableAction\", \r\n  \"./addons/actions/TitleAction\", \r\n  \"./addons/actions/UnderlineAction\", \r\n  \"./addons/actions/UnorderListAction\",\r\n  \"./addons/actions/VideoAction\",\r\n\r\n  \"./addons/toolbar/items/AlignmentButton\",\r\n  \"./addons/toolbar/items/ColorButton\",\r\n  \"./addons/toolbar/items/EmojiButton\",\r\n  \"./addons/toolbar/items/TableButton\",\r\n  \"./addons/toolbar/items/TitleButton\",\r\n\r\n  \"./addons/AutoSave\",\r\n  \"./addons/Dropzone\"\r\n],function(Wordpad){\r\n\t\r\n  return Wordpad;\r\n});\ndefine('skylark-widgets-wordpad', ['skylark-widgets-wordpad/main'], function (main) { return main; });\n\n"]}