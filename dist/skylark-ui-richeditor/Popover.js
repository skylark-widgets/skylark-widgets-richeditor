/**
 * skylark-ui-richeditor - The skylark richeditor widget
 * @author Hudaokeji, Inc.
 * @version v0.9.0
 * @link https://github.com/skylarkui/skylark-ui-richeditor/
 * @license MIT
 */
define(["skylark-langx/langx","skylark-utils-dom/query","./RichEditor","./i18n"],function(t,e,i,r){var o=t.Evented.inherit({init:function(t){this.button=t.button,this.editor=t.button.editor,this._init()}});return o.prototype.offset={top:4,left:0},o.prototype.target=null,o.prototype.active=!1,o.prototype._init=function(){var t;return this.el=e('<div class="richeditor-popover"></div>').appendTo(this.editor.el).data("popover",this),this.render(),this.el.on("mouseenter",(t=this,function(e){return t.el.addClass("hover")})),this.el.on("mouseleave",function(t){return function(e){return t.el.removeClass("hover")}}(this))},o.prototype.render=function(){},o.prototype._initLabelWidth=function(){var t,i;if((t=this.el.find(".settings-field")).length>0)return this._labelWidth=0,t.each((i=this,function(t,r){var o;if((o=e(r).find("label")).length>0)return i._labelWidth=Math.max(i._labelWidth,o.width())})),t.find("label").width(this._labelWidth)},o.prototype.show=function(t,i){if(null==i&&(i="bottom"),null!=t)return this.el.siblings(".richeditor-popover").each(function(t,i){if((i=e(i).data("popover")).active)return i.hide()}),this.active&&this.target&&this.target.removeClass("selected"),this.target=t.addClass("selected"),this.active?(this.refresh(i),this.trigger("popovershow")):(this.active=!0,this.el.css({left:-9999}).show(),this._labelWidth||this._initLabelWidth(),this.editor.editable.util.reflow(),this.refresh(i),this.trigger("popovershow"))},o.prototype.hide=function(){if(this.active)return this.target&&this.target.removeClass("selected"),this.target=null,this.active=!1,this.el.hide(),this.trigger("popoverhide")},o.prototype.refresh=function(t){var e,i,r,o,s,h;if(null==t&&(t="bottom"),this.active)return e=this.editor.el.offset(),s=this.target.offset(),o=this.target.outerHeight(),"bottom"===t?h=s.top-e.top+o:"top"===t&&(h=s.top-e.top-this.el.height()),r=this.editor.wrapper.width()-this.el.outerWidth()-10,i=Math.min(s.left-e.left,r),this.el.css({top:h+this.offset.top,left:i+this.offset.left})},o.prototype.destroy=function(){return this.target=null,this.active=!1,this.editor.off(".linkpopover"),this.el.remove()},o.prototype._t=function(t){var e;return e=1<=arguments.length?Array.prototype.slice.call(arguments,0):[],r.translate.apply(r,e)},i.Popover=o,o});
//# sourceMappingURL=sourcemaps/Popover.js.map
