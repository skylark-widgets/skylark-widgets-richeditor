{"version":3,"sources":["addons/video.js"],"names":["$","Redactor","prototype","video","reUrlYoutube","reUrlVimeo","langs","en","video-html-code","zh-CN","ja","getTemplate","String","this","lang","get","init","button","addAfter","addCallback","show","modal","addTemplate","load","getActionButton","text","on","insert","detect","isDesktop","setTimeout","focus","data","val","match","clean","stripTags","opts","videoContainerClass","iframeStart","iframeEnd","replace","close","placeholder","hide","buffer","set","air","collapsed","html","jQuery"],"mappings":";;;;;;;CAAA,SAAUA,GAETA,EAAEC,SAASC,UAAUC,MAAQ,WAE5B,OACCC,aAAc,mJACdC,WAAY,4CACZC,OACCC,IACCJ,MAAS,QACTK,kBAAmB,oBAEpBC,SACCN,MAAS,KACTK,kBAAmB,UAEpBE,IACCP,MAAS,MACTK,kBAAmB,eAGrBG,YAAa,WAEZ,OAAOC,SACL,+EAEcC,KAAKC,KAAKC,IAAI,mBAAqB,6OASpDC,KAAM,WAEL,IAAIC,EAASJ,KAAKI,OAAOC,SAAS,QAAS,QAASL,KAAKC,KAAKC,IAAI,UAClEF,KAAKI,OAAOE,YAAYF,EAAQJ,KAAKV,MAAMiB,OAE5CA,KAAM,WAELP,KAAKQ,MAAMC,YAAY,QAAST,KAAKV,MAAMQ,eAE3CE,KAAKQ,MAAME,KAAK,QAASV,KAAKC,KAAKC,IAAI,SAAU,KAGjDF,KAAKQ,MAAMG,kBAAkBC,KAAKZ,KAAKC,KAAKC,IAAI,WAAWW,GAAG,QAASb,KAAKV,MAAMwB,QAClFd,KAAKQ,MAAMD,OAGPP,KAAKe,OAAOC,aAEfC,WAAW,WAEV9B,EAAE,+BAA+B+B,SAE/B,IAKLJ,OAAQ,WAEP,IAAIK,EAAOhC,EAAE,+BAA+BiC,MAE5C,IAAKD,EAAKE,MAAM,oBAChB,CACCF,EAAOnB,KAAKsB,MAAMC,UAAUJ,GAE5BnB,KAAKwB,KAAKC,yBAAgE,IAAlCzB,KAAKwB,KAAKC,oBAAuC,kBAAoBzB,KAAKwB,KAAKC,oBAGvH,IAAIC,EAAc,eAAiB1B,KAAKwB,KAAKC,oBAAsB,uDAClEE,EAAY,oDAETR,EAAKE,MAAMrB,KAAKV,MAAMC,cAEzB4B,EAAOA,EAAKS,QAAQ5B,KAAKV,MAAMC,aAAcmC,EAAc,6BAA+BC,GAElFR,EAAKE,MAAMrB,KAAKV,MAAME,cAE9B2B,EAAOA,EAAKS,QAAQ5B,KAAKV,MAAME,WAAYkC,EAAc,8BAAgCC,IAI3F3B,KAAKQ,MAAMqB,QACX7B,KAAK8B,YAAYC,OAGjB/B,KAAKgC,OAAOC,MAGZjC,KAAKkC,IAAIC,YACTnC,KAAKc,OAAOsB,KAAKjB,MA9FrB,CAoGGkB","file":"../../addons/video.js","sourcesContent":["(function($)\r\n{\r\n\t$.Redactor.prototype.video = function()\r\n\t{\r\n\t\treturn {\r\n\t\t\treUrlYoutube: /https?:\\/\\/(?:[0-9A-Z-]+\\.)?(?:youtu\\.be\\/|youtube\\.com\\S*[^\\w\\-\\s])([\\w\\-]{11})(?=[^\\w\\-]|$)(?![?=&+%\\w.-]*(?:['\"][^<>]*>|<\\/a>))[?=&+%\\w.-]*/ig,\r\n\t\t\treUrlVimeo: /https?:\\/\\/(www\\.)?vimeo.com\\/(\\d+)($|\\/)/,\r\n\t\t\tlangs: {\r\n\t\t\t\ten: {\r\n\t\t\t\t\t\"video\": \"Video\",\r\n\t\t\t\t\t\"video-html-code\": \"Video Embed Code\"\r\n\t\t\t\t},\r\n\t\t\t\t\"zh-CN\": {\r\n\t\t\t\t\t\"video\": \"视屏\",\r\n\t\t\t\t\t\"video-html-code\": \"视频嵌入代码\"\r\n\t\t\t\t},\r\n\t\t\t\t\"ja\": {\r\n\t\t\t\t\t\"video\": \"ビデオ\",\r\n\t\t\t\t\t\"video-html-code\": \"ビデオ埋め込みコード\"\r\n\t\t\t\t}\t\t\t\r\n\t\t\t},\r\n\t\t\tgetTemplate: function()\r\n\t\t\t{\r\n\t\t\t\treturn String()\r\n\t\t\t\t+ '<div class=\"modal-section\" id=\"redactor-modal-video-insert\">'\r\n\t\t\t\t\t+ '<section>'\r\n\t\t\t\t\t\t+ '<label>' + this.lang.get('video-html-code') + '</label>'\r\n\t\t\t\t\t\t+ '<textarea id=\"redactor-insert-video-area\" style=\"height: 160px;\"></textarea>'\r\n\t\t\t\t\t+ '</section>'\r\n\t\t\t\t\t+ '<section>'\r\n\t\t\t\t\t\t+ '<button id=\"redactor-modal-button-action\">Insert</button>'\r\n\t\t\t\t\t\t+ '<button id=\"redactor-modal-button-cancel\">Cancel</button>'\r\n\t\t\t\t\t+ '</section>'\r\n\t\t\t\t+ '</div>';\r\n\t\t\t},\r\n\t\t\tinit: function()\r\n\t\t\t{\r\n\t\t\t\tvar button = this.button.addAfter('image', 'video', this.lang.get('video'));\r\n\t\t\t\tthis.button.addCallback(button, this.video.show);\r\n\t\t\t},\r\n\t\t\tshow: function()\r\n\t\t\t{\r\n\t\t\t\tthis.modal.addTemplate('video', this.video.getTemplate());\r\n\r\n\t\t\t\tthis.modal.load('video', this.lang.get('video'), 700);\r\n\r\n\t\t\t\t// action button\r\n\t\t\t\tthis.modal.getActionButton().text(this.lang.get('insert')).on('click', this.video.insert);\r\n\t\t\t\tthis.modal.show();\r\n\r\n\t\t\t\t// focus\r\n\t\t\t\tif (this.detect.isDesktop())\r\n\t\t\t\t{\r\n\t\t\t\t\tsetTimeout(function()\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\t$('#redactor-insert-video-area').focus();\r\n\r\n\t\t\t\t\t}, 1);\r\n\t\t\t\t}\r\n\r\n\r\n\t\t\t},\r\n\t\t\tinsert: function()\r\n\t\t\t{\r\n\t\t\t\tvar data = $('#redactor-insert-video-area').val();\r\n\r\n\t\t\t\tif (!data.match(/<iframe|<video/gi))\r\n\t\t\t\t{\r\n\t\t\t\t\tdata = this.clean.stripTags(data);\r\n\r\n\t\t\t\t\tthis.opts.videoContainerClass = (typeof this.opts.videoContainerClass === 'undefined') ? 'video-container' : this.opts.videoContainerClass;\r\n\r\n\t\t\t\t\t// parse if it is link on youtube & vimeo\r\n\t\t\t\t\tvar iframeStart = '<div class=\"' + this.opts.videoContainerClass + '\"><iframe style=\"width: 500px; height: 281px;\" src=\"',\r\n\t\t\t\t\t\tiframeEnd = '\" frameborder=\"0\" allowfullscreen></iframe></div>';\r\n\r\n\t\t\t\t\tif (data.match(this.video.reUrlYoutube))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata = data.replace(this.video.reUrlYoutube, iframeStart + '//www.youtube.com/embed/$1' + iframeEnd);\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse if (data.match(this.video.reUrlVimeo))\r\n\t\t\t\t\t{\r\n\t\t\t\t\t\tdata = data.replace(this.video.reUrlVimeo, iframeStart + '//player.vimeo.com/video/$2' + iframeEnd);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\r\n\t\t\t\tthis.modal.close();\r\n\t\t\t\tthis.placeholder.hide();\r\n\r\n\t\t\t\t// buffer\r\n\t\t\t\tthis.buffer.set();\r\n\r\n\t\t\t\t// insert\r\n\t\t\t\tthis.air.collapsed();\r\n\t\t\t\tthis.insert.html(data);\r\n\r\n\t\t\t}\r\n\r\n\t\t};\r\n\t};\r\n})(jQuery);"]}